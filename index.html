<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SULAYMAN BOWLES | Digital Portfolio</title>
    <meta name="description" content="Portfolio of Sulayman Bowles. Co-Founder, Analyst, and Digital Alchemist based in Austin, TX.">
    
    <!-- SEO Meta Tags -->
    <meta name="author" content="Sulayman Bowles">
    <meta name="keywords" content="Sulayman Bowles, portfolio, financial analysis, equity research, software development, AI agent, Austin, web3, blockchain, fintech, Point72, digital portfolio, analyst, developer">
    <meta name="robots" content="index, follow">
    <meta name="googlebot" content="index, follow">
    <link rel="canonical" href="https://sulaymanbowles.com/">
    
    <!-- Theme Color -->
    <meta name="theme-color" content="#030303">
    <meta name="msapplication-TileColor" content="#030303">
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">

    <!-- Open Graph / Social Media -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://sulaymanbowles.com/">
    <meta property="og:site_name" content="Sulayman Bowles Portfolio">
    <meta property="og:title" content="SULAYMAN BOWLES | Digital Alchemy">
    <meta property="og:description" content="Finance. Code. Entropy. A system of evidence.">
    <meta property="og:image" content="https://sulaymanbowles.com/og-image.png">
    <meta property="og:image:type" content="image/png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:alt" content="Sulayman Bowles - Digital Portfolio">
    <meta property="og:locale" content="en_US">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://sulaymanbowles.com/">
    <meta property="twitter:title" content="SULAYMAN BOWLES | Digital Alchemy">
    <meta property="twitter:description" content="Finance. Code. Entropy. A system of evidence.">
    <meta property="twitter:image" content="https://sulaymanbowles.com/og-image.png">
    <meta property="twitter:image:alt" content="Sulayman Bowles - Digital Portfolio">
    <meta name="twitter:creator" content="@sulaymanbowles">
    <meta name="twitter:site" content="@sulaymanbowles">

    <!-- Structured Data (JSON-LD) -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Person",
      "name": "Sulayman Bowles",
      "url": "https://sulaymanbowles.com",
      "image": "https://sulaymanbowles.com/og-image.png",
      "jobTitle": "Financial Analyst & Software Developer",
      "description": "Co-Founder, Analyst, and Digital Alchemist specializing in financial analysis, equity research, and software development.",
      "address": {
        "@type": "PostalAddress",
        "addressLocality": "Austin",
        "addressRegion": "TX",
        "addressCountry": "US"
      },
      "alumniOf": [
        {
          "@type": "Organization",
          "name": "Point72"
        }
      ],
      "knowsAbout": ["Financial Analysis", "Equity Research", "Software Development", "Blockchain", "AI", "Web3", "Valuation Models"]
    }
    </script>
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "name": "Sulayman Bowles Portfolio",
      "url": "https://sulaymanbowles.com",
      "description": "Digital portfolio showcasing financial analysis, software development projects, and research work.",
      "author": {
        "@type": "Person",
        "name": "Sulayman Bowles"
      },
      "potentialAction": {
        "@type": "SearchAction",
        "target": "https://sulaymanbowles.com/#work?q={search_term_string}",
        "query-input": "required name=search_term_string"
      }
    }
    </script>

    <!-- Preload critical resources -->
    <link rel="preload" href="https://cdn.tailwindcss.com" as="script">
    <link rel="dns-prefetch" href="https://cdnjs.cloudflare.com">
    <link rel="dns-prefetch" href="https://fonts.googleapis.com">
    <link rel="dns-prefetch" href="https://fonts.gstatic.com">

    <script src="https://cdn.tailwindcss.com"></script>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Space+Grotesk:wght@300;400;500;700&family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Lora:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        display: ['Space Grotesk', 'sans-serif'],
                        serif: ['Lora', 'serif'],
                        playfair: ['Playfair Display', 'serif'],
                    },
                    colors: {
                        'off-white': '#EAEAEA',
                        'off-black': '#030303', /* Deepened black */
                        'charcoal': '#0F0F0F',
                        'mid-gray': '#2A2A2A',
                    },
                    animation: {
                        'marquee': 'marquee 40s linear infinite', /* Slowed down */
                        'pulse-slow': 'pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                    },
                    keyframes: {
                        marquee: {
                            '0%': { transform: 'translateX(0%)' },
                            '100%': { transform: 'translateX(-100%)' },
                        }
                    }
                }
            }
        }
    </script>
    <style>
        /* --- CORE SETTINGS --- */
        ::-webkit-scrollbar { width: 4px; }
        ::-webkit-scrollbar-track { background: #030303; }
        ::-webkit-scrollbar-thumb { background: #333; border-radius: 2px; }
        ::-webkit-scrollbar-thumb:hover { background: #555; }

        body {
            background-color: #030303;
            color: #EAEAEA;
            overflow-x: hidden;
            font-feature-settings: "ss01", "ss02", "salt"; 
            transition: background-color 0.5s ease;
        }

        /* Enhanced focus states for accessibility */
        a:focus-visible, button:focus-visible, [role="button"]:focus-visible {
            outline: 2px solid white;
            outline-offset: 4px;
        }
        
        input:focus-visible, textarea:focus-visible, select:focus-visible {
            outline: 2px solid white;
            outline-offset: 2px;
        }
        
        /* Ensure minimum touch target sizes on mobile */
        @media (max-width: 768px) {
            button, a, [role="button"], input[type="submit"] {
                min-height: 44px;
                min-width: 44px;
            }
        }
        
        /* Improve form field error states */
        input:invalid:not(:placeholder-shown),
        textarea:invalid:not(:placeholder-shown) {
            border-color: rgba(239, 68, 68, 0.5);
        }
        
        input:valid:not(:placeholder-shown),
        textarea:valid:not(:placeholder-shown) {
            border-color: rgba(255, 255, 255, 0.3);
        }
        @media (min-width: 768px) {
            body {
                cursor: none;
            }
        }

        /* --- DEPTH EFFECT CONTAINER --- */
        #app-container {
            position: relative;
            transition: transform 0.5s cubic-bezier(0.16, 1, 0.3, 1), 
                        filter 0.5s cubic-bezier(0.16, 1, 0.3, 1),
                        border-radius 0.5s cubic-bezier(0.16, 1, 0.3, 1);
            transform-origin: center top;
            width: 100%;
            min-height: 100vh;
            background-color: #030303;
            will-change: transform, filter;
        }

        body.modal-open {
            overflow: hidden;
            background-color: #000; /* Darker background behind the scaled content */
        }

        body.modal-open #app-container {
            transform: scale(0.95) translate3d(0, 15px, 0);
            filter: brightness(0.35) blur(2px);
            border-radius: 16px;
            pointer-events: none;
            will-change: transform, filter;
            backface-visibility: hidden;
        }

        ::selection {
            background: #EAEAEA;
            color: #030303;
        }

        /* --- PAPER MODE (WRITING) --- */
        .modal-content.paper-mode {
            background-color: #EAEAEA;
            color: #0F0F0F;
            border: none;
            box-shadow: 0 20px 50px rgba(0,0,0,0.3);
            transition: background-color 0.4s ease, color 0.4s ease, box-shadow 0.4s ease;
        }
        .modal-content.paper-mode ::selection {
            background: #0F0F0F;
            color: #EAEAEA;
        }
        .modal-content.paper-mode #reading-progress {
            background-color: #0F0F0F;
            transition: background-color 0.3s ease;
        }
        .modal-content.paper-mode #close-modal i {
            color: #0F0F0F;
        }

        /* --- INTERACTIVE TERMS (FOOTNOTES) --- */
        .interactive-term {
            border-bottom: 1px dotted #666;
            cursor: help;
            position: relative;
            transition: all 0.2s;
            display: inline-block;
        }
        .interactive-term:hover {
            background-color: rgba(0,0,0,0.05);
            border-bottom-style: solid;
            border-bottom-color: #000;
        }
        .term-tooltip {
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%) translateY(10px);
            background: #0F0F0F;
            color: #EAEAEA;
            padding: 0.75rem 1rem;
            font-family: 'Inter', sans-serif;
            font-size: 0.75rem;
            line-height: 1.4;
            width: max-content;
            max-width: 250px;
            opacity: 0;
            pointer-events: none;
            transition: all 0.2s cubic-bezier(0.16, 1, 0.3, 1);
            z-index: 100;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            border-radius: 4px;
            font-weight: 400;
            text-align: center;
        }
        .term-tooltip::after {
            content: '';
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: #0F0F0F transparent transparent transparent;
        }
        .interactive-term:hover .term-tooltip {
            opacity: 1;
            transform: translateX(-50%) translateY(-8px);
        }

        /* --- SPARKLINES --- */
        .sparkline {
            display: inline-block;
            vertical-align: middle;
            margin: 0 4px;
        }
        .sparkline path {
            fill: none;
            stroke: #0F0F0F;
            stroke-width: 1.5;
        }

        /* --- TYPING ANIMATION --- */
        @keyframes typing {
            from { width: 0; }
            to { width: 100%; }
        }
        @keyframes blink {
            0%, 49% { border-color: white; }
            50%, 100% { border-color: transparent; }
        }
        @keyframes gridPulse {
            0%, 100% { opacity: 0.1; }
            50% { opacity: 0.2; }
        }
        @keyframes cursorBlink {
            0%, 49% { opacity: 1; }
            50%, 100% { opacity: 0; }
        }
        .typing-text {
            overflow: hidden;
            border-right: 2px solid white;
            white-space: nowrap;
            animation: typing 1.8s steps(40, end) cubic-bezier(0.16, 1, 0.3, 1), blink 0.7s step-end infinite;
            display: inline-block;
            will-change: width;
        }
        .typing-text.complete {
            border-right: none;
            animation: none;
            will-change: auto;
        }

        /* --- DESIGN SYSTEM ANIMATIONS --- */
        @keyframes fadeInDesign {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .design-content {
            display: block;
        }

        .design-content.hidden {
            display: none;
        }
        
        .design-content.show-animate {
            animation: fadeInDesign 0.6s cubic-bezier(0.4, 0, 0.2, 1) forwards;
        }

        @keyframes fadeInDesign {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .design-tab.active {
            background: rgba(255, 255, 255, 0.1) !important;
            border-color: rgba(255, 255, 255, 0.2) !important;
            color: white !important;
        }

        /* Motion Demos */
        .motion-demo-ease-out {
            animation: slideDemo 2s cubic-bezier(0, 0, 0.2, 1) infinite;
        }

        .motion-demo-ease-in-out {
            animation: slideDemo 2s cubic-bezier(0.4, 0, 0.2, 1) infinite;
        }

        .motion-demo-spring {
            animation: slideDemo 2s cubic-bezier(0.16, 1, 0.3, 1) infinite;
        }

        @keyframes slideDemo {
            0%, 100% { transform: translateX(0); }
            50% { transform: translateX(calc(100% - 3rem)); }
        }

        /* --- ROW FADE IN ANIMATION --- */
        @keyframes fadeInRow {
            from {
                opacity: 0;
                transform: translateY(2px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* --- STATEMENT TABS --- */
        .statement-tab {
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }
        
        .statement-tab.active {
            background: rgba(255, 255, 255, 0.1) !important;
            border-color: rgba(255, 255, 255, 0.2) !important;
            color: white !important;
        }

        .statement-content {
            transition: opacity 0.6s cubic-bezier(0.4, 0, 0.2, 1), transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            will-change: opacity, transform;
        }

        .statement-content.hidden {
            opacity: 0;
            transform: translateX(-30px);
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            pointer-events: none;
            visibility: hidden;
        }

        .statement-content.active {
            opacity: 1;
            transform: translateX(0);
            position: relative;
            visibility: visible;
        }

        /* --- CUSTOM CURSOR --- */
        .cursor-dot {
            position: fixed;
            top: 0; left: 0;
            width: 6px; height: 6px;
            background-color: white;
            border-radius: 50%;
            z-index: 9999;
            pointer-events: none;
            will-change: transform;
            mix-blend-mode: exclusion;
        }
        
        .cursor-outline {
            position: fixed;
            top: 0; left: 0;
            width: 32px; height: 32px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            z-index: 9998;
            pointer-events: none;
            will-change: transform, width, height;
            transition: width 0.25s cubic-bezier(0.19, 1, 0.22, 1), 
                        height 0.25s cubic-bezier(0.19, 1, 0.22, 1), 
                        background-color 0.25s ease-out,
                        border-color 0.25s ease-out;
            display: flex;
            justify-content: center;
            align-items: center;
            mix-blend-mode: difference;
        }
        
        body.hovering .cursor-outline {
            width: 60px !important; height: 60px !important;
            background-color: rgba(255, 255, 255, 0.15);
            border: 2px solid rgba(255, 255, 255, 0.5) !important;
        }
        body.hovering .cursor-dot { opacity: 0; }

        body.viewing-project .cursor-outline {
            width: 90px !important; height: 90px !important;
            background-color: #EAEAEA;
            border-color: transparent !important;
            mix-blend-mode: normal;
        }
        body.viewing-project .cursor-outline::after {
            content: 'OPEN';
            font-family: 'Space Grotesk', sans-serif;
            font-size: 11px;
            font-weight: 700;
            color: #030303;
            letter-spacing: 2px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        body.viewing-project .cursor-dot { opacity: 0; }

        /* --- SPREADSHEET CURSOR --- */
        .cursor-cell {
            cursor: cell;
        }
        
        #virtual-cursor {
            transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        #cell-selection {
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            background: rgba(255, 255, 255, 0.05);
        }

        /* --- NOISE OVERLAY --- */
        .noise-overlay {
            position: fixed;
            inset: 0;
            pointer-events: none;
            z-index: 40;
            opacity: 0.05;
            background: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
        }

        /* --- MODAL SYSTEM --- */
        .modal-backdrop {
            position: fixed;
            inset: 0;
            background: rgba(3, 3, 3, 0.85);
            backdrop-filter: blur(0px);
            -webkit-backdrop-filter: blur(0px);
            z-index: 90;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.4s cubic-bezier(0.16, 1, 0.3, 1),
                        backdrop-filter 0.5s cubic-bezier(0.16, 1, 0.3, 1);
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 2rem;
            will-change: opacity, backdrop-filter;
        }
        .modal-backdrop.active {
            opacity: 1;
            pointer-events: auto;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }
        
        .modal-content {
            background: #0F0F0F;
            border: 1px solid rgba(255,255,255,0.1);
            width: 100%;
            max-width: 900px;
            max-height: 95vh;
            overflow-y: auto;
            overflow-x: hidden;
            scroll-behavior: smooth;
            -webkit-overflow-scrolling: touch;
            transform: translate3d(0, 25px, 0) scale(0.97);
            transition: transform 0.55s cubic-bezier(0.16, 1, 0.3, 1),
                        opacity 0.45s cubic-bezier(0.16, 1, 0.3, 1);
            opacity: 0;
            position: relative;
            will-change: transform, opacity;
            backface-visibility: hidden;
            -webkit-font-smoothing: antialiased;
        }
        
        @media (min-width: 1024px) {
            .modal-content {
                max-width: 1600px;
            }
        }
        .modal-backdrop.active .modal-content {
            transform: translate3d(0, 0, 0) scale(1);
            opacity: 1;
        }

        /* Modal Content Animation Stagger */
        .modal-stagger {
            opacity: 0;
            transform: translate3d(0, 15px, 0);
            transition: opacity 0.5s cubic-bezier(0.16, 1, 0.3, 1),
                        transform 0.5s cubic-bezier(0.16, 1, 0.3, 1);
            will-change: opacity, transform;
            backface-visibility: hidden;
        }
        .modal-backdrop.active .modal-stagger {
            opacity: 1;
            transform: translate3d(0, 0, 0);
        }
        
        /* Financial Analysis Portfolio Styles */
        .portfolio-view {
            transition: opacity 0.3s ease;
        }
        .portfolio-view.hidden {
            display: none;
            opacity: 0;
        }
        .tab-nav {
            display: flex;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            margin-bottom: 2rem;
            overflow-x: auto;
            gap: 0;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: none;
        }
        .tab-nav::-webkit-scrollbar {
            display: none;
        }
        .tab-btn {
            padding: 1rem 1.5rem;
            font-family: 'Inter', sans-serif;
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: #666;
            border: none;
            border-bottom: 2px solid transparent;
            transition: all 0.3s;
            white-space: nowrap;
            background: none;
            cursor: pointer;
            position: relative;
        }
        .tab-btn:hover {
            color: #fff;
            background: rgba(255,255,255,0.02);
        }
        .tab-btn.active {
            color: #fff;
            border-bottom-color: #fff;
        }
        .tab-content {
            display: none;
            animation: fadeIn 0.5s ease;
        }
        .tab-content.active {
            display: block;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .tv-widget-container {
            width: 100%;
            height: 100%;
        }
        
        /* Stock Card Styles - Monochrome */
        .stock-card {
            position: relative;
            border: 1px solid rgba(255,255,255,0.1);
            background: #0F0F0F;
            transition: all 0.3s ease;
            overflow: hidden;
        }
        .stock-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: transparent;
            transition: background 0.3s;
        }
        .stock-card.sell::before {
            background: rgba(255,255,255,0.3);
        }
        .stock-card.buy::before {
            background: rgba(255,255,255,0.3);
        }
        .stock-card:hover {
            border-color: rgba(255,255,255,0.3);
            background: #121212;
        }
        .stock-card:hover .stock-arrow {
            transform: translateX(4px);
            opacity: 1;
        }
        .stock-arrow {
            opacity: 0.5;
            transition: all 0.3s;
        }
        
        /* Simplified animations - performance optimized */
        @keyframes fadeInUp {
            from { 
                opacity: 0; 
                transform: translateY(8px);
            }
            to { 
                opacity: 1; 
                transform: translateY(0);
            }
        }
        
        /* Slide In Animation */
        @keyframes slideIn {
            from { transform: scaleX(0); transform-origin: left; }
            to { transform: scaleX(1); transform-origin: left; }
        }
        
        /* Rating Badge - Monochrome */
        .rating-badge {
            font-family: 'Inter', sans-serif;
            font-size: 10px;
            font-weight: 600;
            letter-spacing: 0.15em;
            padding: 6px 12px;
            border-radius: 0px;
            background: transparent;
            border: 1px solid rgba(255,255,255,0.3);
            color: #EAEAEA;
        }
        .rating-badge.sell {
            border-color: rgba(255,255,255,0.3);
        }
        .rating-badge.buy {
            border-color: rgba(255,255,255,0.3);
        }
        
        /* Metric Display - Monochrome */
        .metric-block {
            padding: 1.25rem;
            background: rgba(0,0,0,0.4);
            border: 1px solid rgba(255,255,255,0.1);
        }
        .metric-label {
            font-family: 'Inter', sans-serif;
            font-size: 9px;
            text-transform: uppercase;
            letter-spacing: 0.15em;
            color: #666;
            margin-bottom: 0.5rem;
        }
        .metric-value {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 1.5rem;
            font-weight: 500;
        }
        
        /* TradingView Widget Wrappers */
        .widget-wrapper {
            position: relative;
            background: #0a0a0a;
            border: 1px solid rgba(255,255,255,0.08);
            border-radius: 4px;
            overflow: hidden;
        }
        .widget-wrapper::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(180deg, rgba(255,255,255,0.02) 0%, transparent 100%);
            pointer-events: none;
            z-index: 1;
        }
        .widget-header {
            padding: 0.75rem 1rem;
            border-bottom: 1px solid rgba(255,255,255,0.05);
            font-family: 'Inter', sans-serif;
            font-size: 10px;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: #666;
            background: rgba(0,0,0,0.3);
        }
        .widget-body {
            position: relative;
            z-index: 0;
        }

        /* --- UTILITY ANIMATIONS --- */
        .reveal-text {
            opacity: 0;
            transform: translate3d(0, 15px, 0);
            transition: opacity 0.7s cubic-bezier(0.16, 1, 0.3, 1), 
                        transform 0.7s cubic-bezier(0.16, 1, 0.3, 1),
                        filter 0.7s cubic-bezier(0.16, 1, 0.3, 1);
            filter: blur(3px);
            will-change: opacity, transform, filter;
            backface-visibility: hidden;
        }
        .reveal-text.active {
            opacity: 1;
            transform: translate3d(0, 0, 0);
            filter: blur(0);
            will-change: auto;
        }
        
        /* Hero content should be visible immediately */
        section:first-of-type .reveal-text {
            opacity: 1;
            transform: translateY(0);
            filter: blur(0);
        }

        .magnetic-wrap {
            display: inline-block;
            position: relative;
            z-index: 50;
        }
        .magnetic-wrap:focus-visible {
            outline: 2px solid rgba(255, 255, 255, 0.8);
            outline-offset: 4px;
            border-radius: 4px;
        }
        .magnetic-area {
            position: absolute;
            top: -30px; left: -30px; right: -30px; bottom: -30px;
            z-index: 1;
            border-radius: 50%;
        }

        .project-img-container { 
            overflow: hidden;
            backface-visibility: hidden;
        }
        .project-img {
            will-change: transform;
            transform: scale(1.01);
            transition: transform 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            backface-visibility: hidden;
        }
        .group:hover .project-img {
            transform: scale(1.08);
        }

        /* Service Card Special Effects */
        .service-card {
            position: relative;
            transition: transform 0.4s cubic-bezier(0.16, 1, 0.3, 1),
                        border-color 0.4s cubic-bezier(0.16, 1, 0.3, 1),
                        box-shadow 0.4s cubic-bezier(0.16, 1, 0.3, 1);
            will-change: transform;
            backface-visibility: hidden;
        }
        .service-card::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, rgba(255,255,255,0.05) 0%, transparent 50%);
            opacity: 0;
            transition: opacity 0.4s cubic-bezier(0.16, 1, 0.3, 1);
            pointer-events: none;
            z-index: 1;
            will-change: opacity;
        }
        .service-card:hover::before {
            opacity: 1;
        }
        .service-card:hover {
            transform: translate3d(0, -8px, 0);
            box-shadow: 0 20px 60px rgba(0,0,0,0.5);
        }
        .service-card:hover .gen-canvas {
            filter: brightness(1.3) saturate(1.2);
            transition: filter 0.4s cubic-bezier(0.16, 1, 0.3, 1);
        }
        
        /* Service image container parallax effect */
        .service-img-container {
            overflow: hidden;
            position: relative;
        }
        .service-card:hover .service-img-container canvas {
            transform: scale3d(1.15, 1.15, 1);
        }
        .service-img-container canvas {
            transition: transform 0.6s cubic-bezier(0.16, 1, 0.3, 1);
            will-change: transform;
            backface-visibility: hidden;
        }

        /* Loader */
        #loader {
            position: fixed;
            inset: 0;
            background: #030303;
            z-index: 100;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            transition: transform 0.5s cubic-bezier(0.7, 0, 0.3, 1),
                        opacity 0.3s ease-out;
        }
        .loader-hidden { 
            transform: translateY(-100%); 
            opacity: 0;
        }
        
        /* Canvas */
        #canvas-container {
            position: absolute;
            top: 0; right: 0;
            width: 55%; height: 100vh;
            z-index: 1;
            opacity: 1;
            pointer-events: none;
        }
        #canvas-container::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 120%;
            height: 120%;
            background: radial-gradient(
                circle at center,
                rgba(255, 255, 255, 0.03) 0%,
                rgba(150, 150, 150, 0.015) 25%,
                rgba(100, 100, 100, 0.008) 40%,
                transparent 65%
            );
            pointer-events: none;
            z-index: 2;
        }
        @media (max-width: 768px) {
            #canvas-container { width: 100%; opacity: 0.5; z-index: 0; }
        }

        .writing-item { 
            transition: all 0.3s ease;
        }
        .writing-item:focus-visible {
            outline: 2px solid #0F0F0F;
            outline-offset: 4px;
            border-radius: 4px;
        }
        .writing-arrow { 
            opacity: 0; 
            transform: translateX(-10px); 
            transition: all 0.3s ease;
        }
        .writing-item:hover .writing-arrow,
        .writing-item:focus-visible .writing-arrow {
            opacity: 1;
            transform: translateX(0);
        }

        /* --- TYPOGRAPHY & READING --- */
        .drop-cap::first-letter {
            float: left;
            font-family: 'Space Grotesk', sans-serif;
            font-size: 4.5rem;
            line-height: 0.8;
            font-weight: 700;
            margin-right: 1rem;
            margin-top: 0.5rem;
            color: #EAEAEA;
        }
        
        .pull-quote {
            border-left: 2px solid #EAEAEA;
            padding-left: 1.5rem;
            margin: 2rem 0;
            font-family: 'Space Grotesk', sans-serif;
            font-size: 1.5rem;
            font-style: italic;
            color: #A0A0A0;
        }

        /* --- GENERATIVE COVERS --- */
        .gen-canvas {
            position: absolute;
            inset: 0;
            width: 100%;
            height: 100%;
            opacity: 0.6;
            transition: opacity 0.4s cubic-bezier(0.16, 1, 0.3, 1),
                        filter 0.4s cubic-bezier(0.16, 1, 0.3, 1);
            will-change: opacity, filter;
            backface-visibility: hidden;
        }
        .group:hover .gen-canvas { opacity: 1; }

        /* --- LIVE TICKER --- */
        .live-ticker {
            font-family: 'Space Mono', monospace;
            font-size: 10px;
            color: #666;
            display: flex;
            gap: 1rem;
            align-items: center;
        }
        .live-val { color: #EAEAEA; }

        /* Screen reader only class */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border-width: 0;
        }
        .focus\\:not-sr-only:focus {
            position: absolute;
            width: auto;
            height: auto;
            padding: 0;
            margin: 0;
            overflow: visible;
            clip: auto;
            white-space: normal;
        }

        /* --- CHATBOT STYLES --- */
        #chatbot-toggle {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: white;
            color: #030303;
            border: none;
            box-shadow: 0 4px 24px rgba(255,255,255,0.15);
            z-index: 50;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.4s cubic-bezier(0.16, 1, 0.3, 1),
                        box-shadow 0.4s cubic-bezier(0.16, 1, 0.3, 1);
            will-change: transform;
            backface-visibility: hidden;
        }
        #chatbot-toggle:hover {
            transform: scale(1.1);
            box-shadow: 0 8px 32px rgba(255,255,255,0.25);
        }
        #chatbot-toggle.active {
            transform: scale(0.95);
        }
        .chat-badge {
            position: absolute;
            top: -2px;
            right: -2px;
            background: white;
            color: #030303;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            font-size: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            border: 2px solid #030303;
            font-family: 'Space Grotesk', monospace;
        }
        
        #chatbot-window {
            position: fixed;
            bottom: 6rem;
            right: 2rem;
            width: 420px;
            height: 580px;
            background: #0A0A0A;
            border: 1px solid rgba(255,255,255,0.15);
            border-radius: 16px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.8);
            z-index: 50;
            display: flex;
            flex-direction: column;
            opacity: 0;
            transform: translate3d(0, 20px, 0) scale(0.95);
            pointer-events: none;
            transition: opacity 0.5s cubic-bezier(0.16, 1, 0.3, 1),
                        transform 0.5s cubic-bezier(0.16, 1, 0.3, 1),
                        box-shadow 0.5s cubic-bezier(0.16, 1, 0.3, 1);
            will-change: opacity, transform;
            backface-visibility: hidden;
        }
        #chatbot-window.active {
            opacity: 1;
            transform: translate3d(0, 0, 0) scale(1);
            pointer-events: all;
            box-shadow: 0 25px 70px rgba(0,0,0,0.9);
        }
        
        .chat-header {
            padding: 1.5rem;
            border-bottom: 1px solid rgba(255,255,255,0.08);
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(255,255,255,0.02);
        }
        
        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
            gap: 1.25rem;
        }
        .chat-messages::-webkit-scrollbar {
            width: 4px;
        }
        .chat-messages::-webkit-scrollbar-thumb {
            background: rgba(255,255,255,0.15);
            border-radius: 2px;
        }
        .chat-messages::-webkit-scrollbar-thumb:hover {
            background: rgba(255,255,255,0.25);
        }
        
        .chat-message {
            display: flex;
            gap: 0.875rem;
            animation: messageSlideIn 0.35s cubic-bezier(0.16, 1, 0.3, 1);
        }
        @keyframes messageSlideIn {
            from {
                opacity: 0;
                transform: translateY(12px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        .chat-message.user {
            flex-direction: row-reverse;
        }
        
        .chat-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: rgba(255,255,255,0.08);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            border: 1px solid rgba(255,255,255,0.1);
        }
        .chat-message.user .chat-avatar {
            background: white;
            border-color: white;
        }
        
        .chat-bubble {
            max-width: 75%;
            padding: 1rem 1.125rem;
            border-radius: 14px;
            font-size: 14px;
            line-height: 1.65;
            font-family: 'Inter', sans-serif;
        }
        .chat-message.user .chat-bubble {
            background: rgba(255,255,255,0.12);
            color: #EAEAEA;
            border: 1px solid rgba(255,255,255,0.15);
        }
        .chat-message.ai .chat-bubble {
            background: rgba(255,255,255,0.04);
            color: #D4D4D4;
            border: 1px solid rgba(255,255,255,0.06);
        }
        .chat-bubble strong {
            color: white;
            font-weight: 600;
        }
        .chat-bubble em {
            font-style: italic;
            color: #A3A3A3;
        }
        .chat-bubble code {
            background: rgba(255,255,255,0.1);
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Space Grotesk', monospace;
            font-size: 13px;
        }
        
        .chat-timestamp {
            font-family: 'Space Grotesk', monospace;
            font-size: 10px;
            color: #525252;
            margin-top: 0.375rem;
            letter-spacing: 0.02em;
        }
        .chat-message.user .chat-timestamp {
            text-align: right;
        }
        
        .chat-input-area {
            padding: 1.25rem 1.5rem;
            border-top: 1px solid rgba(255,255,255,0.08);
            display: flex;
            gap: 0.875rem;
            background: rgba(255,255,255,0.02);
        }
        
        .chat-input {
            flex: 1;
            background: rgba(255,255,255,0.06);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 10px;
            padding: 0.875rem 1rem;
            color: white;
            font-size: 14px;
            outline: none;
            transition: all 0.25s ease;
            font-family: 'Inter', sans-serif;
        }
        .chat-input:focus {
            border-color: rgba(255,255,255,0.25);
            background: rgba(255,255,255,0.08);
        }
        .chat-input::placeholder {
            color: #737373;
        }
        
        .chat-send-btn {
            width: 44px;
            height: 44px;
            background: white;
            color: #030303;
            border: none;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.25s ease;
            flex-shrink: 0;
        }
        .chat-send-btn:hover:not(:disabled) {
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(255,255,255,0.2);
        }
        .chat-send-btn:active:not(:disabled) {
            transform: scale(0.95);
        }
        .chat-send-btn:disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }
        
        .typing-indicator {
            display: flex;
            gap: 5px;
            padding: 1rem 1.125rem;
        }
        .typing-dot {
            width: 7px;
            height: 7px;
            border-radius: 50%;
            background: rgba(255,255,255,0.35);
            animation: typingBounce 1.3s infinite ease-in-out;
        }
        .typing-dot:nth-child(2) { animation-delay: 0.15s; }
        .typing-dot:nth-child(3) { animation-delay: 0.3s; }
        @keyframes typingBounce {
            0%, 60%, 100% { transform: translateY(0); opacity: 0.35; }
            30% { transform: translateY(-10px); opacity: 0.7; }
        }
        
        .chat-footer {
            padding: 0.875rem 1.5rem;
            border-top: 1px solid rgba(255,255,255,0.05);
            font-size: 9px;
            color: #404040;
            text-align: center;
            font-family: 'Space Grotesk', monospace;
            letter-spacing: 0.1em;
            text-transform: uppercase;
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            #chatbot-toggle {
                bottom: 1.5rem;
                right: 1.5rem;
                width: 56px;
                height: 56px;
            }
            #chatbot-window {
                bottom: 0;
                right: 0;
                left: 0;
                top: 0;
                width: 100%;
                height: 100%;
                border-radius: 0;
                transform: translateY(100%);
            }
            #chatbot-window.active {
                transform: translateY(0);
            }
            .chat-bubble {
                max-width: 85%;
            }
        }
    </style>
</head>
<body class="antialiased">

    <!-- Skip to main content for accessibility -->
    <a href="#work" class="sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 focus:z-50 focus:bg-white focus:text-black focus:px-4 focus:py-2">Skip to main content</a>

    <!-- Cursor -->
    <div class="cursor-dot hidden md:block" aria-hidden="true"></div>
    <div class="cursor-outline hidden md:block" aria-hidden="true"></div>

    <!-- Noise -->
    <div class="noise-overlay"></div>

    <!-- Loading Screen -->
    <div id="loader">
        <div class="flex flex-col items-center gap-6">
            <div class="font-mono text-[10px] text-neutral-400 tracking-[0.5em] uppercase">Sulayman Bowles</div>
            <div class="font-display text-5xl font-bold tracking-tight scramble-text" data-final="OBLIVION">INIT</div>
            <div class="w-24 h-[1px] bg-neutral-800 mt-4 relative overflow-hidden">
                <div class="absolute inset-0 bg-white w-full -translate-x-full animate-[marquee_1.5s_ease-in-out_forwards]"></div>
            </div>
        </div>
    </div>

    <!-- MODAL CONTAINER -->
    <div id="project-modal" class="modal-backdrop">
        <div class="modal-content p-8 md:p-12 relative">
            <!-- Reading Progress Bar -->
            <div id="reading-progress" class="absolute top-0 left-0 h-1 bg-white w-0 z-50" style="transition: width 0.1s ease-out; will-change: width;"></div>
            
            <button id="close-modal" class="absolute top-6 right-6 hover:rotate-90 transition-transform duration-300 group z-50" style="will-change: transform;" aria-label="Close modal">
                <i data-lucide="x" class="w-8 h-8 text-neutral-500 group-hover:text-white transition-colors duration-200"></i>
            </button>
            
            <!-- Content Injection Area -->
            <div id="modal-body"></div>
        </div>
    </div>

    <!-- CHATBOT -->
    <button id="chatbot-toggle" aria-label="Open chatbot" aria-expanded="false">
        <i data-lucide="message-circle" class="w-6 h-6"></i>
        <span class="chat-badge" style="display: none;">1</span>
    </button>

    <div id="chatbot-window" role="dialog" aria-labelledby="chat-title" aria-modal="true">
        <div class="chat-header">
            <div>
                <h3 id="chat-title" class="font-display text-base font-medium tracking-tight">Digital Assistant</h3>
                <p class="font-mono text-[9px] text-neutral-600 tracking-[0.15em] uppercase mt-0.5">Portfolio Guide</p>
            </div>
            <button id="chatbot-close" class="hover:rotate-90 transition-transform duration-300" aria-label="Close chatbot">
                <i data-lucide="x" class="w-5 h-5 text-neutral-500 hover:text-white"></i>
            </button>
        </div>
        
        <div class="chat-messages" id="chat-messages">
            <!-- Messages will be injected here -->
        </div>
        
        <div class="chat-input-area">
            <input 
                type="text" 
                id="chat-input" 
                class="chat-input" 
                placeholder="Ask about services, work, or philosophy..."
                aria-label="Chat message input"
                maxlength="500"
            />
            <button id="chat-send" class="chat-send-btn" aria-label="Send message">
                <i data-lucide="send" class="w-5 h-5"></i>
            </button>
        </div>
        
        <div class="chat-footer">
            POWERED BY GEMINI AI
        </div>
    </div>

    <!-- MAIN APP CONTAINER (For Depth Effect) -->
    <main id="app-container">

    <!-- Navigation -->
    <nav class="fixed w-full top-0 z-40 px-8 py-8 mix-blend-difference text-white transition-transform duration-500" id="navbar">
        <div class="max-w-[1600px] mx-auto flex justify-between items-center">
            <a href="#" class="hover-target magnetic-wrap font-display font-bold text-xl tracking-tighter">
                <span class="magnetic-content block">S. BOWLES</span>
                <span class="magnetic-area"></span>
            </a>
            
            <!-- Desktop Menu -->
            <div class="hidden md:flex gap-12 text-[11px] font-medium tracking-[0.2em] uppercase">
                <a href="financial-analysis.html" class="hover-target magnetic-wrap group">
                    <span class="magnetic-content block group-hover:text-gray-200 transition-colors">Finance</span>
                    <span class="magnetic-area"></span>
                </a>
                <a href="consulting.html" class="hover-target magnetic-wrap group">
                    <span class="magnetic-content block group-hover:text-gray-200 transition-colors">Consulting</span>
                    <span class="magnetic-area"></span>
                </a>
                <a href="#work" class="hover-target magnetic-wrap group">
                    <span class="magnetic-content block group-hover:text-gray-200 transition-colors">Work</span>
                    <span class="magnetic-area"></span>
                </a>
                <a href="#writing" class="hover-target magnetic-wrap group">
                    <span class="magnetic-content block group-hover:text-gray-200 transition-colors">Writing</span>
                    <span class="magnetic-area"></span>
                </a>
                <a href="#contact" class="hover-target magnetic-wrap group">
                    <span class="magnetic-content block group-hover:text-gray-200 transition-colors">Contact</span>
                    <span class="magnetic-area"></span>
                </a>
            </div>

            <!-- Mobile Menu Button -->
            <button id="menu-btn" class="hover-target md:hidden group" aria-label="Open navigation menu" aria-expanded="false">
                <i data-lucide="menu" class="w-6 h-6"></i>
            </button>
        </div>
    </nav>

    <!-- Mobile Menu -->
    <div id="mobile-menu" class="fixed inset-0 bg-off-black z-30 transform translate-x-full flex flex-col justify-center items-center space-y-10" style="transition: transform 0.6s cubic-bezier(0.16, 1, 0.3, 1); will-change: transform; backface-visibility: hidden;" role="dialog" aria-modal="true" aria-label="Navigation menu">
        <a href="financial-analysis.html" class="font-display text-5xl hover:text-gray-500 mobile-link transition-colors">FINANCE</a>
        <a href="consulting.html" class="font-display text-5xl hover:text-gray-500 mobile-link transition-colors">CONSULTING</a>
        <a href="#work" class="font-display text-5xl hover:text-gray-500 mobile-link transition-colors">WORK</a>
        <a href="#writing" class="font-display text-5xl hover:text-gray-500 mobile-link transition-colors">WRITING</a>
        <a href="#contact" class="font-display text-5xl hover:text-gray-500 mobile-link transition-colors">CONTACT</a>
        <button id="close-menu-btn" class="absolute top-8 right-8 p-4 hover:rotate-90 transition-transform duration-300" aria-label="Close navigation menu">
            <i data-lucide="x" class="w-8 h-8 text-white"></i>
        </button>
    </div>

    <!-- Main Content -->
    <main id="main-content" role="main">

    <!-- Hero Section -->
    <section class="relative min-h-screen flex flex-col justify-center px-6 md:px-12 overflow-hidden border-b border-white/10" aria-label="Hero section">
        <div id="canvas-container"></div>

        <div class="max-w-[1600px] w-full mx-auto z-10 relative pointer-events-none">
            <!-- Main Title -->
            <div class="pointer-events-auto relative select-none">
                <h1 class="font-display text-[12vw] leading-[0.8] font-bold tracking-tighter text-white reveal-text scramble-hover" data-final="DIGITAL" style="transition-delay: 100ms;">
                    DIGITAL
                </h1>
            </div>
            <div class="pointer-events-auto relative select-none">
                <h1 class="font-display text-[12vw] leading-[0.8] font-bold tracking-tighter text-transparent bg-clip-text bg-gradient-to-r from-white via-neutral-400 to-neutral-900 reveal-text scramble-hover" data-final="ALCHEMY" style="transition-delay: 250ms;">
                    ALCHEMY
                </h1>
            </div>
            
            <!-- Bio / Details -->
            <div class="mt-20 max-w-6xl pointer-events-auto relative">
                <div class="max-w-[580px] relative z-10">
                    <p class="font-sans text-xl md:text-2xl text-neutral-200 leading-[1.7] reveal-text mb-12" style="transition-delay: 500ms;">
                        I build the <span class="text-white font-medium border-b border-white/30 pb-1" style="transition: border-color 0.3s ease;">financial models investors trust</span>, and the <span class="text-white font-medium border-b border-white/30 pb-1" style="transition: border-color 0.3s ease;">digital experiences that capture their attention</span>. Data-driven design meets visually intuitive analysis.
                    </p>
                    
                    <div class="reveal-text mb-8" style="transition-delay: 600ms;">
                        <a href="#services" class="magnetic-wrap hover-target inline-flex items-center gap-3 px-8 py-4 border-2 border-white/40 hover:border-white hover:bg-white/5 group text-white text-base font-medium rounded-sm backdrop-blur-sm hover:shadow-[0_0_20px_rgba(255,255,255,0.15)]" style="transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1); will-change: transform, border-color, background-color, box-shadow;">
                            <span class="magnetic-content inline-flex items-center gap-2">
                                View Services <i data-lucide="arrow-down-right" class="w-5 h-5" style="transition: transform 0.4s cubic-bezier(0.16, 1, 0.3, 1); will-change: transform;" class="group-hover:translate-x-1 group-hover:translate-y-1"></i>
                            </span>
                            <span class="magnetic-area"></span>
                        </a>
                    </div>
                    
                    <div class="flex flex-wrap gap-6 font-mono text-[11px] text-neutral-300 uppercase tracking-wider reveal-text" style="transition-delay: 700ms;">
                        <span class="opacity-80">Austin, TX</span>
                        <span class="opacity-80">UT Austin '28</span>
                    </div>
                </div>
                <!-- Gradient overlay behind copy block -->
                <div class="absolute top-0 left-0 w-[120%] h-full pointer-events-none z-0" style="background: linear-gradient(to right, rgba(0, 0, 0, 0.4) 0%, rgba(0, 0, 0, 0.15) 50%, transparent 100%);"></div>
            </div>
        </div>
    </section>

    <!-- Infinite Marquee -->
    <div class="py-8 border-b border-white/15 bg-charcoal overflow-hidden flex relative z-20 pointer-events-none select-none">
        <div class="animate-marquee whitespace-nowrap flex gap-16 text-4xl md:text-6xl font-display font-bold text-[#888888]">
            <span>FINANCIAL MODELING</span> <span class="text-[#666666]">///</span>
            <span>FULL STACK</span> <span class="text-[#666666]">///</span>
            <span>WEB3 SYSTEMS</span> <span class="text-[#666666]">///</span>
            <span>DATA SCIENCE</span> <span class="text-[#666666]">///</span>
            <span>FINANCIAL MODELING</span> <span class="text-[#666666]">///</span>
            <span>FULL STACK</span> <span class="text-[#666666]">///</span>
            <span>WEB3 SYSTEMS</span> <span class="text-[#666666]">///</span>
            <span>DATA SCIENCE</span> <span class="text-[#666666]">///</span>
        </div>
        <div class="animate-marquee whitespace-nowrap flex gap-16 text-4xl md:text-6xl font-display font-bold text-[#888888]" aria-hidden="true">
            <span>FINANCIAL MODELING</span> <span class="text-[#666666]">///</span>
            <span>FULL STACK</span> <span class="text-[#666666]">///</span>
            <span>WEB3 SYSTEMS</span> <span class="text-[#666666]">///</span>
            <span>DATA SCIENCE</span> <span class="text-[#666666]">///</span>
            <span>FINANCIAL MODELING</span> <span class="text-[#666666]">///</span>
            <span>FULL STACK</span> <span class="text-[#666666]">///</span>
            <span>WEB3 SYSTEMS</span> <span class="text-[#666666]">///</span>
            <span>DATA SCIENCE</span> <span class="text-[#666666]">///</span>
        </div>
    </div>

    <!-- Services Section -->
    <section id="services" class="py-40 px-6 md:px-12 relative border-b border-white/10" aria-labelledby="services-heading">
        <div class="max-w-[1600px] mx-auto">
            <div class="flex flex-col md:flex-row justify-between items-end mb-20 border-b border-white/10 pb-8 reveal-text">
                <h2 id="services-heading" class="font-display text-6xl md:text-8xl font-bold tracking-tight text-white">SERVICES</h2>
                <div class="flex flex-col items-end mt-6 md:mt-0">
                    <span class="font-mono text-xs text-neutral-400 mb-2 tracking-widest uppercase">Available Now</span>
                    <span class="font-mono text-xs text-white tracking-widest">RETAINER / PROJECT</span>
                </div>
            </div>

            <!-- Services Grid -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 reveal-text">
                
                <!-- Service 1: Financial Consulting -->
                <div class="group service-card cursor-pointer border border-white/15 bg-charcoal hover:border-white/30 transition-all duration-500 overflow-hidden" data-service="financial">
                    <div class="service-img-container relative w-full h-[50vh] bg-[#0A0A0A] overflow-hidden">
                        <canvas id="canvas-financial" class="gen-canvas"></canvas>
                        <div class="absolute inset-0 bg-black/20 group-hover:bg-black/0 transition-colors duration-700"></div>
                    </div>
                    <div class="p-8 border-t border-white/20">
                        <div class="flex justify-between items-start mb-4">
                            <div>
                                <h3 class="font-display text-3xl md:text-4xl font-medium mb-2 group-hover:translate-x-2 transition-transform duration-500">FINANCIAL CONSULTING</h3>
                                <p class="font-sans text-neutral-400 text-sm group-hover:translate-x-2 transition-transform duration-500 delay-75">Strategic Analysis / Modeling / Decision Architecture</p>
                            </div>
                            <span class="font-mono text-xs border border-white/20 px-3 py-1 rounded-full group-hover:bg-white group-hover:text-black transition-colors">01</span>
                        </div>
                        <p class="font-sans text-neutral-300 text-sm leading-relaxed mb-6">
                            Transform organizational complexity into executable clarity. From DCF models to strategic scenario planning-I diagnose friction points, quantify uncertainty, and architect decision frameworks that drive measurable ROI.
                        </p>
                        <div class="flex flex-wrap gap-2">
                            <span class="px-2 py-1 bg-white/10 text-[10px] font-mono uppercase text-neutral-300 tracking-widest">DCF Models</span>
                            <span class="px-2 py-1 bg-white/10 text-[10px] font-mono uppercase text-neutral-300 tracking-widest">Valuation</span>
                            <span class="px-2 py-1 bg-white/10 text-[10px] font-mono uppercase text-neutral-300 tracking-widest">Risk Analysis</span>
                            <span class="px-2 py-1 bg-white/10 text-[10px] font-mono uppercase text-neutral-300 tracking-widest">Strategy</span>
                        </div>
                    </div>
                </div>

                <!-- Service 2: Website Design -->
                <div class="group service-card cursor-pointer border border-white/15 bg-charcoal hover:border-white/30 transition-all duration-500 overflow-hidden" data-service="website">
                    <div class="service-img-container relative w-full h-[50vh] bg-[#0A0A0A] overflow-hidden">
                        <canvas id="canvas-website" class="gen-canvas"></canvas>
                        <div class="absolute inset-0 bg-black/20 group-hover:bg-black/0 transition-colors duration-700"></div>
                    </div>
                    <div class="p-8 border-t border-white/20">
                        <div class="flex justify-between items-start mb-4">
                            <div>
                                <h3 class="font-display text-3xl md:text-4xl font-medium mb-2 group-hover:translate-x-2 transition-transform duration-500">WEBSITE DESIGN</h3>
                                <p class="font-sans text-neutral-400 text-sm group-hover:translate-x-2 transition-transform duration-500 delay-75">Bespoke Development / Interactive Experiences / Conversion-Focused</p>
                            </div>
                            <span class="font-mono text-xs border border-white/20 px-3 py-1 rounded-full group-hover:bg-white group-hover:text-black transition-colors">02</span>
                        </div>
                        <p class="font-sans text-neutral-300 text-sm leading-relaxed mb-6">
                            Digital experiences that convert attention into revenue. Generative art, kinetic typography, and pixel-perfect execution-built with conversion metrics embedded from day one, not added as an afterthought.
                        </p>
                        <div class="flex flex-wrap gap-2">
                            <span class="px-2 py-1 bg-white/10 text-[10px] font-mono uppercase text-neutral-300 tracking-widest">React/Next.js</span>
                            <span class="px-2 py-1 bg-white/10 text-[10px] font-mono uppercase text-neutral-300 tracking-widest">Three.js</span>
                            <span class="px-2 py-1 bg-white/10 text-[10px] font-mono uppercase text-neutral-300 tracking-widest">Tailwind</span>
                            <span class="px-2 py-1 bg-white/10 text-[10px] font-mono uppercase text-neutral-300 tracking-widest">Generative</span>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </section>

    <!-- Selected Work Section -->
    <section id="work" class="py-40 px-6 md:px-12 relative" aria-labelledby="work-heading">
        <div class="max-w-[1600px] mx-auto">
            <div class="flex flex-col md:flex-row justify-between items-end mb-32 border-b border-white/10 pb-8 reveal-text">
                <h2 id="work-heading" class="font-display text-6xl md:text-8xl font-bold tracking-tight mix-blend-difference">SELECTED<br>WORKS</h2>
                <div class="flex flex-col items-end mt-6 md:mt-0">
                    <span class="font-mono text-xs text-neutral-400 mb-2 tracking-widest uppercase">Archive</span>
                    <span class="font-mono text-xs text-white tracking-widest">(2023 - 2025)</span>
                </div>
            </div>

            <!-- Project 1: VC-Backed Startup -->
            <div class="group project-card mb-40 w-full cursor-pointer reveal-text view-project-target" data-project="bittensor">
                <div class="project-img-container relative w-full h-[70vh] bg-charcoal mb-8 overflow-hidden border border-white/10">
                    <div class="project-img absolute inset-0 w-full h-full bg-[#0A0A0A]">
                        <canvas id="canvas-bittensor" class="gen-canvas"></canvas>
                    </div>
                    <div class="absolute inset-0 bg-black/10 group-hover:bg-black/0 transition-colors duration-700 pointer-events-none"></div>
                </div>
                <div class="flex justify-between items-start border-t border-white/20 pt-6">
                    <div>
                        <h3 class="font-display text-4xl font-medium mb-2 group-hover:translate-x-4 transition-transform duration-500">BITTENSOR STARTUP</h3>
                        <p class="font-sans text-neutral-400 group-hover:translate-x-4 transition-transform duration-500 delay-75">Co-Founder / $80K Revenue / Decentralized AI</p>
                    </div>
                    <span class="font-mono text-xs border border-white/20 px-3 py-1 rounded-full group-hover:bg-white group-hover:text-black transition-colors">01</span>
                </div>
            </div>

            <!-- Project 2: Web3 Payroll -->
            <div class="group project-card mb-40 w-full md:w-4/5 md:ml-auto cursor-pointer reveal-text view-project-target" data-project="payroll">
                <div class="project-img-container relative w-full h-[70vh] bg-charcoal mb-8 overflow-hidden border border-white/10">
                     <div class="project-img absolute inset-0 w-full h-full bg-[#0A0A0A]">
                        <canvas id="canvas-payroll" class="gen-canvas"></canvas>
                    </div>
                </div>
                <div class="flex justify-between items-start border-t border-white/20 pt-6">
                    <div>
                        <h3 class="font-display text-4xl font-medium mb-2 group-hover:translate-x-4 transition-transform duration-500">CHAIN PAYROLL</h3>
                        <p class="font-sans text-neutral-400 group-hover:translate-x-4 transition-transform duration-500 delay-75">1st Place Winner / Team Lead / Smart Contracts</p>
                    </div>
                    <span class="font-mono text-xs border border-white/20 px-3 py-1 rounded-full group-hover:bg-white group-hover:text-black transition-colors">02</span>
                </div>
            </div>

             <!-- Project 3: Point72 -->
             <div class="group project-card mb-40 w-full md:w-3/4 cursor-pointer reveal-text view-project-target" data-project="point72">
                <div class="project-img-container relative w-full h-[70vh] bg-charcoal mb-8 overflow-hidden border border-white/10">
                     <div class="project-img absolute inset-0 w-full h-full bg-[#0A0A0A]">
                        <canvas id="canvas-point72" class="gen-canvas"></canvas>
                    </div>
                </div>
                <div class="flex justify-between items-start border-t border-white/20 pt-6">
                    <div>
                        <h3 class="font-display text-4xl font-medium mb-2 group-hover:translate-x-4 transition-transform duration-500">FINANCIAL ANALYSIS PORTFOLIO</h3>
                        <p class="font-sans text-neutral-400 group-hover:translate-x-4 transition-transform duration-500 delay-75">Equity Research / Valuation Models / Sector Analysis</p>
                    </div>
                    <span class="font-mono text-xs border border-white/20 px-3 py-1 rounded-full group-hover:bg-white group-hover:text-black transition-colors">03</span>
                </div>
            </div>

            <!-- Project 4: Consulting (TaskFormer) -->
            <div class="group project-card w-full md:w-4/5 md:ml-auto cursor-pointer reveal-text view-project-target" data-project="taskformer">
                <div class="project-img-container relative w-full h-[70vh] bg-charcoal mb-8 overflow-hidden border border-white/10">
                     <div class="project-img absolute inset-0 w-full h-full bg-[#0A0A0A]">
                        <canvas id="canvas-taskformer" class="gen-canvas"></canvas>
                    </div>
                </div>
                <div class="flex justify-between items-start border-t border-white/20 pt-6">
                    <div>
                        <h3 class="font-display text-4xl font-medium mb-2 group-hover:translate-x-4 transition-transform duration-500">CONSULTING PRACTICE</h3>
                        <p class="font-sans text-neutral-400 group-hover:translate-x-4 transition-transform duration-500 delay-75">Financial Strategy / M&A Advisory / Operational Excellence</p>
                    </div>
                    <span class="font-mono text-xs border border-white/20 px-3 py-1 rounded-full group-hover:bg-white group-hover:text-black transition-colors">04</span>
                </div>
            </div>
            
            <div class="mt-32 text-center reveal-text">
                <a href="Bowles Sulayman oih.pdf" target="_blank" class="magnetic-wrap hover-target inline-block font-display text-lg border border-white/20 px-10 py-5 hover:bg-white hover:text-black transition-colors duration-500">
                    <span class="magnetic-content block tracking-widest uppercase">View Full Resume</span>
                    <span class="magnetic-area"></span>
                </a>
            </div>
        </div>
    </section>

    <!-- Writing / Thoughts Section -->
    <section id="writing" class="py-40 px-6 md:px-12 bg-off-white text-off-black relative">
        <div class="max-w-[1200px] mx-auto">
            <div class="flex items-center gap-4 mb-20 reveal-text">
                <div class="w-2 h-2 bg-off-black rounded-full animate-pulse-slow"></div>
                <h2 class="font-mono text-xs font-bold tracking-[0.2em] uppercase text-neutral-400">Writing & Thoughts</h2>
            </div>

            <div class="space-y-8">
                <!-- Essay 1 -->
                <div data-writing="convexity" class="writing-item block border-b border-neutral-300 pb-8 hover:border-black reveal-text group cursor-none hover-target cursor-pointer" tabindex="0" role="button" aria-label="Read essay: The Convexity Trap">
                    <div class="flex flex-col md:flex-row md:items-baseline justify-between gap-4">
                        <div class="flex items-center gap-4">
                             <i data-lucide="arrow-right" class="writing-arrow w-6 h-6 text-neutral-800"></i>
                             <h3 class="font-display text-3xl md:text-5xl font-medium group-hover:text-neutral-800">The Convexity Trap</h3>
                        </div>
                        <span class="font-mono text-xs text-neutral-400">DEC 2025</span>
                    </div>
                    <p class="mt-4 font-sans text-neutral-600 max-w-2xl pl-0 md:pl-10">Why negative convexity in MBS portfolios destroyed hedge funds in 2022. A technical autopsy of duration extension and gamma hedging failures.</p>
                </div>

                <!-- Essay 2 -->
                <div data-writing="terminal" class="writing-item block border-b border-neutral-300 pb-8 hover:border-black reveal-text group cursor-none hover-target cursor-pointer" tabindex="0" role="button" aria-label="Read essay: Terminal Value Deconstructed">
                    <div class="flex flex-col md:flex-row md:items-baseline justify-between gap-4">
                        <div class="flex items-center gap-4">
                             <i data-lucide="arrow-right" class="writing-arrow w-6 h-6 text-neutral-800"></i>
                             <h3 class="font-display text-3xl md:text-5xl font-medium group-hover:text-neutral-800">Terminal Value Deconstructed</h3>
                        </div>
                        <span class="font-mono text-xs text-neutral-400">NOV 2025</span>
                    </div>
                    <p class="mt-4 font-sans text-neutral-600 max-w-2xl pl-0 md:pl-10">The 80% problem in DCF models. Why perpetuity growth assumptions mask value creation and how to build defensible exit multiples.</p>
                </div>

                <!-- Essay 3 -->
                <div data-writing="variance" class="writing-item block border-b border-neutral-300 pb-8 hover:border-black reveal-text group cursor-none hover-target cursor-pointer" tabindex="0" role="button" aria-label="Read essay: Variance Risk Premium Extraction">
                    <div class="flex flex-col md:flex-row md:items-baseline justify-between gap-4">
                        <div class="flex items-center gap-4">
                             <i data-lucide="arrow-right" class="writing-arrow w-6 h-6 text-neutral-800"></i>
                             <h3 class="font-display text-3xl md:text-5xl font-medium group-hover:text-neutral-800">Variance Risk Premium Extraction</h3>
                        </div>
                        <span class="font-mono text-xs text-neutral-400">OCT 2025</span>
                    </div>
                    <p class="mt-4 font-sans text-neutral-600 max-w-2xl pl-0 md:pl-10">Decomposing realized vs. implied volatility spreads. Statistical arbitrage strategies in VIX futures term structure and variance swap mechanics.</p>
                </div>

                <!-- Essay 4 -->
                <div data-writing="bootstrap" class="writing-item block border-b border-neutral-300 pb-8 hover:border-black reveal-text group cursor-none hover-target cursor-pointer" tabindex="0" role="button" aria-label="Read essay: Bootstrapping the Yield Curve">
                     <div class="flex flex-col md:flex-row md:items-baseline justify-between gap-4">
                        <div class="flex items-center gap-4">
                             <i data-lucide="arrow-right" class="writing-arrow w-6 h-6 text-neutral-800"></i>
                             <h3 class="font-display text-3xl md:text-5xl font-medium group-hover:text-neutral-800">Bootstrapping the Yield Curve</h3>
                        </div>
                        <span class="font-mono text-xs text-neutral-400">SEP 2025</span>
                    </div>
                    <p class="mt-4 font-sans text-neutral-600 max-w-2xl pl-0 md:pl-10">From SOFR swaps to zero-coupon rates. The mechanics of curve construction, interpolation methods, and cross-currency basis adjustments.</p>
                </div>

                <!-- Essay 5 -->
                <div data-writing="credit" class="writing-item block border-b border-neutral-300 pb-8 hover:border-black reveal-text group cursor-none hover-target cursor-pointer" tabindex="0" role="button" aria-label="Read essay: Credit Spread Decomposition">
                     <div class="flex flex-col md:flex-row md:items-baseline justify-between gap-4">
                        <div class="flex items-center gap-4">
                             <i data-lucide="arrow-right" class="writing-arrow w-6 h-6 text-neutral-800"></i>
                             <h3 class="font-display text-3xl md:text-5xl font-medium group-hover:text-neutral-800">Credit Spread Decomposition</h3>
                        </div>
                        <span class="font-mono text-xs text-neutral-400">AUG 2025</span>
                    </div>
                    <p class="mt-4 font-sans text-neutral-600 max-w-2xl pl-0 md:pl-10">Separating default probability from recovery rates in corporate bonds. Structural models vs. reduced-form approaches in distressed debt.</p>
                </div>

                <!-- Essay 6 -->
                <div data-writing="leverage" class="writing-item block border-b border-neutral-300 pb-8 hover:border-black reveal-text group cursor-none hover-target cursor-pointer" tabindex="0" role="button" aria-label="Read essay: The Leverage Ratchet">
                     <div class="flex flex-col md:flex-row md:items-baseline justify-between gap-4">
                        <div class="flex items-center gap-4">
                             <i data-lucide="arrow-right" class="writing-arrow w-6 h-6 text-neutral-800"></i>
                             <h3 class="font-display text-3xl md:text-5xl font-medium group-hover:text-neutral-800">The Leverage Ratchet</h3>
                        </div>
                        <span class="font-mono text-xs text-neutral-400">JUL 2025</span>
                    </div>
                    <p class="mt-4 font-sans text-neutral-600 max-w-2xl pl-0 md:pl-10">LBO modeling beyond the template. Optimal capital structure, covenant design, and the hidden costs of financial engineering in leveraged buyouts.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Philosophy Section -->
    <section id="philosophy" class="py-40 px-6 md:px-12 bg-[#080808] relative overflow-hidden border-t border-white/10">
        <!-- Oscilloscope Canvas -->
        <canvas id="oscilloscope" class="absolute inset-0 w-full h-full opacity-20 pointer-events-none"></canvas>

        <div class="max-w-5xl mx-auto relative z-10">
            <div class="flex items-center gap-4 mb-16 reveal-text">
                <div class="w-2 h-2 bg-white rounded-full"></div>
                <h2 class="font-mono text-xs font-bold tracking-[0.2em] uppercase text-neutral-400">The Philosophy</h2>
            </div>
            
            <div class="font-display text-3xl md:text-5xl leading-[1.2] font-light space-y-12 text-neutral-300">
                <p class="reveal-text">
                    Whether in code, markets, or music, I search for the dissonance. I believe in the "unpleasant details"-the friction points others ignore. 
                </p>
                <p class="reveal-text">
                   My work is a study in dualities: spreadsheet precision meeting startup chaos. Classical structure meeting market volatility. Pattern recognition meeting creative intuition.
                </p>
                
                <!-- The Alchemical Grid (Periodic Table) -->
                <div class="mt-24 reveal-text relative z-20">
                    <h4 class="font-mono text-xs uppercase tracking-widest text-neutral-400 mb-8">Raw Materials</h4>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                        <!-- Tile 1 -->
                        <div class="group border border-white/20 bg-black/20 backdrop-blur-sm p-4 aspect-square flex flex-col justify-between hover:bg-white hover:text-black transition-colors duration-300 cursor-crosshair">
                            <span class="font-mono text-[10px] opacity-50">01</span>
                            <span class="font-display text-4xl font-bold self-center">Py</span>
                            <div class="flex flex-col">
                                <span class="font-bold text-xs uppercase tracking-wider">Python</span>
                                <span class="font-mono text-[10px] opacity-60">Language</span>
                            </div>
                        </div>
                        <!-- Tile 2 -->
                        <div class="group border border-white/20 bg-black/20 backdrop-blur-sm p-4 aspect-square flex flex-col justify-between hover:bg-white hover:text-black transition-colors duration-300 cursor-crosshair">
                            <span class="font-mono text-[10px] opacity-50">02</span>
                            <span class="font-display text-4xl font-bold self-center">So</span>
                            <div class="flex flex-col">
                                <span class="font-bold text-xs uppercase tracking-wider">Solidity</span>
                                <span class="font-mono text-[10px] opacity-60">Language</span>
                            </div>
                        </div>
                        <!-- Tile 3 -->
                        <div class="group border border-white/20 bg-black/20 backdrop-blur-sm p-4 aspect-square flex flex-col justify-between hover:bg-white hover:text-black transition-colors duration-300 cursor-crosshair">
                            <span class="font-mono text-[10px] opacity-50">03</span>
                            <span class="font-display text-4xl font-bold self-center">Fi</span>
                            <div class="flex flex-col">
                                <span class="font-bold text-xs uppercase tracking-wider">Finance</span>
                                <span class="font-mono text-[10px] opacity-60">Discipline</span>
                            </div>
                        </div>
                        <!-- Tile 4 -->
                        <div class="group border border-white/20 bg-black/20 backdrop-blur-sm p-4 aspect-square flex flex-col justify-between hover:bg-white hover:text-black transition-colors duration-300 cursor-crosshair">
                            <span class="font-mono text-[10px] opacity-50">04</span>
                            <span class="font-display text-4xl font-bold self-center">Fa</span>
                            <div class="flex flex-col">
                                <span class="font-bold text-xs uppercase tracking-wider">Falconry</span>
                                <span class="font-mono text-[10px] opacity-60">Discipline</span>
                            </div>
                        </div>
                        <!-- Tile 5 -->
                        <div class="group border border-white/20 bg-black/20 backdrop-blur-sm p-4 aspect-square flex flex-col justify-between hover:bg-white hover:text-black transition-colors duration-300 cursor-crosshair">
                            <span class="font-mono text-[10px] opacity-50">05</span>
                            <span class="font-display text-4xl font-bold self-center">Nu</span>
                            <div class="flex flex-col">
                                <span class="font-bold text-xs uppercase tracking-wider">Nuclear</span>
                                <span class="font-mono text-[10px] opacity-60">Power</span>
                            </div>
                        </div>
                        <!-- Tile 6 -->
                        <div class="group border border-white/20 bg-black/20 backdrop-blur-sm p-4 aspect-square flex flex-col justify-between hover:bg-white hover:text-black transition-colors duration-300 cursor-crosshair">
                            <span class="font-mono text-[10px] opacity-50">06</span>
                            <span class="font-display text-4xl font-bold self-center">Mu</span>
                            <div class="flex flex-col">
                                <span class="font-bold text-xs uppercase tracking-wider">Music</span>
                                <span class="font-mono text-[10px] opacity-60">Art</span>
                            </div>
                        </div>
                        <!-- Tile 7 -->
                        <div class="group border border-white/20 bg-black/20 backdrop-blur-sm p-4 aspect-square flex flex-col justify-between hover:bg-white hover:text-black transition-colors duration-300 cursor-crosshair">
                            <span class="font-mono text-[10px] opacity-50">07</span>
                            <span class="font-display text-4xl font-bold self-center">Re</span>
                            <div class="flex flex-col">
                                <span class="font-bold text-xs uppercase tracking-wider">React</span>
                                <span class="font-mono text-[10px] opacity-60">Framework</span>
                            </div>
                        </div>
                        <!-- Tile 8 -->
                        <div class="group border border-white/20 bg-black/20 backdrop-blur-sm p-4 aspect-square flex flex-col justify-between hover:bg-white hover:text-black transition-colors duration-300 cursor-crosshair">
                            <span class="font-mono text-[10px] opacity-50">08</span>
                            <span class="font-display text-4xl font-bold self-center">Bl</span>
                            <div class="flex flex-col">
                                <span class="font-bold text-xs uppercase tracking-wider">Bloomberg</span>
                                <span class="font-mono text-[10px] opacity-60">Tool</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Kinetic Truth Manifesto -->
                <div class="mt-32 text-center relative z-0">
                    <p class="font-display text-4xl md:text-6xl font-bold text-white blur-[2px] hover:blur-0 transition-all duration-500 cursor-default select-none">
                        "The edge lives in the unpleasant details."
                    </p>
                </div>

            </div>
        </div>
        
        <!-- Background Typography -->
        <div class="absolute -bottom-[2vw] -right-[2vw] font-display font-bold text-[15vw] text-white pointer-events-none select-none opacity-[0.03] leading-none">
            TRUTH
        </div>
    </section>

    <!-- Contact Section -->
    <section id="contact" class="py-32 px-6 md:px-12 min-h-[80vh] flex flex-col justify-between bg-[#080808] text-white border-t border-white/10" aria-labelledby="contact-heading">
        <div class="max-w-[1600px] mx-auto w-full h-full flex flex-col justify-center flex-grow pt-20">
            <div class="reveal-text mb-12">
                <p class="font-sans text-2xl md:text-3xl text-neutral-400 max-w-3xl leading-[1.6]">
                    Have a project? Building something that requires precision? Let's discuss how strategic clarity can transform complexity into competitive advantage.
                </p>
            </div>
            <div class="reveal-text">
                <h2 id="contact-heading" class="font-display text-[9vw] leading-[0.9] font-bold tracking-tighter hover:text-neutral-300 transition-all duration-300 cursor-pointer hover-target magnetic-wrap group">
                    <a href="mailto:sulayman.bowles@gmail.com" class="magnetic-content block underline decoration-white/20 decoration-1 underline-offset-8 hover:decoration-white/60 transition-all duration-300 relative z-10">
                        SULAYMAN.<br>BOWLES@GMAIL
                    </a>
                    <span class="magnetic-area"></span>
                </h2>
            </div>
        </div>

        <footer class="max-w-[1600px] mx-auto w-full flex flex-col md:flex-row justify-between items-end md:items-center border-t border-white/10 pt-10 mt-20 reveal-text" role="contentinfo">
            <div class="flex gap-8 mb-8 md:mb-0">
                <a href="https://www.linkedin.com/in/sulayman-bowles" target="_blank" rel="noopener noreferrer" class="hover-target text-neutral-400 hover:text-white transition-colors uppercase text-xs tracking-widest border-b border-transparent hover:border-white pb-1" aria-label="Visit LinkedIn profile">LinkedIn</a>
                <a href="https://github.com/sulaymanb2024" target="_blank" rel="noopener noreferrer" class="hover-target text-neutral-400 hover:text-white transition-colors uppercase text-xs tracking-widest border-b border-transparent hover:border-white pb-1" aria-label="Visit GitHub profile">GitHub</a>
                <a href="Bowles Sulayman oih.pdf" target="_blank" class="hover-target text-neutral-400 hover:text-white transition-colors uppercase text-xs tracking-widest border-b border-transparent hover:border-white pb-1" aria-label="Download resume">Resume</a>
            </div>
            <div class="text-neutral-400 text-xs font-mono flex flex-col md:flex-row gap-4 md:gap-8 text-right md:text-left uppercase items-center">
                <div id="live-ticker" class="live-ticker"></div>
                <time id="clock">00:00:00 CST</time>
                <span>&copy; <span id="year"></span> SULAYMAN BOWLES</span>
            </div>
        </footer>
    </section>
    </main> <!-- End of main content -->

    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

    <script>
        // --- 1. DATA: PROJECT CONTENT ---
        // --- FINANCIAL PORTFOLIO LOGIC ---
        window.currentSymbol = 'NYSE:SG';
        window.widgetsPreloaded = false;
        
        // Preload TradingView widgets on modal open
        window.preloadPortfolioWidgets = function() {
            if (window.widgetsPreloaded) return;
            window.widgetsPreloaded = true;
            
            // Preload for default symbol
            setTimeout(function() {
                window.initTradingViewWidgets('NYSE:SG');
            }, 500);
        };
        
        // Company-specific data for the detail view
        window.companyData = {
            'NYSE:SG': {
                name: 'SWEETGREEN',
                ticker: 'SG',
                sector: 'RESTAURANTS',
                cap: 'SMID CAP',
                region: 'US',
                rating: 'SELL',
                target: '$18.00',
                returnPct: '-48%',
                thesis: [
                    'Infinite Kitchen capex intensity exceeds margin improvement timeline',
                    'Customer acquisition costs inflating faster than LTV growth',
                    'Same-store sales momentum decelerating beneath headline growth',
                    'Tech premium valuation for capital-intensive restaurant model',
                    'Path to profitability pushed further into future each quarter'
                ],
                catalysts: [
                    'Q4 earnings: watch for SSS deceleration confirmation',
                    'Infinite Kitchen rollout pace vs. capex burn',
                    'Labor cost trends in key urban markets',
                    'Insider selling patterns post-lockup'
                ],
                scenarios: { bear: '-65%', base: '-48%', bull: '-15%' }
            },
            'NASDAQ:SEZL': {
                name: 'SEZZLE',
                ticker: 'SEZL',
                sector: 'FINTECH / BNPL',
                cap: 'SMALL CAP',
                region: 'US',
                rating: 'SELL',
                target: '$95.00',
                returnPct: '-53%',
                thesis: [
                    'BNPL structurally challenged in rising rate environment',
                    'Merchant fee compression accelerating as competition intensifies',
                    'Credit losses inflecting higher as consumer leverage peaks',
                    'Scale disadvantages vs. Affirm/Klarna insurmountable',
                    'Regulatory overhang creates multiple compression risk'
                ],
                catalysts: [
                    'CFPB regulatory action timeline',
                    'Credit loss ratio trends in subprime cohorts',
                    'Merchant retention rates amid fee pressure',
                    'Funding cost trajectory as rates stay higher'
                ],
                scenarios: { bear: '-70%', base: '-53%', bull: '-20%' }
            },
            'NASDAQ:RIVN': {
                name: 'RIVIAN',
                ticker: 'RIVN',
                sector: 'AUTOMOTIVE / EV',
                cap: 'MID CAP',
                region: 'US',
                rating: 'BUY',
                target: '$28.00',
                returnPct: '+110%',
                thesis: [
                    'Production inflection meets gross margin expansion',
                    'R2 platform economics superior to R1 at scale',
                    'Amazon EDV contract provides stable revenue floor',
                    'Technology differentiation is real and defensible',
                    'This is Tesla 2018, not Fisker 2023'
                ],
                catalysts: [
                    'Q1 production ramp and gross margin trajectory',
                    'R2 reservation conversion rates',
                    'VW partnership operational milestones',
                    'Cash runway extension through cost discipline'
                ],
                scenarios: { bear: '+25%', base: '+110%', bull: '+180%' }
            },
            'AMEX:KULR': {
                name: 'KULR TECHNOLOGY',
                ticker: 'KULR',
                sector: 'ENERGY STORAGE',
                cap: 'MICRO CAP',
                region: 'US',
                rating: 'SELL',
                target: '$0.80',
                returnPct: '-68%',
                thesis: [
                    'NASA validation does not equal commercial viability',
                    'Thermal management IP faces commoditization risk',
                    'OEMs developing in-house solutions erodes TAM',
                    'Customer concentration risk with limited pipeline',
                    'Cash burn trajectory unsustainable at current revenue'
                ],
                catalysts: [
                    'Contract renewal rates with key customers',
                    'Cash runway and dilution risk from raises',
                    'Competitive announcements from battery OEMs',
                    'NASA contract follow-on pipeline clarity'
                ],
                scenarios: { bear: '-85%', base: '-68%', bull: '-30%' }
            }
        };
        
        window.showCompanyDetail = function(symbol) {
            window.currentSymbol = symbol;
            const dashboard = document.getElementById('portfolio-dashboard');
            const detailView = document.getElementById('company-detail-view');
            const data = window.companyData[symbol];
            
            if(dashboard && detailView && data) {
                dashboard.classList.add('hidden');
                detailView.classList.remove('hidden');
                
                // Update Header
                document.getElementById('detail-company-name').innerText = data.name;
                document.getElementById('detail-ticker').innerText = '$' + data.ticker;
                document.getElementById('detail-sector').innerText = data.sector;
                document.getElementById('detail-cap').innerText = data.cap;
                
                // Update Rating Badge
                const ratingBadge = document.getElementById('detail-rating');
                ratingBadge.innerText = data.rating;
                ratingBadge.className = 'rating-badge ' + data.rating.toLowerCase();
                
                // Update Thesis with simple styling
                const thesisList = document.getElementById('detail-thesis-list');
                thesisList.innerHTML = data.thesis.map(t => `<li>${t}</li>`).join('');
                
                // Update Catalysts with simple styling
                const catalystList = document.getElementById('detail-catalyst-list');
                catalystList.innerHTML = data.catalysts.map(c => `<li>${c}</li>`).join('');
                
                // Update Scenarios
                document.getElementById('scenario-bear').innerText = data.scenarios.bear;
                document.getElementById('scenario-base').innerText = data.scenarios.base;
                document.getElementById('scenario-bull').innerText = data.scenarios.bull;
                
                // Color scenarios with enhanced classes
                const bearEl = document.getElementById('scenario-bear');
                const baseEl = document.getElementById('scenario-base');
                const bullEl = document.getElementById('scenario-bull');
                
                bearEl.className = 'text-white font-display font-bold text-2xl';
                baseEl.className = 'text-white font-display font-bold text-2xl';
                bullEl.className = 'text-white font-display font-bold text-2xl';
                
                // Initialize Widgets
                window.initTradingViewWidgets(symbol);
                
                // Default Tab
                window.switchTab('overview');
                
                // Re-init Lucide icons
                if(typeof lucide !== 'undefined') {
                    lucide.createIcons();
                }
            }
        };

        window.hideCompanyDetail = function() {
            const dashboard = document.getElementById('portfolio-dashboard');
            const detailView = document.getElementById('company-detail-view');
            
            if(dashboard && detailView) {
                detailView.classList.add('hidden');
                dashboard.classList.remove('hidden');
            }
        };

        window.switchTab = function(tabId) {
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
                if(btn.dataset.tab === tabId) btn.classList.add('active');
            });
            
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
                if(content.id === 'tab-' + tabId) content.classList.add('active');
            });
        };

        window.createWidget = function(containerId, config, scriptSrc) {
            const container = document.getElementById(containerId);
            if(!container) return;
            
            // Clear existing content
            container.innerHTML = ''; 
            
            // Create widget container
            const widgetDiv = document.createElement('div');
            widgetDiv.className = 'tradingview-widget-container';
            widgetDiv.style.height = '100%';
            widgetDiv.style.width = '100%';
            
            const innerDiv = document.createElement('div');
            innerDiv.className = 'tradingview-widget-container__widget';
            innerDiv.style.height = '100%';
            innerDiv.style.width = '100%';
            widgetDiv.appendChild(innerDiv);
            
            container.appendChild(widgetDiv);
            
            // Create and append script
            const script = document.createElement('script');
            script.type = 'text/javascript';
            script.src = scriptSrc;
            script.async = true;
            script.innerHTML = JSON.stringify(config);
            widgetDiv.appendChild(script);
        };

        window.initTradingViewWidgets = function(symbol) {
            // Small delay to ensure DOM is ready
            setTimeout(function() {
                // Overview Tab - Symbol Overview (Main Chart)
                window.createWidget('tv-overview-chart', {
                    "symbols": [[symbol]],
                    "chartOnly": false,
                    "width": "100%",
                    "height": "100%",
                    "locale": "en",
                    "colorTheme": "dark",
                    "autosize": true,
                    "showVolume": true,
                    "showMA": false,
                    "hideDateRanges": false,
                    "hideMarketStatus": false,
                    "hideSymbolLogo": false,
                    "scalePosition": "right",
                    "scaleMode": "Normal",
                    "fontFamily": "Inter, sans-serif",
                    "fontSize": "10",
                    "noTimeScale": false,
                    "valuesTracking": "1",
                    "changeMode": "price-and-percent",
                    "chartType": "area",
                    "lineWidth": 2,
                    "lineType": 0,
                    "dateRanges": ["1d|1", "1m|30", "3m|60", "12m|1D", "60m|1W", "all|1M"]
                }, 'https://s3.tradingview.com/external-embedding/embed-widget-symbol-overview.js');

                // Symbol Info (Quote Ticker)
                window.createWidget('tv-symbol-info', {
                    "symbol": symbol,
                    "width": "100%",
                    "locale": "en",
                    "colorTheme": "dark",
                    "isTransparent": true
                }, 'https://s3.tradingview.com/external-embedding/embed-widget-symbol-info.js');

                // Company Profile
                window.createWidget('tv-company-profile', {
                    "symbol": symbol,
                    "width": "100%",
                    "height": "100%",
                    "colorTheme": "dark",
                    "isTransparent": true,
                    "locale": "en"
                }, 'https://s3.tradingview.com/external-embedding/embed-widget-symbol-profile.js');

                // Financials Tab
                window.createWidget('tv-financials', {
                    "symbol": symbol,
                    "colorTheme": "dark",
                    "isTransparent": true,
                    "largeChartUrl": "",
                    "displayMode": "regular",
                    "width": "100%",
                    "height": "100%",
                    "locale": "en"
                }, 'https://s3.tradingview.com/external-embedding/embed-widget-financials.js');

                // Technicals Tab - Technical Analysis
                window.createWidget('tv-technicals', {
                    "interval": "1D",
                    "width": "100%",
                    "isTransparent": true,
                    "height": "100%",
                    "symbol": symbol,
                    "showIntervalTabs": true,
                    "displayMode": "single",
                    "locale": "en",
                    "colorTheme": "dark"
                }, 'https://s3.tradingview.com/external-embedding/embed-widget-technical-analysis.js');

                // Mini Chart / Advanced Chart
                window.createWidget('tv-mini-chart', {
                    "symbol": symbol,
                    "width": "100%",
                    "height": "100%",
                    "locale": "en",
                    "dateRange": "12M",
                    "colorTheme": "dark",
                    "isTransparent": true,
                    "autosize": true,
                    "largeChartUrl": ""
                }, 'https://s3.tradingview.com/external-embedding/embed-widget-mini-symbol-overview.js');

                // News Tab - Timeline
                window.createWidget('tv-news', {
                    "feedMode": "symbol",
                    "symbol": symbol,
                    "colorTheme": "dark",
                    "isTransparent": true,
                    "displayMode": "regular",
                    "width": "100%",
                    "height": "100%",
                    "locale": "en"
                }, 'https://s3.tradingview.com/external-embedding/embed-widget-timeline.js');

                // Economic Calendar
                window.createWidget('tv-calendar', {
                    "colorTheme": "dark",
                    "isTransparent": true,
                    "width": "100%",
                    "height": "100%",
                    "locale": "en",
                    "importanceFilter": "-1,0,1"
                }, 'https://s3.tradingview.com/external-embedding/embed-widget-events.js');

                // Peers Tab - Screener
                window.createWidget('tv-screener', {
                    "width": "100%",
                    "height": "100%",
                    "defaultColumn": "overview",
                    "defaultScreen": "general",
                    "market": "america",
                    "showToolbar": true,
                    "colorTheme": "dark",
                    "locale": "en",
                    "isTransparent": true
                }, 'https://s3.tradingview.com/external-embedding/embed-widget-screener.js');
                
                // Market Overview
                window.createWidget('tv-market', {
                    "colorTheme": "dark",
                    "dateRange": "12M",
                    "showChart": true,
                    "locale": "en",
                    "width": "100%",
                    "height": "100%",
                    "largeChartUrl": "",
                    "isTransparent": true,
                    "showSymbolLogo": true,
                    "showFloatingTooltip": false,
                    "plotLineColorGrowing": "rgba(41, 98, 255, 1)",
                    "plotLineColorFalling": "rgba(41, 98, 255, 1)",
                    "gridLineColor": "rgba(42, 46, 57, 0)",
                    "scaleFontColor": "rgba(134, 137, 147, 1)",
                    "belowLineFillColorGrowing": "rgba(41, 98, 255, 0.12)",
                    "belowLineFillColorFalling": "rgba(41, 98, 255, 0.12)",
                    "belowLineFillColorGrowingBottom": "rgba(41, 98, 255, 0)",
                    "belowLineFillColorFallingBottom": "rgba(41, 98, 255, 0)",
                    "symbolActiveColor": "rgba(41, 98, 255, 0.12)"
                }, 'https://s3.tradingview.com/external-embedding/embed-widget-market-overview.js');
            }, 100);
        };

        const projectData = {
            bittensor: {
                title: "BITTENSOR STARTUP",
                subtitle: "Co-Founder & Tech Lead",
                tags: ["Bittensor", "Python", "AI Architecture", "Revenue: $80k"],
                description: "A VC-backed experiment in decentralized AI. We built a Bittensor-based project that generated $80k in revenue before strategic pivot. This wasn't just code-it was an exercise in market timing, rapid scaling, and knowing when to change direction.",
                details: `
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mt-8">
                        <div>
                            <h4 class="text-xs font-mono text-neutral-400 uppercase tracking-widest mb-4">The Objective</h4>
                            <p class="text-sm text-neutral-300 leading-relaxed">
                                Leverage the Bittensor network to create a decentralized compute marketplace. We aimed to lower the barrier to entry for AI model training by aggregating idle GPU power.
                            </p>
                        </div>
                        <div>
                            <h4 class="text-xs font-mono text-neutral-400 uppercase tracking-widest mb-4">The Reality</h4>
                            <p class="text-sm text-neutral-300 leading-relaxed">
                                While revenue was high ($80k), network volatility and liquidity constraints created significant friction. We secured a $10K seed grant from DormDAO, but unit economics ultimately required a strategic pivot.
                            </p>
                        </div>
                    </div>
                    
                    <!-- Unit Economics Graph -->
                    <div class="mt-12 p-6 border border-white/10 bg-black/20">
                        <h4 class="text-xs font-mono text-neutral-400 uppercase tracking-widest mb-6">The Liquidity Trap (Unit Economics)</h4>
                        <div class="relative w-full h-64">
                            <!-- Graph Container -->
                            <svg viewBox="0 0 800 300" class="w-full h-full overflow-visible">
                                <!-- Grid Lines -->
                                <line x1="0" y1="250" x2="800" y2="250" stroke="#333" stroke-width="1" />
                                <line x1="0" y1="150" x2="800" y2="150" stroke="#333" stroke-width="1" stroke-dasharray="4" />
                                <line x1="0" y1="50" x2="800" y2="50" stroke="#333" stroke-width="1" stroke-dasharray="4" />
                                
                                <!-- Revenue Line (Solid White) -->
                                <path d="M0,250 C200,240 400,100 800,20" fill="none" stroke="#EAEAEA" stroke-width="2" />
                                <text x="750" y="15" fill="#EAEAEA" font-family="monospace" font-size="10">REVENUE</text>
                                
                                <!-- Cost Line (Dashed Grey - Exponential) -->
                                <path d="M0,255 C300,250 500,200 800,0" fill="none" stroke="#666" stroke-width="2" stroke-dasharray="5,5" />
                                <text x="750" y="290" fill="#666" font-family="monospace" font-size="10">COST</text>
                                
                                <!-- Intersection Point -->
                                <circle cx="620" cy="80" r="4" fill="#ff3333" />
                                <text x="630" y="80" fill="#ff3333" font-family="monospace" font-size="10">CROSSOVER (FAILURE)</text>
                            </svg>
                        </div>
                        <p class="text-xs font-mono text-neutral-400 mt-4 text-center">FIG 1.1: REVENUE VS. LIQUIDITY COST</p>
                    </div>

                    <div class="mt-8 pt-8 border-t border-white/10">
                        <h4 class="text-xs font-mono text-neutral-400 uppercase tracking-widest mb-4">Tech Stack</h4>
                        <div class="flex flex-wrap gap-3">
                            <span class="px-3 py-1 border border-white/20 rounded-full text-xs">Python</span>
                            <span class="px-3 py-1 border border-white/20 rounded-full text-xs">Rust</span>
                            <span class="px-3 py-1 border border-white/20 rounded-full text-xs">TensorFlow</span>
                            <span class="px-3 py-1 border border-white/20 rounded-full text-xs">PostgreSQL</span>
                        </div>
                    </div>
                `
            },
            payroll: {
                title: "CHAIN PAYROLL",
                subtitle: "1st Place Hackathon Winner",
                tags: ["Solidity", "React", "Web3", "DeFi"],
                description: "A decentralized payroll prototype solving the 'streaming money' problem. Led a 3-person team to ship a working live demo, outcompeting 12 teams to win grand prize. Real-time compensation meets smart contract automation.",
                details: `
                     <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mt-8">
                        <div>
                            <h4 class="text-xs font-mono text-neutral-400 uppercase tracking-widest mb-4">The Objective</h4>
                            <p class="text-sm text-neutral-300 leading-relaxed">
                                Traditional payroll is slow and batched. We wanted to create a 'money stream' where employees are paid by the second, leveraging smart contracts for automated tax withholding and treasury management.
                            </p>
                        </div>
                        <div>
                            <h4 class="text-xs font-mono text-neutral-400 uppercase tracking-widest mb-4">The Reality</h4>
                            <p class="text-sm text-neutral-300 leading-relaxed">
                                The biggest challenge wasn't the Solidity code-it was the off-chain to on-chain bridge for compliance. We built a risk framework demonstrating real-world applicability, winning the $2.5K grand prize.
                            </p>
                        </div>
                    </div>

                    <!-- Code Terminal -->
                    <div class="mt-12 border border-white/10 bg-[#050505] font-mono text-xs rounded overflow-hidden">
                        <div class="flex items-center gap-2 px-4 py-2 border-b border-white/10 bg-[#0A0A0A]">
                            <div class="w-2 h-2 rounded-full bg-red-500"></div>
                            <div class="w-2 h-2 rounded-full bg-white/30"></div>
                            <div class="w-2 h-2 rounded-full bg-white/30"></div>
                            <span class="ml-2 text-neutral-500">PayrollStream.sol</span>
                        </div>
                        <div class="p-6 overflow-x-auto">
<pre><code class="language-solidity text-neutral-400">
<span class="text-purple-400">function</span> <span class="text-blue-400">streamSalary</span>(<span class="text-orange-400">address</span> employee) <span class="text-purple-400">external nonReentrant</span> {
    Stream <span class="text-purple-400">storage</span> s = streams[employee];
    <span class="text-purple-400">require</span>(s.isActive, <span class="text-green-400">"Stream inactive"</span>);

    <span class="text-gray-500">// Calculate flow based on block timestamp</span>
    <span class="text-orange-400">uint256</span> timeElapsed = <span class="text-yellow-400">block.timestamp</span> - s.lastWithdrawal;
    <span class="text-orange-400">uint256</span> amount = timeElapsed * s.ratePerSecond;

    <span class="text-purple-400">require</span>(address(<span class="text-blue-400">this</span>).balance >= amount, <span class="text-green-400">"Insufficient liquidity"</span>);

    s.lastWithdrawal = <span class="text-yellow-400">block.timestamp</span>;
    <span class="text-purple-400">payable</span>(employee).<span class="text-blue-400">transfer</span>(amount);

    <span class="text-purple-400">emit</span> SalaryStreamed(employee, amount, <span class="text-yellow-400">block.timestamp</span>);
}
</code></pre>
                        </div>
                    </div>

                    <div class="mt-8 pt-8 border-t border-white/10">
                         <h4 class="text-xs font-mono text-neutral-400 uppercase tracking-widest mb-4">Tech Stack</h4>
                         <div class="flex flex-wrap gap-3">
                            <span class="px-3 py-1 border border-white/20 rounded-full text-xs">Solidity</span>
                            <span class="px-3 py-1 border border-white/20 rounded-full text-xs">Hardhat</span>
                            <span class="px-3 py-1 border border-white/20 rounded-full text-xs">React.js</span>
                            <span class="px-3 py-1 border border-white/20 rounded-full text-xs">Ethers.js</span>
                        </div>
                    </div>
                `
            },
            point72: {
                title: "FINANCIAL ANALYSIS PORTFOLIO",
                subtitle: "Multi-Sector Equity Research & Valuation",
                tags: ["Equity Research", "DCF Modeling", "Sector Analysis", "Valuation"],
                description: "Deep-dive analysis across consumer, fintech, automotive, and energy storage sectors. Four distinct companies, four unique investment narratives-each backed by rigorous financial modeling, competitive positioning analysis, and thesis-driven valuation frameworks.",
                details: `
                    <div id="portfolio-dashboard">
                        <!-- Hero Statement -->
                        <div class="mb-12 pb-6 border-b border-white/10">
                            <p class="font-display text-xl md:text-2xl leading-relaxed text-neutral-300">
                                Four companies. Four narratives. Each backed by rigorous DCF modeling, competitive positioning analysis, and thesis-driven valuation frameworks that reveal where consensus gets it wrong.
                            </p>
                        </div>
                        
                        <!-- Methodology Section -->
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div class="p-8 border border-white/10 bg-charcoal">
                                <div class="mb-4">
                                    <span class="font-mono text-xs text-neutral-500">[01]</span>
                                </div>
                                <h4 class="text-lg md:text-xl font-display font-medium mb-4">The Approach</h4>
                                <p class="text-sm text-neutral-300 leading-relaxed">
                                    Each analysis follows the same systematic framework: Industry structure assessment  Competitive moat analysis  Financial modeling (DCF, Comps, Precedent Transactions)  Sensitivity analysis  Investment recommendation.
                                </p>
                            </div>
                            <div class="p-8 border border-white/10 bg-charcoal">
                                <div class="mb-4">
                                    <span class="font-mono text-xs text-neutral-500">[02]</span>
                                </div>
                                <h4 class="text-lg md:text-xl font-display font-medium mb-4">The Philosophy</h4>
                                <p class="text-sm text-neutral-300 leading-relaxed">
                                    Markets price in consensus. Alpha comes from divergencefinding mispriced narratives, overlooked inflection points, and structural advantages the Street hasn't modeled.
                                </p>
                            </div>
                        </div>
                        
                        <!-- Portfolio Summary Stats -->
                        <div class="mt-12 grid grid-cols-2 md:grid-cols-4 gap-px bg-white/10">
                            <div class="p-6 bg-charcoal hover:bg-[#0F0F0F] transition-all">
                                <div class="text-[10px] font-mono text-neutral-600 uppercase tracking-widest mb-3">Coverage</div>
                                <div class="text-4xl font-display font-bold mb-1">4</div>
                                <div class="text-xs text-neutral-500">Names</div>
                            </div>
                            <div class="p-6 bg-charcoal hover:bg-[#0F0F0F] transition-all">
                                <div class="text-[10px] font-mono text-neutral-600 uppercase tracking-widest mb-3">Long</div>
                                <div class="text-4xl font-display font-bold mb-1">1</div>
                                <div class="text-xs text-neutral-500">RIVN</div>
                            </div>
                            <div class="p-6 bg-charcoal hover:bg-[#0F0F0F] transition-all">
                                <div class="text-[10px] font-mono text-neutral-600 uppercase tracking-widest mb-3">Short</div>
                                <div class="text-4xl font-display font-bold mb-1">3</div>
                                <div class="text-xs text-neutral-500">SG, SEZL, KULR</div>
                            </div>
                            <div class="p-6 bg-charcoal hover:bg-[#0F0F0F] transition-all">
                                <div class="text-[10px] font-mono text-neutral-600 uppercase tracking-widest mb-3">Sectors</div>
                                <div class="text-4xl font-display font-bold mb-1">4</div>
                                <div class="text-xs text-neutral-500">Diversified</div>
                            </div>
                        </div>
                    
                        <!-- Portfolio Overview Chart -->
                        <div class="mt-12 p-8 border border-white/10 bg-[#0A0A0A]">
                            <div class="flex justify-between items-center mb-8">
                                <h4 class="text-xs font-mono text-neutral-400 uppercase tracking-widest">Risk-Reward Matrix</h4>
                                <span class="text-xs font-mono text-neutral-600">CONVICTION VS. RETURN POTENTIAL</span>
                            </div>
                            <div class="relative w-full h-64 md:h-80">
                                <svg viewBox="0 0 800 320" class="w-full h-full" preserveAspectRatio="xMidYMid meet">
                                    <!-- Axis Lines -->
                                    <line x1="400" y1="20" x2="400" y2="300" stroke="#333" stroke-width="1" />
                                    <line x1="50" y1="160" x2="750" y2="160" stroke="#333" stroke-width="1" />
                                    
                                    <!-- Quadrant Labels -->
                                    <text x="200" y="45" fill="#666" font-family="Inter, sans-serif" font-size="10" text-anchor="middle" letter-spacing="0.1em">SHORT</text>
                                    <text x="600" y="45" fill="#666" font-family="Inter, sans-serif" font-size="10" text-anchor="middle" letter-spacing="0.1em">LONG</text>
                                    
                                    <!-- Axis Labels -->
                                    <text x="60" y="165" fill="#666" font-family="Inter, sans-serif" font-size="9" text-anchor="start">DOWNSIDE</text>
                                    <text x="740" y="165" fill="#666" font-family="Inter, sans-serif" font-size="9" text-anchor="end">UPSIDE</text>
                                    
                                    <!-- Data Points - Monochrome -->
                                    <!-- KULR -->
                                    <circle cx="120" cy="90" r="20" fill="none" stroke="#888" stroke-width="2" />
                                    <circle cx="120" cy="90" r="6" fill="#888" />
                                    <text x="120" y="125" fill="#EAEAEA" font-family="Space Grotesk, sans-serif" font-size="12" font-weight="500" text-anchor="middle">KULR</text>
                                    <text x="120" y="142" fill="#888" font-family="Inter, sans-serif" font-size="10" text-anchor="middle">-68%</text>
                                    
                                    <!-- SEZL -->
                                    <circle cx="200" cy="110" r="16" fill="none" stroke="#999" stroke-width="2" />
                                    <circle cx="200" cy="110" r="5" fill="#999" />
                                    <text x="200" y="145" fill="#EAEAEA" font-family="Space Grotesk, sans-serif" font-size="12" font-weight="500" text-anchor="middle">SEZL</text>
                                    <text x="200" y="162" fill="#999" font-family="Inter, sans-serif" font-size="10" text-anchor="middle">-53%</text>
                                    
                                    <!-- SG -->
                                    <circle cx="280" cy="130" r="14" fill="none" stroke="#AAA" stroke-width="2" />
                                    <circle cx="280" cy="130" r="4" fill="#AAA" />
                                    <text x="280" y="165" fill="#EAEAEA" font-family="Space Grotesk, sans-serif" font-size="12" font-weight="500" text-anchor="middle">SG</text>
                                    <text x="280" y="182" fill="#AAA" font-family="Inter, sans-serif" font-size="10" text-anchor="middle">-48%</text>
                                    
                                    <!-- RIVN -->
                                    <circle cx="680" cy="70" r="24" fill="none" stroke="#BBB" stroke-width="2" />
                                    <circle cx="680" cy="70" r="8" fill="#BBB" />
                                    <text x="680" y="110" fill="#EAEAEA" font-family="Space Grotesk, sans-serif" font-size="12" font-weight="500" text-anchor="middle">RIVN</text>
                                    <text x="680" y="127" fill="#BBB" font-family="Inter, sans-serif" font-size="10" text-anchor="middle">+110%</text>
                                </svg>
                            </div>
                            <p class="text-[10px] font-mono text-neutral-600 mt-6 text-center uppercase tracking-widest">BUBBLE SIZE = CONVICTION LEVEL</p>
                        </div>

                        <!-- Stock Cards Grid -->
                        <div class="mt-12">
                            <div class="flex justify-between items-end mb-6 pb-4 border-b border-white/10">
                                <h3 class="font-display text-2xl md:text-3xl font-medium">Coverage Universe</h3>
                                <span class="text-xs font-mono text-neutral-500 uppercase tracking-widest">4 NAMES</span>
                            </div>
                            
                            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                                <!-- Sweetgreen Card -->
                                <div class="stock-card sell cursor-pointer group" onclick="showCompanyDetail('NYSE:SG')">
                                    <div class="p-8">
                                        <div class="flex justify-between items-start mb-6">
                                            <div>
                                                <div class="flex items-center gap-2 mb-2">
                                                    <span class="font-mono text-xs text-neutral-600">$SG</span>
                                                    <span class="text-neutral-700"></span>
                                                    <span class="text-xs text-neutral-600 uppercase tracking-wider">NYSE</span>
                                                </div>
                                                <h4 class="font-display text-2xl md:text-3xl font-medium mb-1">Sweetgreen</h4>
                                                <div class="text-xs text-neutral-500 uppercase tracking-wider">Restaurants</div>
                                            </div>
                                            <span class="rating-badge sell">SELL</span>
                                        </div>
                                        <p class="text-sm text-neutral-400 leading-relaxed mb-8">
                                            Infinite Kitchen narrative masks structural unit economics challenges. Tech premium on capital-intensive restaurant model.
                                        </p>
                                        <div class="grid grid-cols-3 gap-px bg-white/10">
                                            <div class="bg-[#0A0A0A] p-4">
                                                <div class="text-[10px] font-mono text-neutral-600 uppercase tracking-widest mb-2">Target</div>
                                                <div class="text-2xl font-display font-bold">$18</div>
                                            </div>
                                            <div class="bg-[#0A0A0A] p-4">
                                                <div class="text-[10px] font-mono text-neutral-600 uppercase tracking-widest mb-2">Return</div>
                                                <div class="text-2xl font-display font-bold">-48%</div>
                                            </div>
                                            <div class="bg-[#0A0A0A] p-4">
                                                <div class="text-[10px] font-mono text-neutral-600 uppercase tracking-widest mb-2">Risk</div>
                                                <div class="text-xs text-neutral-300 mt-2">Unit Econ</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Sezzle Card -->
                                <div class="stock-card sell cursor-pointer group" onclick="showCompanyDetail('NASDAQ:SEZL')">
                                    <div class="p-8">
                                        <div class="flex justify-between items-start mb-6">
                                            <div>
                                                <div class="flex items-center gap-2 mb-2">
                                                    <span class="font-mono text-xs text-neutral-600">$SEZL</span>
                                                    <span class="text-neutral-700"></span>
                                                    <span class="text-xs text-neutral-600 uppercase tracking-wider">NASDAQ</span>
                                                </div>
                                                <h4 class="font-display text-2xl md:text-3xl font-medium mb-1">Sezzle</h4>
                                                <div class="text-xs text-neutral-500 uppercase tracking-wider">Fintech / BNPL</div>
                                            </div>
                                            <span class="rating-badge sell">SELL</span>
                                        </div>
                                        <p class="text-sm text-neutral-400 leading-relaxed mb-8">
                                            BNPL structurally challenged in rising rate environment. Scale disadvantages vs. Affirm/Klarna insurmountable.
                                        </p>
                                        <div class="grid grid-cols-3 gap-px bg-white/10">
                                            <div class="bg-[#0A0A0A] p-4">
                                                <div class="text-[10px] font-mono text-neutral-600 uppercase tracking-widest mb-2">Target</div>
                                                <div class="text-2xl font-display font-bold">$95</div>
                                            </div>
                                            <div class="bg-[#0A0A0A] p-4">
                                                <div class="text-[10px] font-mono text-neutral-600 uppercase tracking-widest mb-2">Return</div>
                                                <div class="text-2xl font-display font-bold">-53%</div>
                                            </div>
                                            <div class="bg-[#0A0A0A] p-4">
                                                <div class="text-[10px] font-mono text-neutral-600 uppercase tracking-widest mb-2">Risk</div>
                                                <div class="text-xs text-neutral-300 mt-2">Competition</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                                <div class="metric-label">Key Risk</div>
                                                <div class="text-xs text-neutral-300 mt-1">Credit Loss</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Rivian Card -->
                                <div class="stock-card buy cursor-pointer group" onclick="showCompanyDetail('NASDAQ:RIVN')">
                                    <div class="p-8">
                                        <div class="flex justify-between items-start mb-6">
                                            <div>
                                                <div class="flex items-center gap-2 mb-2">
                                                    <span class="font-mono text-xs text-neutral-600">$RIVN</span>
                                                    <span class="text-neutral-700"></span>
                                                    <span class="text-xs text-neutral-600 uppercase tracking-wider">NASDAQ</span>
                                                </div>
                                                <h4 class="font-display text-2xl md:text-3xl font-medium mb-1">Rivian</h4>
                                                <div class="text-xs text-neutral-500 uppercase tracking-wider">Automotive / EV</div>
                                            </div>
                                            <span class="rating-badge buy">BUY</span>
                                        </div>
                                        <p class="text-sm text-neutral-400 leading-relaxed mb-8">
                                            Production inflection meets gross margin expansion. Technology differentiation is realthis is Tesla 2018.
                                        </p>
                                        <div class="grid grid-cols-3 gap-px bg-white/10">
                                            <div class="bg-[#0A0A0A] p-4">
                                                <div class="text-[10px] font-mono text-neutral-600 uppercase tracking-widest mb-2">Target</div>
                                                <div class="text-2xl font-display font-bold">$28</div>
                                            </div>
                                            <div class="bg-[#0A0A0A] p-4">
                                                <div class="text-[10px] font-mono text-neutral-600 uppercase tracking-widest mb-2">Return</div>
                                                <div class="text-2xl font-display font-bold">+110%</div>
                                            </div>
                                            <div class="bg-[#0A0A0A] p-4">
                                                <div class="text-[10px] font-mono text-neutral-600 uppercase tracking-widest mb-2">Driver</div>
                                                <div class="text-xs text-neutral-300 mt-2">GM Expansion</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- KULR Card -->
                                <div class="stock-card sell cursor-pointer group" onclick="showCompanyDetail('AMEX:KULR')">
                                    <div class="p-8">
                                        <div class="flex justify-between items-start mb-6">
                                            <div>
                                                <div class="flex items-center gap-2 mb-2">
                                                    <span class="font-mono text-xs text-neutral-600">$KULR</span>
                                                    <span class="text-neutral-700"></span>
                                                    <span class="text-xs text-neutral-600 uppercase tracking-wider">AMEX</span>
                                                </div>
                                                <h4 class="font-display text-2xl md:text-3xl font-medium mb-1">KULR Technology</h4>
                                                <div class="text-xs text-neutral-500 uppercase tracking-wider">Energy Storage</div>
                                            </div>
                                            <span class="rating-badge sell">SELL</span>
                                        </div>
                                        <p class="text-sm text-neutral-400 leading-relaxed mb-8">
                                            NASA validation doesn't equal commercial viability. Thermal management IP faces commoditization risk.
                                        </p>
                                        <div class="grid grid-cols-3 gap-px bg-white/10">
                                            <div class="bg-[#0A0A0A] p-4">
                                                <div class="text-[10px] font-mono text-neutral-600 uppercase tracking-widest mb-2">Target</div>
                                                <div class="text-2xl font-display font-bold">$0.80</div>
                                            </div>
                                            <div class="bg-[#0A0A0A] p-4">
                                                <div class="text-[10px] font-mono text-neutral-600 uppercase tracking-widest mb-2">Return</div>
                                                <div class="text-2xl font-display font-bold">-68%</div>
                                            </div>
                                            <div class="bg-[#0A0A0A] p-4">
                                                <div class="text-[10px] font-mono text-neutral-600 uppercase tracking-widest mb-2">Risk</div>
                                                <div class="text-xs text-neutral-300 mt-2">TAM Reality</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                            </div>
                                            <div class="metric-block">
                                                <div class="metric-label">Key Risk</div>
                                                <div class="text-xs text-neutral-300 mt-1">TAM Reality</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Framework Section -->
                        <div class="mt-16 pt-12 border-t border-white/10">
                            <h4 class="text-xs font-mono text-neutral-500 uppercase tracking-widest mb-8">Analytical Framework</h4>
                            <div class="grid grid-cols-2 md:grid-cols-5 gap-px bg-white/10">
                                <div class="p-4 bg-charcoal hover:bg-[#0F0F0F] transition-all text-center">
                                    <span class="text-xs font-mono">DCF Valuation</span>
                                </div>
                                <div class="p-4 bg-charcoal hover:bg-[#0F0F0F] transition-all text-center">
                                    <span class="text-xs font-mono">Comp Analysis</span>
                                </div>
                                <div class="p-4 bg-charcoal hover:bg-[#0F0F0F] transition-all text-center">
                                    <span class="text-xs font-mono">Scenario Modeling</span>
                                </div>
                                <div class="p-4 bg-charcoal hover:bg-[#0F0F0F] transition-all text-center">
                                    <span class="text-xs font-mono">Unit Economics</span>
                                </div>
                                <div class="p-4 bg-charcoal hover:bg-[#0F0F0F] transition-all text-center">
                                    <span class="text-xs font-mono">Five Forces</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- COMPANY DETAIL VIEW -->
                    <div id="company-detail-view" class="portfolio-view hidden">
                        <button onclick="hideCompanyDetail()" class="mb-8 flex items-center gap-2 text-neutral-500 hover:text-white transition-colors group">
                            <i data-lucide="arrow-left" class="w-4 h-4 group-hover:-translate-x-1 transition-transform"></i>
                            <span class="text-xs font-mono uppercase tracking-wider">Back to Portfolio</span>
                        </button>
                        
                        <!-- Header Strip -->
                        <div class="flex flex-col md:flex-row justify-between items-start md:items-end gap-6 mb-8 pb-6 border-b border-white/10">
                            <div>
                                <div class="flex items-center gap-4 mb-3">
                                    <h2 class="font-display text-3xl md:text-4xl font-bold" id="detail-company-name">COMPANY</h2>
                                    <span class="rating-badge sell" id="detail-rating">SELL</span>
                                </div>
                                <div class="flex flex-wrap items-center gap-3 text-xs">
                                    <span class="font-mono text-neutral-300" id="detail-ticker">$SG</span>
                                    <span class="text-neutral-600"></span>
                                    <span class="px-2 py-1 bg-white/5 text-neutral-400" id="detail-sector">RESTAURANTS</span>
                                    <span class="px-2 py-1 bg-white/5 text-neutral-400" id="detail-cap">SMID CAP</span>
                                </div>
                            </div>
                            <div class="flex items-center gap-3">
                                <span class="font-mono text-xs text-neutral-500 uppercase tracking-wider">LIVE DATA VIA TRADINGVIEW</span>
                            </div>
                        </div>

                        <!-- Tabs -->
                        <div class="tab-nav">
                            <button class="tab-btn active" data-tab="overview" onclick="switchTab('overview')">Overview</button>
                            <button class="tab-btn" data-tab="financials" onclick="switchTab('financials')">Financials</button>
                            <button class="tab-btn" data-tab="technicals" onclick="switchTab('technicals')">Technicals</button>
                            <button class="tab-btn" data-tab="news" onclick="switchTab('news')">News & Events</button>
                            <button class="tab-btn" data-tab="peers" onclick="switchTab('peers')">Peers</button>
                        </div>

                        <!-- Tab Content: Overview -->
                        <div id="tab-overview" class="tab-content active">
                            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
                                <!-- Main Chart -->
                                <div class="lg:col-span-2">
                                    <div class="widget-wrapper h-[420px]">
                                        <div class="widget-header">Symbol Overview</div>
                                        <div class="widget-body h-[380px]" id="tv-overview-chart"></div>
                                    </div>
                                </div>
                                <!-- Side Stack -->
                                <div class="space-y-4">
                                    <div class="widget-wrapper h-[120px]">
                                        <div class="widget-header">Quote</div>
                                        <div class="widget-body h-[80px]" id="tv-symbol-info"></div>
                                    </div>
                                    <div class="widget-wrapper h-[280px]">
                                        <div class="widget-header">Company Profile</div>
                                        <div class="widget-body h-[240px] overflow-auto" id="tv-company-profile"></div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Research Panel -->
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div class="p-6 border border-white/10 bg-charcoal">
                                    <h4 class="font-mono text-xs text-neutral-500 uppercase tracking-wider mb-4">Variant View & Thesis</h4>
                                    <ul class="space-y-3 text-sm text-neutral-300" id="detail-thesis-list">
                                        <li>Loading...</li>
                                    </ul>
                                </div>
                                <div class="p-6 border border-white/10 bg-charcoal">
                                    <h4 class="font-mono text-xs text-neutral-500 uppercase tracking-wider mb-4">Key Catalysts</h4>
                                    <ul class="space-y-3 text-sm text-neutral-300" id="detail-catalyst-list">
                                        <li>Loading...</li>
                                    </ul>
                                </div>
                            </div>
                            
                            <!-- Valuation Scenarios -->
                            <div class="mt-6 p-8 border border-white/10 bg-charcoal">
                                <h4 class="font-mono text-xs text-neutral-500 uppercase tracking-wider mb-6">DCF Scenario Analysis</h4>
                                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                    <div class="p-6 border border-white/10 bg-[#0A0A0A] hover:border-white/20 transition-all">
                                        <div class="text-xs text-neutral-500 mb-2 uppercase tracking-wider font-mono">Bear Case</div>
                                        <div id="scenario-bear" class="text-white font-display font-bold text-2xl mb-1">-30%</div>
                                        <div class="text-[10px] text-neutral-600 font-mono">30% Probability</div>
                                    </div>
                                    <div class="p-6 border-2 border-white/20 bg-[#0A0A0A] hover:border-white/30 transition-all">
                                        <div class="text-xs text-neutral-400 mb-2 uppercase tracking-wider font-mono">Base Case</div>
                                        <div id="scenario-base" class="text-white font-display font-bold text-2xl mb-1">+15%</div>
                                        <div class="text-[10px] text-neutral-600 font-mono">50% Probability</div>
                                    </div>
                                    <div class="p-6 border border-white/10 bg-[#0A0A0A] hover:border-white/20 transition-all">
                                        <div class="text-xs text-neutral-500 mb-2 uppercase tracking-wider font-mono">Bull Case</div>
                                        <div id="scenario-bull" class="text-white font-display font-bold text-2xl mb-1">+45%</div>
                                        <div class="text-[10px] text-neutral-600 font-mono">20% Probability</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Tab Content: Financials -->
                        <div id="tab-financials" class="tab-content">
                            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                                <div class="widget-wrapper h-[550px]">
                                    <div class="widget-header">Financial Data</div>
                                    <div class="widget-body h-[510px]" id="tv-financials"></div>
                                </div>
                                <div class="space-y-6">
                                    <div class="p-6 border border-white/10 bg-charcoal">
                                        <h4 class="font-mono text-xs text-neutral-500 uppercase tracking-wider mb-6">Model vs Consensus</h4>
                                        <div class="space-y-4">
                                            <div class="p-4 border border-white/10 bg-[#0A0A0A]">
                                                <div class="flex justify-between mb-2">
                                                    <span class="text-sm text-neutral-300">Revenue CAGR (5y)</span>
                                                    <span class="text-xs text-neutral-500 font-mono">vs Consensus</span>
                                                </div>
                                                <div class="flex justify-between items-end">
                                                    <div class="text-2xl font-display font-bold">12.5%</div>
                                                    <div class="text-xs text-neutral-600">Cons: 9.8%</div>
                                                </div>
                                            </div>
                                            <div class="p-4 border border-white/10 bg-[#0A0A0A]">
                                                <div class="flex justify-between mb-2">
                                                    <span class="text-sm text-neutral-300">EBITDA Margin</span>
                                                    <span class="text-xs text-neutral-500 font-mono">vs Consensus</span>
                                                </div>
                                                <div class="flex justify-between items-end">
                                                    <div class="text-2xl font-display font-bold">18.2%</div>
                                                    <div class="text-xs text-neutral-600">Cons: 21.0%</div>
                                                </div>
                                            </div>
                                            <div class="p-4 border border-white/10 bg-[#0A0A0A]">
                                                <div class="flex justify-between mb-2">
                                                    <span class="text-sm text-neutral-300">Discount Rate (WACC)</span>
                                                    <span class="text-xs text-neutral-500 font-mono">Market Range</span>
                                                </div>
                                                <div class="flex justify-between items-end">
                                                    <div class="text-2xl font-display font-bold">11.5%</div>
                                                    <div class="text-xs text-neutral-600">Range: 10-13%</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Tab Content: Technicals -->
                        <div id="tab-technicals" class="tab-content">
                            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                                <div class="widget-wrapper h-[450px]">
                                    <div class="widget-header">Technical Analysis</div>
                                    <div class="widget-body h-[410px]" id="tv-technicals"></div>
                                </div>
                                <div class="lg:col-span-2 widget-wrapper h-[450px]">
                                    <div class="widget-header">Advanced Chart</div>
                                    <div class="widget-body h-[410px]" id="tv-mini-chart"></div>
                                </div>
                            </div>
                            <div class="mt-6 p-6 border border-white/10 bg-charcoal">
                                <h4 class="font-mono text-xs text-neutral-500 uppercase tracking-wider mb-4">Tape vs Thesis</h4>
                                <p class="text-sm text-neutral-400 leading-relaxed">Technical signals should be weighted against fundamental thesis. Short-term momentum may diverge from long-term value realization. Use technicals for entry timing, not thesis validation.</p>
                            </div>
                        </div>

                        <!-- Tab Content: News -->
                        <div id="tab-news" class="tab-content">
                            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                                <div class="widget-wrapper h-[550px]">
                                    <div class="widget-header">Latest News</div>
                                    <div class="widget-body h-[510px]" id="tv-news"></div>
                                </div>
                                <div class="widget-wrapper h-[550px]">
                                    <div class="widget-header">Economic Calendar</div>
                                    <div class="widget-body h-[510px]" id="tv-calendar"></div>
                                </div>
                            </div>
                        </div>

                        <!-- Tab Content: Peers -->
                        <div id="tab-peers" class="tab-content">
                            <div class="widget-wrapper h-[450px] mb-6">
                                <div class="widget-header">Peer Screener</div>
                                <div class="widget-body h-[410px]" id="tv-screener"></div>
                            </div>
                            <div class="widget-wrapper h-[350px]">
                                <div class="widget-header">Market Overview</div>
                                <div class="widget-body h-[310px]" id="tv-market"></div>
                            </div>
                        </div>
                    </div>
                `
            },
            taskformer: {
                title: "CONSULTING PRACTICE",
                subtitle: "Financial Strategy & Operational Excellence",
                tags: ["M&A Advisory", "Financial Modeling", "Strategic Planning", "Process Optimization"],
                description: "Transforming organizational complexity into competitive advantage. I partner with founders and investors to diagnose operational friction, quantify strategic opportunities, and architect decision frameworks that drive measurable ROI.",
                details: `
                    <!-- Value Proposition Grid -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mt-8">
                        <div>
                            <h4 class="text-xs font-mono text-neutral-400 uppercase tracking-widest mb-4">The Problem</h4>
                            <p class="text-sm text-neutral-300 leading-relaxed">
                                Most consultants deliver PowerPoint decks. I build decision frameworks you can actually use. Financial models that operators trust. Recommendations grounded in data, not theory.
                            </p>
                        </div>
                        <div>
                            <h4 class="text-xs font-mono text-neutral-400 uppercase tracking-widest mb-4">The Approach</h4>
                            <p class="text-sm text-neutral-300 leading-relaxed">
                                Forensic analysis  Strategic modeling  Executable roadmaps. Every engagement includes live financial models, scenario planning tools, and clear implementation timelines. No fluff.
                            </p>
                        </div>
                    </div>

                    <!-- Impact Metrics Dashboard -->
                    <div class="mt-12 p-8 border border-white/10 bg-[#0A0A0A]">
                        <h4 class="text-xs font-mono text-neutral-400 uppercase tracking-widest mb-8">Client Impact (2023-2024)</h4>
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-6">
                            <div class="text-center">
                                <div class="font-display text-4xl font-bold mb-2">$8M</div>
                                <div class="text-xs font-mono text-neutral-500 uppercase tracking-wider">Capital Saved</div>
                            </div>
                            <div class="text-center">
                                <div class="font-display text-4xl font-bold mb-2">+12%</div>
                                <div class="text-xs font-mono text-neutral-500 uppercase tracking-wider">Avg Margin Lift</div>
                            </div>
                            <div class="text-center">
                                <div class="font-display text-4xl font-bold mb-2">$2.3M</div>
                                <div class="text-xs font-mono text-neutral-500 uppercase tracking-wider">Annual Savings</div>
                            </div>
                            <div class="text-center">
                                <div class="font-display text-4xl font-bold mb-2">6 Wks</div>
                                <div class="text-xs font-mono text-neutral-500 uppercase tracking-wider">Avg Engagement</div>
                            </div>
                        </div>
                    </div>

                    <!-- Service Matrix -->
                    <div class="mt-12 grid grid-cols-1 md:grid-cols-3 gap-px bg-white/10">
                        <div class="bg-charcoal p-6 hover:bg-[#0A0A0A] transition-all duration-300">
                            <div class="mb-4">
                                <span class="font-mono text-xs text-neutral-500">[01]</span>
                            </div>
                            <h5 class="font-display text-xl font-medium mb-3">Financial Modeling</h5>
                            <p class="text-xs text-neutral-400 leading-relaxed mb-4">Build models investors trust. DCF, LBO, merger scenarios with sensitivity analysis.</p>
                            <div class="flex flex-wrap gap-2">
                                <span class="px-2 py-1 bg-white/5 text-[9px] font-mono uppercase text-neutral-500">DCF</span>
                                <span class="px-2 py-1 bg-white/5 text-[9px] font-mono uppercase text-neutral-500">LBO</span>
                                <span class="px-2 py-1 bg-white/5 text-[9px] font-mono uppercase text-neutral-500">Valuation</span>
                            </div>
                        </div>
                        <div class="bg-charcoal p-6 hover:bg-[#0A0A0A] transition-all duration-300">
                            <div class="mb-4">
                                <span class="font-mono text-xs text-neutral-500">[02]</span>
                            </div>
                            <h5 class="font-display text-xl font-medium mb-3">M&A Advisory</h5>
                            <p class="text-xs text-neutral-400 leading-relaxed mb-4">Independent due diligence. Deal structuring. Buy-side and sell-side advisory.</p>
                            <div class="flex flex-wrap gap-2">
                                <span class="px-2 py-1 bg-white/5 text-[9px] font-mono uppercase text-neutral-500">DD</span>
                                <span class="px-2 py-1 bg-white/5 text-[9px] font-mono uppercase text-neutral-500">Deals</span>
                                <span class="px-2 py-1 bg-white/5 text-[9px] font-mono uppercase text-neutral-500">Risk</span>
                            </div>
                        </div>
                        <div class="bg-charcoal p-6 hover:bg-[#0A0A0A] transition-all duration-300">
                            <div class="mb-4">
                                <span class="font-mono text-xs text-neutral-500">[03]</span>
                            </div>
                            <h5 class="font-display text-xl font-medium mb-3">Operational Strategy</h5>
                            <p class="text-xs text-neutral-400 leading-relaxed mb-4">Unit economics. Pricing strategy. Cost optimization. KPI frameworks.</p>
                            <div class="flex flex-wrap gap-2">
                                <span class="px-2 py-1 bg-white/5 text-[9px] font-mono uppercase text-neutral-500">Margins</span>
                                <span class="px-2 py-1 bg-white/5 text-[9px] font-mono uppercase text-neutral-500">KPIs</span>
                                <span class="px-2 py-1 bg-white/5 text-[9px] font-mono uppercase text-neutral-500">Scale</span>
                            </div>
                        </div>
                    </div>

                    <!-- Process Flow -->
                    <div class="mt-12 border border-white/10 bg-[#050505] overflow-hidden">
                        <div class="px-6 py-4 border-b border-white/10 bg-[#0A0A0A]">
                            <h4 class="text-xs font-mono text-neutral-400 uppercase tracking-widest">6-Week Engagement Framework</h4>
                        </div>
                        <div class="p-8">
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                                <div class="relative">
                                    <div class="absolute top-0 left-0 w-12 h-12 border-2 border-white/30 flex items-center justify-center font-mono text-xs">01</div>
                                    <div class="ml-16">
                                        <div class="font-mono text-xs text-neutral-500 mb-2">WEEK 1-2</div>
                                        <h5 class="font-display text-lg font-medium mb-3">Discovery</h5>
                                        <ul class="space-y-2 text-xs text-neutral-400">
                                            <li> Forensic financial audit</li>
                                            <li> Stakeholder interviews</li>
                                            <li> Data infrastructure review</li>
                                        </ul>
                                    </div>
                                </div>
                                <div class="relative">
                                    <div class="absolute top-0 left-0 w-12 h-12 border-2 border-white/30 flex items-center justify-center font-mono text-xs">02</div>
                                    <div class="ml-16">
                                        <div class="font-mono text-xs text-neutral-500 mb-2">WEEK 3-4</div>
                                        <h5 class="font-display text-lg font-medium mb-3">Analysis</h5>
                                        <ul class="space-y-2 text-xs text-neutral-400">
                                            <li> Financial model construction</li>
                                            <li> Scenario planning</li>
                                            <li> Competitive benchmarking</li>
                                        </ul>
                                    </div>
                                </div>
                                <div class="relative">
                                    <div class="absolute top-0 left-0 w-12 h-12 border-2 border-white flex items-center justify-center font-mono text-xs bg-white text-black">03</div>
                                    <div class="ml-16">
                                        <div class="font-mono text-xs text-neutral-500 mb-2">WEEK 5-6</div>
                                        <h5 class="font-display text-lg font-medium mb-3">Delivery</h5>
                                        <ul class="space-y-2 text-xs text-neutral-400">
                                            <li> Live Excel models</li>
                                            <li> Implementation roadmap</li>
                                            <li> Decision frameworks</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Case Studies -->
                    <div class="mt-16">
                        <div class="flex justify-between items-end mb-8 pb-4 border-b border-white/10">
                            <h3 class="font-display text-2xl md:text-3xl font-medium">Representative Engagements</h3>
                            <span class="font-mono text-xs text-neutral-500 uppercase tracking-widest">2023 - 2024</span>
                        </div>
                        
                        <!-- Case Study 1 -->
                        <div class="mb-8 md:mb-12 border border-white/10 bg-charcoal">
                            <div class="p-4 sm:p-6 md:p-8 border-b border-white/10">
                                <div class="flex flex-col sm:flex-row justify-between items-start gap-3 mb-6">
                                    <div>
                                        <h4 class="font-display text-lg sm:text-xl font-medium mb-2">GROWTH-STAGE SAAS COMPANY</h4>
                                        <p class="font-mono text-xs text-neutral-500 uppercase tracking-widest">Series B  $15M ARR  120 Employees</p>
                                    </div>
                                    <span class="font-mono text-xs border border-white/20 px-3 py-1 shrink-0">2024</span>
                                </div>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 md:gap-8">
                                    <div>
                                        <h5 class="text-xs font-mono text-neutral-400 uppercase tracking-widest mb-3">Challenge</h5>
                                        <p class="text-sm text-neutral-300 leading-relaxed">
                                            Rapid revenue growth masking unit economics deterioration. CAC inflating 40% YoY, gross margins compressing. Board demanding clear path to profitability before Series C.
                                        </p>
                                    </div>
                                    <div>
                                        <h5 class="text-xs font-mono text-neutral-400 uppercase tracking-widest mb-3">Solution</h5>
                                        <p class="text-sm text-neutral-300 leading-relaxed">
                                            Built cohort-based LTV/CAC model, identified infrastructure cost savings, redesigned pricing architecture. Delivered 3-scenario financial model for fundraising conversations.
                                        </p>
                                    </div>
                                </div>
                            </div>
                            <div class="p-4 sm:p-6 md:p-8 bg-[#0A0A0A]">
                                <div class="grid grid-cols-1 sm:grid-cols-3 gap-6 md:gap-8 text-xs font-mono">
                                    <div>
                                        <span class="text-neutral-500 block uppercase tracking-wider mb-2">Margin Improvement</span>
                                        <span class="text-white font-bold text-2xl">+12%</span>
                                    </div>
                                    <div>
                                        <span class="text-neutral-500 block uppercase tracking-wider mb-2">Annual Savings</span>
                                        <span class="text-white font-bold text-2xl">$2.3M</span>
                                    </div>
                                    <div>
                                        <span class="text-neutral-500 block uppercase tracking-wider mb-2">Series C Raised</span>
                                        <span class="text-white font-bold text-2xl">$25M</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Case Study 2 -->
                        <div class="mb-8 md:mb-12 border border-white/10 bg-charcoal">
                            <div class="p-4 sm:p-6 md:p-8 border-b border-white/10">
                                <div class="flex flex-col sm:flex-row justify-between items-start gap-3 mb-6">
                                    <div>
                                        <h4 class="font-display text-lg sm:text-xl font-medium mb-2">FAMILY OFFICE M&A ADVISORY</h4>
                                        <p class="font-mono text-xs text-neutral-500 uppercase tracking-widest">DTC Brand Acquisition  $8M Enterprise Value</p>
                                    </div>
                                    <span class="font-mono text-xs border border-white/20 px-3 py-1 shrink-0">2024</span>
                                </div>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 md:gap-8">
                                    <div>
                                        <h5 class="text-xs font-mono text-neutral-400 uppercase tracking-widest mb-3">Challenge</h5>
                                        <p class="text-sm text-neutral-300 leading-relaxed">
                                            Seller claiming 40% EBITDA margins and 3.5x revenue multiple valuation. Client needed independent due diligence to validate financial projections and strategic assumptions.
                                        </p>
                                    </div>
                                    <div>
                                        <h5 class="text-xs font-mono text-neutral-400 uppercase tracking-widest mb-3">Solution</h5>
                                        <p class="text-sm text-neutral-300 leading-relaxed">
                                            Forensic analysis revealed aggressive accounting practices. True normalized margins: 22%. Concentration risk: 78% revenue from 3 SKUs. Advised walk-away. Target filed Chapter 11 six months later.
                                        </p>
                                    </div>
                                </div>
                            </div>
                            <div class="p-4 sm:p-6 md:p-8 bg-[#0A0A0A]">
                                <div class="grid grid-cols-1 sm:grid-cols-3 gap-6 md:gap-8 text-xs font-mono">
                                    <div>
                                        <span class="text-neutral-500 block uppercase tracking-wider mb-2">Claimed EBITDA</span>
                                        <span class="text-white font-bold text-2xl">40%</span>
                                    </div>
                                    <div>
                                        <span class="text-neutral-500 block uppercase tracking-wider mb-2">Actual EBITDA</span>
                                        <span class="text-white font-bold text-2xl">22%</span>
                                    </div>
                                    <div>
                                        <span class="text-neutral-500 block uppercase tracking-wider mb-2">Capital Saved</span>
                                        <span class="text-white font-bold text-2xl">$8M</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Case Study 3 -->
                        <div class="border border-white/10 bg-charcoal">
                            <div class="p-4 sm:p-6 md:p-8 border-b border-white/10">
                                <div class="flex flex-col sm:flex-row justify-between items-start gap-3 mb-6">
                                    <div>
                                        <h4 class="font-display text-lg sm:text-xl font-medium mb-2">OPERATIONAL EFFICIENCY PROJECT</h4>
                                        <p class="font-mono text-xs text-neutral-500 uppercase tracking-widest">E-Commerce  Mid-Market  Supply Chain Optimization</p>
                                    </div>
                                    <span class="font-mono text-xs border border-white/20 px-3 py-1 shrink-0">2023</span>
                                </div>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 md:gap-8">
                                    <div>
                                        <h5 class="text-xs font-mono text-neutral-400 uppercase tracking-widest mb-3">Challenge</h5>
                                        <p class="text-sm text-neutral-300 leading-relaxed">
                                            Margin compression from rising fulfillment costs. $1.2M trapped in excess inventory. Management lacked visibility into true product-level profitability and unit economics.
                                        </p>
                                    </div>
                                    <div>
                                        <h5 class="text-xs font-mono text-neutral-400 uppercase tracking-widest mb-3">Solution</h5>
                                        <p class="text-sm text-neutral-300 leading-relaxed">
                                            Activity-based costing framework revealed 32% of SKUs destroying value. Rationalized 180 products, optimized inventory turnover (8752 days), built real-time margin dashboard.
                                        </p>
                                    </div>
                                </div>
                            </div>
                            <div class="p-4 sm:p-6 md:p-8 bg-[#0A0A0A]">
                                <div class="grid grid-cols-1 sm:grid-cols-3 gap-6 md:gap-8 text-xs font-mono">
                                    <div>
                                        <span class="text-neutral-500 block uppercase tracking-wider mb-2">Working Capital</span>
                                        <span class="text-white font-bold text-2xl">+$780K</span>
                                    </div>
                                    <div>
                                        <span class="text-neutral-500 block uppercase tracking-wider mb-2">SKU Reduction</span>
                                        <span class="text-white font-bold text-2xl">-180</span>
                                    </div>
                                    <div>
                                        <span class="text-neutral-500 block uppercase tracking-wider mb-2">Margin Gain</span>
                                        <span class="text-white font-bold text-2xl">+7.2%</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Methodology -->
                    <div class="mt-12 md:mt-16 border border-white/10 bg-[#0A0A0A]">
                        <div class="p-4 sm:p-6 md:p-8 border-b border-white/10">
                            <h4 class="text-xs font-mono text-neutral-400 uppercase tracking-widest">Analytical Framework</h4>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-px bg-white/10">
                            <div class="p-6 md:p-8 bg-[#0A0A0A]">
                                <div class="mb-4">
                                    <span class="font-mono text-xs text-neutral-500">[01]</span>
                                </div>
                                <h5 class="font-display text-base sm:text-lg font-medium mb-3">QUANTIFY STATUS QUO</h5>
                                <p class="text-xs text-neutral-400 leading-relaxed">Build comprehensive models mapping current operations. Identify inflection points, bottlenecks, hidden value drivers. No assumptions without evidence.</p>
                            </div>
                            <div class="p-6 md:p-8 bg-[#0A0A0A]">
                                <div class="mb-4">
                                    <span class="font-mono text-xs text-neutral-500">[02]</span>
                                </div>
                                <h5 class="font-display text-base sm:text-lg font-medium mb-3">STRESS TEST ASSUMPTIONS</h5>
                                <p class="text-xs text-neutral-400 leading-relaxed">Sensitivity analysis on all variables. What breaks the model? Monte Carlo simulation for uncertainty quantification and tail risk management.</p>
                            </div>
                            <div class="p-6 md:p-8 bg-[#0A0A0A]">
                                <div class="mb-4">
                                    <span class="font-mono text-xs text-neutral-500">[03]</span>
                                </div>
                                <h5 class="font-display text-base sm:text-lg font-medium mb-3">DESIGN OPTIMAL CONFIGURATION</h5>
                                <p class="text-xs text-neutral-400 leading-relaxed">Engineer decision frameworks maximizing expected value while managing tail risks. Focus on measurable, controllable, scalable interventions.</p>
                            </div>
                            <div class="p-6 md:p-8 bg-[#0A0A0A]">
                                <div class="mb-4">
                                    <span class="font-mono text-xs text-neutral-500">[04]</span>
                                </div>
                                <h5 class="font-display text-base sm:text-lg font-medium mb-3">IMPLEMENT & ITERATE</h5>
                                <p class="text-xs text-neutral-400 leading-relaxed">Deliver actionable recommendations with KPIs. Build dashboards for ongoing monitoring. Continuous feedback loops for systematic refinement.</p>
                            </div>
                        </div>
                    </div>

                    <!-- Service Catalog -->
                    <div class="mt-12 md:mt-16 border border-white/10 bg-charcoal">
                        <div class="p-4 sm:p-6 md:p-8 border-b border-white/10">
                            <h3 class="font-display text-lg sm:text-xl font-medium">Service Catalog</h3>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-px bg-white/10">
                            <div class="p-6 md:p-8 bg-charcoal">
                                <h4 class="text-xs font-mono text-neutral-400 uppercase tracking-widest mb-6">Financial Advisory</h4>
                                <ul class="space-y-3 font-mono text-xs sm:text-sm">
                                    <li class="flex items-start gap-3 text-neutral-300">
                                        <span class="text-white mt-1"></span>
                                        <span>DCF Valuation & Financial Modeling</span>
                                    </li>
                                    <li class="flex items-start gap-3 text-neutral-300">
                                        <span class="text-white mt-1"></span>
                                        <span>M&A Due Diligence & Deal Analysis</span>
                                    </li>
                                    <li class="flex items-start gap-3 text-neutral-300">
                                        <span class="text-white mt-1"></span>
                                        <span>Capital Structure Optimization</span>
                                    </li>
                                    <li class="flex items-start gap-3 text-neutral-300">
                                        <span class="text-white mt-1"></span>
                                        <span>Fundraising Strategy & Pitch Review</span>
                                    </li>
                                    <li class="flex items-start gap-3 text-neutral-300">
                                        <span class="text-white mt-1"></span>
                                        <span>Unit Economics & Cohort Analysis</span>
                                    </li>
                                </ul>
                            </div>
                            <div class="p-6 md:p-8 bg-charcoal">
                                <h4 class="text-xs font-mono text-neutral-400 uppercase tracking-widest mb-6">Strategic Operations</h4>
                                <ul class="space-y-3 font-mono text-xs sm:text-sm">
                                    <li class="flex items-start gap-3 text-neutral-300">
                                        <span class="text-white mt-1"></span>
                                        <span>Business Process Redesign</span>
                                    </li>
                                    <li class="flex items-start gap-3 text-neutral-300">
                                        <span class="text-white mt-1"></span>
                                        <span>KPI Framework Development</span>
                                    </li>
                                    <li class="flex items-start gap-3 text-neutral-300">
                                        <span class="text-white mt-1"></span>
                                        <span>Pricing Strategy & Revenue Optimization</span>
                                    </li>
                                    <li class="flex items-start gap-3 text-neutral-300">
                                        <span class="text-white mt-1"></span>
                                        <span>Cost Reduction & Margin Improvement</span>
                                    </li>
                                    <li class="flex items-start gap-3 text-neutral-300">
                                        <span class="text-white mt-1"></span>
                                        <span>Decision Framework Architecture</span>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                `
            },
        };

        const writingData = {
            convexity: {
                meta: { date: "DEC 2025", category: "FIXED INCOME", readTime: "8 MIN" },
                title: "The Convexity Trap",
                lede: "Why negative convexity in MBS portfolios destroyed hedge funds in 2022. A technical autopsy of duration extension and gamma hedging failures.",
                content: `
                    <p class="font-serif text-lg md:text-xl leading-relaxed mb-6 drop-cap">
                        Duration is a first-order approximation. <span class="interactive-term" data-term="Convexity">Convexity<span class="term-tooltip">The second derivative of bond price with respect to yield, measuring the curvature of the price-yield relationship.</span></span> is where mortals become gods or corpses. In March 2022, as the Fed pivoted hawkish and 10-year yields spiked 80bps in three weeks, agency MBS portfolios experienced what traders euphemistically call "extension risk." What they actually experienced was financial obliteration.
                    </p>
                    <div class="my-12 border-l-4 border-black pl-6 py-2">
                        <p class="font-playfair italic text-3xl md:text-4xl leading-tight">"Negative convexity is a short volatility position you didn't know you owned."</p>
                    </div>
                    <p class="font-serif text-lg md:text-xl leading-relaxed mb-6">
                        The mathematics are elegant but brutal. For a standard fixed-rate bond, convexity is positive: price increases accelerate as yields fall, and price decreases decelerate as yields rise. You win bigger than you lose. But <span class="interactive-term" data-term="MBS Negative Convexity">mortgage-backed securities<span class="term-tooltip">Agency MBS exhibit negative convexity due to embedded prepayment options held by homeowners.</span></span> embed a prepayment option that homeowners own. When rates fall, refinancing accelerates-your bond gets called away at par just as prices should soar. When rates rise, prepayments stop-you're stuck with a 30-year duration instrument in a rising rate regime.
                        <span class="sparkline" data-values="100,102,105,104,108,106,103,98,92,85,78"></span>
                    </p>
                    <h3 class="font-display text-2xl font-bold mt-12 mb-4">The Duration Extension Cascade</h3>
                    <p class="font-serif text-lg md:text-xl leading-relaxed mb-6">
                        Effective duration for a 30-year 3% MBS coupon sat at ~4.2 years in January 2022 when the 10-year was 1.50%. By June, with the 10-year at 3.00%, that same security's duration had extended to ~7.8 years. The convexity adjustment term in the Taylor series expansion: P  -D  y + C  (y). For MBS, C &lt; 0. The portfolio hemorrhaged value not just from rising rates, but from the accelerating pace of losses as duration stretched like taffy.
                    </p>
                    <p class="font-serif text-lg md:text-xl leading-relaxed mb-6">
                        Dealers attempted to <span class="interactive-term" data-term="Gamma Hedging">gamma hedge<span class="term-tooltip">Dynamically adjusting delta hedge positions to remain neutral to second-order price movements.</span></span> by selling duration into the selloff-exacerbating the rate spike in a doom loop. The TBA market saw bid-ask spreads blow out to 8/32nds on peak volatility days. Convexity hedging flows became the dominant price action driver, overwhelming fundamental supply-demand dynamics.
                    </p>
                    <h3 class="font-display text-2xl font-bold mt-12 mb-4">Quantitative Postmortem</h3>
                    <p class="font-serif text-lg md:text-xl leading-relaxed mb-6">
                        The failure wasn't in the models-OAS frameworks accurately priced the prepayment risk. The failure was in <span class="interactive-term" data-term="Basis Risk">basis risk<span class="term-tooltip">The risk that hedging instruments don't move perfectly in correlation with the underlying exposure.</span></span> management and liquidity assumptions. Funds hedged with Treasury futures, assuming a stable 90% hedge ratio. When MBS-Treasury spreads widened 45bps in two weeks, the hedge ratio collapsed to 0.65. The "basis" was supposed to be stable. It wasn't.
                        <span class="sparkline" data-values="90,89,88,85,80,72,65,68,70,75,78"></span>
                    </p>
                    <p class="font-serif text-lg md:text-xl leading-relaxed mb-6">
                        The lesson: Duration measures local sensitivity. Convexity measures how that sensitivity itself changes. In leveraged portfolios with negative convexity, small rate moves trigger large hedge adjustments, which in illiquid markets become self-fulfilling prophecies. The second derivative killed more P&L than the first.
                    </p>
                `,
                nextSlug: "terminal"
            },
            terminal: {
                meta: { date: "NOV 2025", category: "VALUATION", readTime: "7 MIN" },
                title: "Terminal Value Deconstructed",
                lede: "The 80% problem in DCF models. Why perpetuity growth assumptions mask value creation and how to build defensible exit multiples.",
                content: `
                    <p class="font-serif text-lg md:text-xl leading-relaxed mb-6 drop-cap">
                        In most discounted cash flow models, 70-85% of enterprise value lives in the <span class="interactive-term" data-term="Terminal Value">terminal value<span class="term-tooltip">The present value of all future cash flows beyond the explicit forecast period, typically calculated using a perpetuity growth method or exit multiple.</span></span> calculation. This is not a feature. This is an admission that we're guessing. And yet, analysts treat the perpetuity growth rate with the reverence of a physical constant. g = 2.5%. Always. Forever. Because GDP.
                    </p>
                    <div class="my-12 border-l-4 border-black pl-6 py-2">
                        <p class="font-playfair italic text-3xl md:text-4xl leading-tight">"A DCF is a philosophy disguised as mathematics."</p>
                    </div>
                    <p class="font-serif text-lg md:text-xl leading-relaxed mb-6">
                        The Gordon Growth Model assumes perpetual constant growth: TV = FCF / (WACC - g). Elegant. Convenient. Catastrophically sensitive. A 50bps swing in g or WACC moves valuation by 30-40%. This isn't precision-it's astrology with Greek letters. The model forces infinite compounding at a rate that, if sustained, would make any firm larger than global GDP within a century. We know this is absurd. We plug in the number anyway.
                    </p>
                    <h3 class="font-display text-2xl font-bold mt-12 mb-4">The Exit Multiple Alternative</h3>
                    <p class="font-serif text-lg md:text-xl leading-relaxed mb-6">
                        Exit multiples ground terminal value in empirical reality: TV = EBITDA  EV/EBITDA. The multiple reflects <span class="interactive-term" data-term="Comparable Transactions">comp set analysis<span class="term-tooltip">Valuation methodology using multiples from comparable company transactions or trading values.</span></span>-what buyers actually paid for similar assets. But here's the trap: you're anchoring to current multiples, which embed current growth expectations, which may be wildly optimistic or pessimistic. You've just made the model circular.
                        <span class="sparkline" data-values="12,13,14,15,14,13,11,9,10,11,12"></span>
                    </p>
                    <p class="font-serif text-lg md:text-xl leading-relaxed mb-6">
                        The intellectually honest approach: decompose the multiple into its fundamental drivers. The implied exit multiple is: (1 - g/ROIC)  (1 + g) / (WACC - g), where ROIC is the perpetual return on incremental invested capital. If ROIC &gt; WACC, the firm creates value through reinvestment. If ROIC &lt; WACC, growth destroys value-the firm should distribute cash, not reinvest it.
                    </p>
                    <h3 class="font-display text-2xl font-bold mt-12 mb-4">The Fade Rate Framework</h3>
                    <p class="font-serif text-lg md:text-xl leading-relaxed mb-6">
                        No competitive advantage lasts forever. Instead of assuming constant growth, model a <span class="interactive-term" data-term="Fade Rate">fade rate<span class="term-tooltip">The rate at which a company's excess returns decay toward its cost of capital over time, reflecting competitive pressure.</span></span>: high initial growth decaying toward the risk-free rate over 20-40 years. This reflects economic reality-mean reversion, technological obsolescence, competitive entry. The formula: g = (g - r_f)  e^(-t) + r_f, where  is the decay constant calibrated to industry half-life.
                    </p>
                    <p class="font-serif text-lg md:text-xl leading-relaxed mb-6">
                        The fade rate transforms terminal value from a binary guess into a probabilistic decay function. It forces explicit assumptions about durability of competitive moats. And it produces valuations that aren't 80% dependent on what happens after year 10. The math is harder. The intellectual honesty is worth it.
                        <span class="sparkline" data-values="15,14,13,11,9,7,5,4,3,2.5,2.5"></span>
                    </p>
                `,
                nextSlug: "variance"
            },
            variance: {
                meta: { date: "OCT 2025", category: "DERIVATIVES", readTime: "9 MIN" },
                title: "Variance Risk Premium Extraction",
                lede: "Decomposing realized vs. implied volatility spreads. Statistical arbitrage strategies in VIX futures term structure and variance swap mechanics.",
                content: `
                    <p class="font-serif text-lg md:text-xl leading-relaxed mb-6 drop-cap">
                        The market systematically overprices volatility. This isn't a behavioral quirk-it's a structural risk premium. Investors pay to hedge tail risk. Sellers collect that premium. The <span class="interactive-term" data-term="Variance Risk Premium">variance risk premium<span class="term-tooltip">The difference between implied variance (from option prices) and subsequently realized variance, representing compensation for bearing volatility risk.</span></span> (VRP) is the spread between implied variance and realized variance, annualized at ~3-5 volatility points on the S&P 500. Over two decades, selling this premium has generated Sharpe ratios exceeding 1.0-if you survive the crashes.
                    </p>
                    <div class="my-12 border-l-4 border-black pl-6 py-2">
                        <p class="font-playfair italic text-3xl md:text-4xl leading-tight">"Variance swaps are the purest expression of volatility. No delta. No gamma leak. Just convexity."</p>
                    </div>
                    <p class="font-serif text-lg md:text-xl leading-relaxed mb-6">
                        A <span class="interactive-term" data-term="Variance Swap">variance swap<span class="term-tooltip">An OTC derivative that allows direct speculation or hedging of realized variance over a period, with payoff = Notional  (Realized Variance - Strike Variance).</span></span> pays the difference between realized variance and a fixed strike: Payoff = N  (_realized - _strike). No path dependence. No rebalancing. Pure variance exposure. The fair strike is calculated from the full strip of option prices across the smile using the model-free replication formula: _IV = (2/T)  [Q(K)/K] dK, where Q(K) is the price of an OTM option at strike K.
                    </p>
                    <h3 class="font-display text-2xl font-bold mt-12 mb-4">VIX Futures Term Structure Dynamics</h3>
                    <p class="font-serif text-lg md:text-xl leading-relaxed mb-6">
                        The VIX futures curve is typically in <span class="interactive-term" data-term="Contango">contango<span class="term-tooltip">A market condition where futures prices are higher than spot prices, often due to storage costs or negative convenience yield.</span></span>-front-month trades 10-15% below the 3-month contract. This reflects the VRP: implied vol embedded in futures exceeds expected realized vol. But the curve isn't static. In normal regimes, it slopes upward at ~0.5 VIX points per month. During spikes (VIX &gt; 30), it inverts into backwardation as front-month fear dominates distant expectations.
                        <span class="sparkline" data-values="15,16,17,18,19,20,21,22,35,30,25"></span>
                    </p>
                    <p class="font-serif text-lg md:text-xl leading-relaxed mb-6">
                        The classic VRP trade: sell front-month VIX futures, roll monthly, collect the contango decay. The XIV ETN executed this mechanically until February 2018, when the VIX spiked 116% intraday and the product terminated. The strategy works 95% of the time. The other 5% bankrupts you. This is the essence of <span class="interactive-term" data-term="Taleb's Ludic Fallacy">crisis alpha asymmetry<span class="term-tooltip">Strategies that collect small, frequent gains but suffer catastrophic losses during tail events due to negative skewness.</span></span>: positive carry, negative skew.
                    </p>
                    <h3 class="font-display text-2xl font-bold mt-12 mb-4">Empirical Term Structure Models</h3>
                    <p class="font-serif text-lg md:text-xl leading-relaxed mb-6">
                        To extract VRP systematically, model the term structure as a mean-reverting process: dVIX = ( - VIX)dt + VIX dW. Calibrate  (mean reversion speed) and  (long-run mean) from historical data. The model implies that when VIX &gt;  + 2, the curve should flatten-sell front and buy back end. When VIX &lt;  - , steepen-short back end, long front.
                    </p>
                    <p class="font-serif text-lg md:text-xl leading-relaxed mb-6">
                        Empirical calibration on 2010-2024 data:   0.8 (mean reversion half-life ~0.9 years),   18.5, _vol-of-vol  0.65. Backtest shows roll-yield strategies capturing 70% of theoretical VRP, net of transaction costs and slippage. The key: dynamic position sizing inversely proportional to VIX level. Never naked short volatility. Use variance swaps or calendar spreads to isolate term structure exposure from outright level.
                        <span class="sparkline" data-values="5,4,5,6,5,7,6,8,15,10,6"></span>
                    </p>
                    <h3 class="font-display text-2xl font-bold mt-12 mb-4">The Volatility of Volatility Problem</h3>
                    <p class="font-serif text-lg md:text-xl leading-relaxed mb-6">
                        VRP extraction isn't free money. The risk is vol-of-vol (vvix): when volatility itself becomes volatile, your P&L distribution gets fat tails. VVIX &gt; 120 signals regime change-VRP inverts, and sellers get annihilated. The solution: trade variance dispersion instead of outright variance. Sell index variance, buy single-stock variance. Capture the spread while hedging systemic jumps. Correlation drops during crises-dispersion widens, offsetting index variance losses.
                    </p>
                `,
                nextSlug: "bootstrap"
            },
            bootstrap: {
                meta: { date: "SEP 2025", category: "FIXED INCOME", readTime: "8 MIN" },
                title: "Bootstrapping the Yield Curve",
                lede: "From SOFR swaps to zero-coupon rates. The mechanics of curve construction, interpolation methods, and cross-currency basis adjustments.",
                content: `
                    <p class="font-serif text-lg md:text-xl leading-relaxed mb-6 drop-cap">
                        Every derivative pricing model requires a discount curve. Build it wrong, and every valuation downstream is contaminated. The <span class="interactive-term" data-term="Bootstrapping">bootstrapping algorithm<span class="term-tooltip">An iterative method to extract zero-coupon rates from observed market prices of coupon-bearing bonds or swaps.</span></span> converts messy market quotes-SOFR swaps, Treasury bonds, Eurodollar futures-into a smooth zero-coupon yield curve. The process is both mechanical and surgical. One wrong assumption about day-count conventions or compounding frequency, and your 10-year swap rate is mispriced by 3 basis points. In a $500M notional swap, that's $1.5M of P&L error.
                    </p>
                    <div class="my-12 border-l-4 border-black pl-6 py-2">
                        <p class="font-playfair italic text-3xl md:text-4xl leading-tight">"The curve is not given. The curve is constructed."</p>
                    </div>
                    <p class="font-serif text-lg md:text-xl leading-relaxed mb-6">
                        Post-LIBOR transition, <span class="interactive-term" data-term="SOFR">SOFR<span class="term-tooltip">Secured Overnight Financing Rate: the risk-free rate based on Treasury repo transactions, replacing LIBOR as the USD benchmark.</span></span> is the foundation. Start with overnight SOFR (currently ~4.35%). For terms beyond O/N, use SOFR futures to build the 3M-2Y segment. Each futures price implies a forward rate: F = 100 - Price. Convert to continuous compounding: r_continuous = ln(1 + r_simple  t) / t, where t is the accrual fraction (ACT/360 for USD swaps).
                    </p>
                    <h3 class="font-display text-2xl font-bold mt-12 mb-4">The Swap Curve Stripping Process</h3>
                    <p class="font-serif text-lg md:text-xl leading-relaxed mb-6">
                        For maturities beyond 2 years, SOFR swaps provide the data. A 5-year swap at 4.25% fixed means the present value of fixed flows equals the present value of floating flows:  [C  DF(t)] =  [Fwd(t, t)  DF(t)], where C is the fixed coupon, DF(t) is the discount factor at time t, and Fwd is the forward SOFR rate.
                        <span class="sparkline" data-values="4.0,4.1,4.15,4.2,4.25,4.3,4.35,4.4,4.5,4.6,4.7"></span>
                    </p>
                    <p class="font-serif text-lg md:text-xl leading-relaxed mb-6">
                        Bootstrap iteratively: solve for DF(t) using the 1Y swap, then DF(t) using the 2Y swap and the already-known DF(t), and so on. At each tenor, invert the discount factor to get the zero rate: z(t) = -ln[DF(t)] / t. The result is a discrete set of zero rates at swap maturity points: 1Y, 2Y, 3Y, ..., 30Y.
                    </p>
                    <h3 class="font-display text-2xl font-bold mt-12 mb-4">Interpolation: The Hidden Degrees of Freedom</h3>
                    <p class="font-serif text-lg md:text-xl leading-relaxed mb-6">
                        Market quotes are sparse. You have zeros at 2Y, 3Y, 5Y, 7Y, 10Y. But you need a rate for 4.25Y to price a bespoke swaption. Interpolation fills the gaps. Linear interpolation of zero rates is crude and creates artificial discontinuities in forward rates. <span class="interactive-term" data-term="Cubic Spline">Cubic splines<span class="term-tooltip">A piecewise polynomial interpolation method ensuring smooth first and second derivatives across the curve.</span></span> are smoother but can generate economically implausible forward rate oscillations.
                    </p>
                    <p class="font-serif text-lg md:text-xl leading-relaxed mb-6">
                        Best practice: interpolate on the <span class="interactive-term" data-term="Log-Discount Factor">log-discount factor<span class="term-tooltip">Interpolating ln[DF(t)] ensures positivity of discount factors and smooth instantaneous forward rates.</span></span> using monotone-preserving cubic splines (e.g., Hyman's filter). This guarantees forward rates remain positive and smooth. For ultra-long tenors (&gt;30Y), extrapolate using the Smith-Wilson method, which asymptotically converges to an ultimate forward rate (typically UFR = 3.8% for USD, per EIOPA guidelines adapted to US regulatory context).
                        <span class="sparkline" data-values="0.98,0.95,0.91,0.86,0.80,0.74,0.67,0.60,0.52,0.45,0.38"></span>
                    </p>
                    <h3 class="font-display text-2xl font-bold mt-12 mb-4">Cross-Currency Basis: The Arbitrage That Shouldn't Exist</h3>
                    <p class="font-serif text-lg md:text-xl leading-relaxed mb-6">
                        Covered interest parity says: F/S = (1 + r_d) / (1 + r_f), where F is the forward FX rate, S is spot, r_d is domestic rate, r_f is foreign rate. In theory, no arbitrage. In practice, <span class="interactive-term" data-term="CCS Basis">cross-currency swap basis<span class="term-tooltip">The spread added to one leg of a cross-currency swap to equalize present values, reflecting funding costs and credit risk asymmetries.</span></span> can be -50 bps (EUR) or +30 bps (JPY) vs. USD. Post-2008, funding constraints and regulatory capital charges broke CIP.
                    </p>
                    <p class="font-serif text-lg md:text-xl leading-relaxed mb-6">
                        When building a USD curve from EUR swaps (or vice versa), adjust for the basis: r_USD_implied = r_EUR + basis + FX_forward_adjustment. The 5Y EUR/USD basis widened to -60 bps during COVID. Ignoring it would misprice cross-currency swaps by millions. The basis isn't noise-it's structural, driven by dollar shortage in offshore funding markets and balance sheet costs for dealers.
                    </p>
                `,
                nextSlug: "credit"
            },
            credit: {
                meta: { date: "AUG 2025", category: "CREDIT", readTime: "8 MIN" },
                title: "Credit Spread Decomposition",
                lede: "Separating default probability from recovery rates in corporate bonds. Structural models vs. reduced-form approaches in distressed debt.",
                content: `
                    <p class="font-serif text-lg md:text-xl leading-relaxed mb-6 drop-cap">
                        A corporate bond yield is composed of two pieces: the risk-free rate and the <span class="interactive-term" data-term="Credit Spread">credit spread<span class="term-tooltip">The additional yield above the risk-free rate that compensates investors for default risk and illiquidity.</span></span>. The spread itself decomposes into default probability, expected loss given default, and a liquidity premium. Most analysts stop at the first layer. That's where the money is lost. Because spreads compress and widen not just on changing default risk, but on shifts in recovery assumptions and market microstructure.
                    </p>
                    <div class="my-12 border-l-4 border-black pl-6 py-2">
                        <p class="font-playfair italic text-3xl md:text-4xl leading-tight">"Default is a binary event. Recovery is a negotiation."</p>
                    </div>
                    <p class="font-serif text-lg md:text-xl leading-relaxed mb-6">
                        The fundamental credit equation: Spread = PD  LGD + Liquidity Premium, where PD is probability of default and <span class="interactive-term" data-term="LGD">LGD<span class="term-tooltip">Loss Given Default: the percentage of exposure lost when a borrower defaults, equal to 1 minus the recovery rate.</span></span> is loss given default (1 - Recovery Rate). For a BB-rated 5-year bond with 350bps spread, assume PD = 4.5% (annualized), Recovery = 40%. Expected loss = 4.5%  60% = 2.7% annually  270bps. The remaining 80bps is compensation for liquidity and systematic credit risk. That excess spread is tradable alpha.
                        <span class="sparkline" data-values="100,98,95,92,88,82,75,68,58,50,45"></span>
                    </p>
                    <h3 class="font-display text-2xl font-bold mt-12 mb-4">Merton's Structural Model</h3>
                    <p class="font-serif text-lg md:text-xl leading-relaxed mb-6">
                        <span class="interactive-term" data-term="Merton Model">Merton's framework<span class="term-tooltip">A structural credit model treating equity as a call option on firm assets, with default occurring when asset value falls below debt obligations.</span></span> treats equity as a call option on the firm's assets with strike equal to debt face value. Default occurs when asset value V_T &lt; D at maturity T. The equity value: E = V N(d) - D e^(-rT) N(d), where d = [ln(V/D) + (r + /2)T] / (T), and N() is the cumulative normal distribution.
                    </p>
                    <p class="font-serif text-lg md:text-xl leading-relaxed mb-6">
                        The model implies a distance-to-default: DD = [ln(V/D) + ( - /2)T] / (T). The probability of default: PD = N(-DD). For a firm with market cap $5B, debt $8B, asset volatility 35%, and 5-year horizon: V  $13B, DD  1.1, PD  13.6%. The corresponding credit spread via risk-neutral pricing is: s = -ln[1 - PD  LGD] / T  340bps for LGD = 60%.
                    </p>
                    <h3 class="font-display text-2xl font-bold mt-12 mb-4">Reduced-Form Models: Intensity-Based Approach</h3>
                    <p class="font-serif text-lg md:text-xl leading-relaxed mb-6">
                        Structural models struggle with sudden defaults (Lehman had positive equity value 48 hours before bankruptcy). <span class="interactive-term" data-term="Reduced-Form Models">Reduced-form models<span class="term-tooltip">Credit models that treat default as a random jump process with exogenous hazard rate, without modeling firm capital structure.</span></span> treat default as a Poisson jump with hazard rate (t). The survival probability: S(T) = exp[- (t)dt]. For constant , this simplifies to S(T) = e^(-T).
                    </p>
                    <p class="font-serif text-lg md:text-xl leading-relaxed mb-6">
                        The credit spread in a reduced-form model: s =   LGD. Calibrate  from CDS spreads: if 5Y CDS trades at 280bps and recovery is 40%, then   280bps / 60% = 4.67% annualized. The advantage: no need to estimate unobservable asset volatility. The disadvantage:  is a black box-it doesn't explain *why* default risk changes, only that it has.
                        <span class="sparkline" data-values="2.5,2.8,3.2,3.8,4.5,5.2,6.0,7.5,9.0,8.5,7.0"></span>
                    </p>
                    <h3 class="font-display text-2xl font-bold mt-12 mb-4">Recovery Rate Dynamics in Distressed Debt</h3>
                    <p class="font-serif text-lg md:text-xl leading-relaxed mb-6">
                        Recovery rates are not constant. They're correlated with default rates-during recessions, both PD and LGD rise simultaneously. Moody's data (1982-2022): median recovery on senior unsecured bonds is 38%, but the distribution is bimodal-recoveries cluster near 10% (liquidation) or 65% (restructuring). In distressed cycles (2008, 2020), average recovery dropped to 28% as bankruptcy courts were overwhelmed and asset sales occurred in depressed markets.
                    </p>
                    <p class="font-serif text-lg md:text-xl leading-relaxed mb-6">
                        Trading strategy: in early-stage distress, buy senior secured (recovery ~70%) and short CDS (recovery ~40%). The basis captures recovery mispricing. In late-stage distress, avoid the capital structure entirely-recovery convergence crushes the trade. The edge is in timing the transition from going-concern to gone-concern. Structural models tell you when equity is worthless. Reduced-form models tell you when the market believes it.
                    </p>
                `,
                nextSlug: "leverage"
            },
            leverage: {
                meta: { date: "JUL 2025", category: "LBO / PE", readTime: "9 MIN" },
                title: "The Leverage Ratchet",
                lede: "LBO modeling beyond the template. Optimal capital structure, covenant design, and the hidden costs of financial engineering in leveraged buyouts.",
                content: `
                    <p class="font-serif text-lg md:text-xl leading-relaxed mb-6 drop-cap">
                        Private equity returns are manufactured through three levers: operational improvement, multiple arbitrage, and leverage. The first is hard. The second is cyclical. The third is mechanical-and the most misunderstood. <span class="interactive-term" data-term="LBO">Leveraged buyout<span class="term-tooltip">Acquisition of a company using significant amounts of borrowed money, with the target's cash flows servicing the debt.</span></span> modeling reduces to a question: How much debt can this cash flow sustain? Get it wrong on the high side, and you're in bankruptcy. Get it wrong on the low side, and you leave 500bps of IRR on the table.
                    </p>
                    <div class="my-12 border-l-4 border-black pl-6 py-2">
                        <p class="font-playfair italic text-3xl md:text-4xl leading-tight">"Leverage is a call option on upside and a put option on downside. The strike is the debt face value."</p>
                    </div>
                    <p class="font-serif text-lg md:text-xl leading-relaxed mb-6">
                        The traditional metric is <span class="interactive-term" data-term="Debt-to-EBITDA">Debt / EBITDA<span class="term-tooltip">Leverage ratio measuring total debt relative to earnings before interest, taxes, depreciation, and amortization.</span></span>. Sponsors target 5.0-6.5x for middle-market buyouts. But EBITDA is a fiction-it's not cash. EBITDA - Capex - Working Capital = Unlevered Free Cash Flow. That's what services debt. In capital-intensive businesses, EBITDA overstates cash generation by 30-40%. In SaaS or asset-light models, the spread is narrower. The correct question: Debt / (EBITDA - Capex - WC). This ratio should not exceed 4.5x for stable cash flows, 3.5x for cyclical.
                        <span class="sparkline" data-values="6.5,6.2,5.8,5.3,4.9,4.5,4.0,3.6,3.2,2.8,2.3"></span>
                    </p>
                    <h3 class="font-display text-2xl font-bold mt-12 mb-4">Capital Structure Optimization</h3>
                    <p class="font-serif text-lg md:text-xl leading-relaxed mb-6">
                        The debt stack is a maturity and seniority ladder: Revolver (L + 250bps), Term Loan B (L + 450bps), Second Lien (L + 750bps), Mezzanine (12-14% PIK toggle). Each tranche has different covenants, amortization schedules, and call protection. The optimization problem: minimize WACC subject to maintaining liquidity and covenant cushion. The revolver stays undrawn (it's insurance, not funding). Term Loan B is the workhorse-7-year maturity, 1% annual amortization, EBITDA-based covenants with 25% cushion.
                    </p>
                    <p class="font-serif text-lg md:text-xl leading-relaxed mb-6">
                        The <span class="interactive-term" data-term="Blended Cost of Debt">blended cost of debt<span class="term-tooltip">Weighted average interest rate across all debt tranches, adjusted for fees, OID, and PIK accretion.</span></span> includes fees and OID (original issue discount). A Term Loan at L + 450bps with 2% OID and 50bps annual fee has an all-in cost of ~9.3% at current SOFR. Mezzanine at 12% PIK accretes-no cash interest for 3 years, then compounds. The effective cost is 12%, but the cash burden is deferred. This is how sponsors juice Year 1-3 IRR while creating a maturity wall problem in Year 6-7.
                    </p>
                    <h3 class="font-display text-2xl font-bold mt-12 mb-4">Covenant Engineering and Strategic Default</h3>
                    <p class="font-serif text-lg md:text-xl leading-relaxed mb-6">
                        Covenants are trip-wires. <span class="interactive-term" data-term="Leverage Covenant">Leverage covenant<span class="term-tooltip">A debt agreement clause requiring the borrower to maintain Debt/EBITDA below a specified threshold, tested quarterly.</span></span>: Total Debt / EBITDA &lt; 6.0x, stepping down to 5.0x by Year 4. <span class="interactive-term" data-term="FCCR">Fixed Charge Coverage<span class="term-tooltip">Ratio of EBITDA minus Capex to Interest + Required Debt Amortization, measuring ability to service fixed obligations.</span></span>: (EBITDA - Capex) / (Interest + Amort) &gt; 1.1x. Miss either, and you're in technical default. The lenders can accelerate, forcing refinancing at punitive rates-or they renegotiate for equity warrants and fee strips.
                        <span class="sparkline" data-values="1.5,1.4,1.3,1.2,1.1,1.0,0.95,1.1,1.3,1.5,1.7"></span>
                    </p>
                    <p class="font-serif text-lg md:text-xl leading-relaxed mb-6">
                        Savvy sponsors build in EBITDA addbacks: pro forma cost synergies, run-rate revenue from bolt-ons, non-recurring expenses. These are permitted adjustments under credit agreements. A $50M EBITDA business can report $65M "Adjusted EBITDA" by adding back $10M in "one-time" restructuring costs and $5M in "normalized" revenue. Lenders accept this because the alternative is losing the deal to a more aggressive lender. The game is: maximize addbacks without triggering fraud.
                    </p>
                    <h3 class="font-display text-2xl font-bold mt-12 mb-4">The IRR Mirage and Hidden Costs</h3>
                    <p class="font-serif text-lg md:text-xl leading-relaxed mb-6">
                        The headline IRR is a lie. LBO models show 25% IRR on 6.0x leverage. Strip out the leverage, and the equity return is 12%. The delta is financial engineering, not value creation. The formula: Levered Return = Unlevered Return + (Unlevered Return - Cost of Debt)  (Debt / Equity). When r_unlevered = 12% and r_debt = 8%, each 1x of leverage adds ~160bps to IRR. At 6x leverage and 40% equity check, you're adding 960bps. That's the ratchet.
                    </p>
                    <p class="font-serif text-lg md:text-xl leading-relaxed mb-6">
                        But leverage is symmetric. A 10% EBITDA miss in Year 2 triggers covenant breach, forces equity cure ($20M cash injection at 0% IRR), and resets the return profile. The hidden costs: management time spent on lender reporting, restricted ability to pursue growth Capex, and forced asset sales to delever during downturns. The model assumes smooth cash flows. Reality is lumpy. The difference between projected and actual is where sponsors earn their carry-or lose their shirts.
                        <span class="sparkline" data-values="25,24,22,18,15,10,5,-2,8,15,22"></span>
                    </p>
                `,
                nextSlug: "convexity"
            }
        };

        function generateSparkline(valuesStr) {
            const values = valuesStr.split(',').map(Number);
            const width = 60;
            const height = 20;
            const max = Math.max(...values);
            const min = Math.min(...values);
            const range = max - min || 1;
            
            const points = values.map((v, i) => {
                const x = (i / (values.length - 1)) * width;
                const y = height - ((v - min) / range) * height;
                return `${x},${y}`;
            }).join(' ');

            return `<svg class="sparkline" width="${width}" height="${height}" viewBox="0 0 ${width} ${height}">
                <path d="M${points}" />
            </svg>`;
        }

        // --- 2. INIT TOOLS & CLOCK ---
        lucide.createIcons();
        document.getElementById('year').textContent = new Date().getFullYear();

        function updateClock() {
            const now = new Date();
            const timeString = now.toLocaleTimeString('en-US', { 
                timeZone: 'America/Chicago', 
                hour12: false,
                hour: '2-digit', 
                minute: '2-digit', 
                second: '2-digit' 
            });
            document.getElementById('clock').textContent = timeString + " CST";
        }
        setInterval(updateClock, 1000);
        updateClock();

        // --- 3. TEXT SCRAMBLE EFFECT ---
        class TextScramble {
            constructor(el) {
                this.el = el;
                this.chars = '!<>-_\\/[]{}-=+*^?#________';
                this.update = this.update.bind(this);
            }
            setText(newText) {
                const oldText = this.el.innerText;
                const length = Math.max(oldText.length, newText.length);
                const promise = new Promise((resolve) => this.resolve = resolve);
                this.queue = [];
                for (let i = 0; i < length; i++) {
                    const from = oldText[i] || '';
                    const to = newText[i] || '';
                    const start = Math.floor(Math.random() * 25);
                    const end = start + Math.floor(Math.random() * 30);
                    this.queue.push({ from, to, start, end });
                }
                cancelAnimationFrame(this.frameRequest);
                this.frame = 0;
                this.update();
                return promise;
            }
            update() {
                let output = '';
                let complete = 0;
                for (let i = 0, n = this.queue.length; i < n; i++) {
                    let { from, to, start, end, char } = this.queue[i];
                    if (this.frame >= end) {
                        complete++;
                        output += to;
                    } else if (this.frame >= start) {
                        if (!char || Math.random() < 0.35) {
                            char = this.randomChar();
                            this.queue[i].char = char;
                        }
                        output += `<span class="text-neutral-600">${char}</span>`;
                    } else {
                        output += from;
                    }
                }
                this.el.innerHTML = output;
                if (complete === this.queue.length) {
                    this.resolve();
                } else {
                    this.frameRequest = requestAnimationFrame(this.update);
                    this.frame++;
                }
            }
            randomChar() {
                return this.chars[Math.floor(Math.random() * this.chars.length)];
            }
        }

        // --- 4. MODAL LOGIC ---
        const modal = document.getElementById('project-modal');
        const modalBody = document.getElementById('modal-body');
        const closeModal = document.getElementById('close-modal');
        const progressBar = document.getElementById('reading-progress');
        
        function openModal(id, type = 'project') {
            let data;
            const content = modal.querySelector('.modal-content');
            
            // Preload portfolio widgets if opening point72
            if (id === 'point72') {
                window.preloadPortfolioWidgets();
            }
            
            // Reset classes
            content.classList.remove('paper-mode');
            
            if (type === 'writing') {
                data = writingData[id];
                if (!data) return;
                
                content.classList.add('paper-mode');
                
                // Editorial Layout
                modalBody.innerHTML = `
                    <div class="max-w-3xl mx-auto">
                        <!-- Header Block -->
                        <div class="modal-stagger text-center mb-16" style="transition-delay: 0.1s">
                            <div class="font-mono text-xs tracking-[0.2em] text-neutral-500 mb-6 uppercase">
                                ${data.meta.category} /// ${data.meta.date} /// ${data.meta.readTime} READ
                            </div>
                            <h1 class="font-playfair italic text-5xl md:text-7xl font-bold mb-8 leading-tight text-off-black">
                                ${data.title}
                            </h1>
                            <p class="font-sans font-bold text-lg md:text-xl text-neutral-600 max-w-xl mx-auto leading-relaxed">
                                ${data.lede}
                            </p>
                        </div>

                        <!-- Body Content -->
                        <div class="modal-stagger" style="transition-delay: 0.2s">
                            ${data.content}
                        </div>

                        <!-- Next Article Hook -->
                        <div class="modal-stagger mt-20 pt-12 border-t border-neutral-300" style="transition-delay: 0.3s">
                            <p class="font-mono text-xs text-neutral-400 uppercase tracking-widest mb-4">Up Next</p>
                            <div class="group cursor-pointer" onclick="openModal('${data.nextSlug}', 'writing')">
                                <h3 class="font-display text-3xl font-medium group-hover:translate-x-2 transition-transform duration-300">
                                    ${writingData[data.nextSlug].title} <i data-lucide="arrow-right" class="inline-block w-6 h-6 ml-2 opacity-0 group-hover:opacity-100 transition-opacity"></i>
                                </h3>
                            </div>
                        </div>
                    </div>
                `;

                // Render Sparklines
                modalBody.querySelectorAll('.sparkline').forEach(el => {
                    if (el.dataset.values) {
                        el.outerHTML = generateSparkline(el.dataset.values);
                    }
                });

            } else {
                // Standard Project Layout
                data = projectData[id];
                if (!data) return;

                // Calculate Read Time
                const wordCount = data.description.split(' ').length + data.details.split(' ').length;
                const readTime = Math.ceil(wordCount / 200);

                modalBody.innerHTML = `
                    <div class="modal-stagger" style="transition-delay: 0.1s">
                        <div class="flex justify-between items-start mb-2">
                            <h2 class="font-display text-4xl md:text-6xl font-bold text-white">${data.title}</h2>
                            <span class="font-mono text-xs text-neutral-500 border border-neutral-800 px-2 py-1 rounded">${readTime} MIN READ</span>
                        </div>
                        <p class="font-sans text-lg text-neutral-400 mb-6">${data.subtitle}</p>
                        <div class="flex flex-wrap gap-2 mb-8">
                            ${data.tags.map(tag => `<span class="px-3 py-1 bg-white/10 text-xs font-mono uppercase text-neutral-300 tracking-widest">${tag}</span>`).join('')}
                        </div>
                    </div>
                    <div class="modal-stagger" style="transition-delay: 0.2s">
                        <p class="font-display text-xl md:text-2xl leading-relaxed text-white font-light border-l-2 border-white/30 pl-6 mb-8 drop-cap">
                            ${data.description}
                        </p>
                    </div>
                    <div class="modal-stagger" style="transition-delay: 0.3s">
                        ${data.details}
                    </div>
                `;
            }

            modal.classList.add('active');
            document.body.classList.add('modal-open');
            lockBodyScroll();
            lucide.createIcons();
        }
        
        // Helper functions for body scroll lock
        function lockBodyScroll() {
            const scrollbarWidth = window.innerWidth - document.documentElement.clientWidth;
            document.body.style.overflow = 'hidden';
            document.body.style.paddingRight = scrollbarWidth + 'px';
        }
        
        function unlockBodyScroll() {
            document.body.style.overflow = '';
            document.body.style.paddingRight = '';
        }

        function closeModalFunc() {
            modal.classList.remove('active');
            document.body.classList.remove('modal-open');
            progressBar.style.width = '0%';
            
            // Clear all active intervals to prevent memory leaks
            if (analysisTimerInterval) {
                clearInterval(analysisTimerInterval);
                analysisTimerInterval = null;
            }
            Object.keys(metricIntervals).forEach(key => {
                clearInterval(metricIntervals[key]);
                delete metricIntervals[key];
            });
            
            // Reset modal state with proper timing for smooth exit
            setTimeout(() => {
                modal.querySelector('.modal-content').classList.remove('paper-mode');
                modalBody.innerHTML = ''; // Clear content to reset animations
                unlockBodyScroll();
            }, 600); // Increased to match longer transition duration
        }

        // Reading Progress & Scroll-to-Blur
        modal.querySelector('.modal-content').addEventListener('scroll', (e) => {
            const el = e.target;
            const scrollTop = el.scrollTop;
            const scrollHeight = el.scrollHeight - el.clientHeight;
            const progress = (scrollTop / scrollHeight) * 100;
            progressBar.style.width = `${progress}%`;

            // Scroll-to-Blur Effect for Header
            if (modal.querySelector('.modal-content').classList.contains('paper-mode')) {
                const header = modalBody.querySelector('.text-center');
                if (header) {
                    const opacity = Math.max(0, 1 - scrollTop / 300);
                    const blur = Math.min(10, scrollTop / 30);
                    header.style.opacity = opacity;
                    header.style.filter = `blur(${blur}px)`;
                }
            }
        });

        // Attach listeners to cards
        document.querySelectorAll('.project-card').forEach(card => {
            card.addEventListener('click', () => {
                const projectId = card.dataset.project;
                openModal(projectId, 'project');
            });
        });

        // Attach listeners to writing items
        document.querySelectorAll('.writing-item').forEach(item => {
            const handleOpen = () => {
                const writingId = item.dataset.writing;
                openModal(writingId, 'writing');
            };
            item.addEventListener('click', handleOpen);
            // Keyboard support
            item.addEventListener('keydown', (e) => {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    handleOpen();
                }
            });
        });

        // Enhanced form submission handling
        document.addEventListener('submit', async function(e) {
            if (e.target.tagName === 'FORM' && e.target.action.includes('formspree')) {
                e.preventDefault();
                
                const form = e.target;
                const submitBtn = form.querySelector('button[type="submit"]');
                const originalText = submitBtn.textContent;
                
                // Disable form and show loading state
                submitBtn.disabled = true;
                submitBtn.classList.add('opacity-50', 'cursor-not-allowed');
                submitBtn.textContent = 'SENDING...';
                
                try {
                    const response = await fetch(form.action, {
                        method: 'POST',
                        body: new FormData(form),
                        headers: { 'Accept': 'application/json' }
                    });
                    
                    if (response.ok) {
                        // Success state
                        submitBtn.classList.remove('bg-white', 'text-black');
                        submitBtn.classList.add('bg-white', 'text-black');
                        submitBtn.textContent = ' MESSAGE SENT!';
                        form.reset();
                        
                        // Reset after 3 seconds
                        setTimeout(() => {
                            submitBtn.disabled = false;
                            submitBtn.classList.remove('opacity-50', 'cursor-not-allowed');
                            submitBtn.textContent = originalText;
                        }, 3000);
                    } else {
                        throw new Error('Form submission failed');
                    }
                } catch (error) {
                    // Error state
                    submitBtn.classList.add('bg-red-500', 'text-white');
                    submitBtn.textContent = ' ERROR - TRY AGAIN';
                    
                    setTimeout(() => {
                        submitBtn.disabled = false;
                        submitBtn.classList.remove('opacity-50', 'cursor-not-allowed', 'bg-red-500');
                        submitBtn.classList.add('bg-white');
                        submitBtn.textContent = originalText;
                    }, 3000);
                }
            }
        });
        const serviceData = {
            financial: {
                title: "FINANCIAL CONSULTING",
                subtitle: "Strategic Analysis & Decision Architecture",
                description: "Let's discuss how strategic financial consulting can transform your organization's decision-making process.",
                formspreeId: "YOUR_FORMSPREE_ID_HERE",
                services: [
                    "Financial Modeling & Valuation",
                    "Investment Thesis Development",
                    "Strategic Planning & Scenario Analysis",
                    "Risk Assessment & Management",
                    "M&A Due Diligence Support",
                    "Custom Financial Tools & Dashboards"
                ]
            },
            website: {
                title: "WEBSITE DESIGN",
                subtitle: "Bespoke Digital Experiences",
                description: "Let's craft a digital experience that captures your brand's unique essence and converts visitors into believers.",
                formspreeId: "xzznvvzw",
                services: [
                    "Custom Website Design & Development",
                    "Interactive & Generative Art",
                    "E-Commerce Solutions",
                    "Portfolio & Personal Branding Sites",
                    "Landing Pages & Conversion Optimization",
                    "Web3 & Blockchain Interfaces"
                ]
            }
        };

        function openServiceModal(serviceId) {
            const data = serviceData[serviceId];
            if (!data) return;

            const content = modal.querySelector('.modal-content');
            content.classList.remove('paper-mode');

            if (serviceId === 'financial') {
                modalBody.innerHTML = `
                    <div class="max-w-[1600px] mx-auto">
                        <!-- Header -->
                        <div class="modal-stagger mb-32" style="transition-delay: 0.05s">
                            <div class="max-w-6xl">
                                <div class="flex items-center gap-4 mb-12">
                                    <div class="w-2 h-2 bg-white/40 rounded-full animate-pulse"></div>
                                    <div class="font-mono text-xs text-neutral-600 uppercase tracking-[0.5em]">Live Financial Analysis</div>
                                </div>
                                <h1 class="font-display text-8xl md:text-9xl font-medium mb-12 tracking-tight leading-[0.85]">
                                    <span class="typing-text" id="main-title">${data.title}</span>
                                </h1>
                                <p class="font-sans text-2xl text-neutral-400 leading-[1.6] max-w-4xl opacity-0 transition-opacity duration-300" id="financial-subtitle-text" style="transition-delay: 1.8s;">
                                    ${data.subtitle}
                                </p>
                            </div>
                        </div>

                        <!-- Main Content Grid -->
                        <div class="grid grid-cols-1 lg:grid-cols-5 gap-20 mb-40">
                            
                            <!-- Left: Spreadsheet Analysis (3/5) -->
                            <div class="lg:col-span-3 space-y-12 modal-stagger" style="transition-delay: 0.15s">
                                
                                <div class="space-y-10">
                                    <div class="flex items-baseline gap-6 pb-6 border-b border-white/10">
                                        <h2 class="font-display text-3xl font-medium tracking-tight">Financial Statements</h2>
                                        <span class="font-mono text-xs text-neutral-600 uppercase tracking-[0.3em]">FY 2024</span>
                                    </div>

                                    <!-- Statement Tabs -->
                                    <div class="flex gap-2 mb-6">
                                        <button onclick="switchStatement('income')" id="tab-income" class="statement-tab active font-mono text-xs px-4 py-2 border border-white/20 bg-white/10 hover:bg-white/15 transition-all duration-300 uppercase tracking-[0.3em]">
                                            Income Statement
                                        </button>
                                        <button onclick="switchStatement('balance')" id="tab-balance" class="statement-tab font-mono text-xs px-4 py-2 border border-white/10 hover:border-white/20 hover:bg-white/10 transition-all duration-300 uppercase tracking-[0.3em] text-neutral-500">
                                            Balance Sheet
                                        </button>
                                        <button onclick="switchStatement('cashflow')" id="tab-cashflow" class="statement-tab font-mono text-xs px-4 py-2 border border-white/10 hover:border-white/20 hover:bg-white/10 transition-all duration-300 uppercase tracking-[0.3em] text-neutral-500">
                                            Cash Flow
                                        </button>
                                    </div>

                                    <!-- Terminal Window -->
                                    <div class="border border-white/10 overflow-hidden group hover:border-white/20 transition-all duration-700 shadow-2xl shadow-black/50">
                                        <!-- Terminal Header -->
                                        <div class="flex items-center justify-between px-8 py-6 border-b border-white/10 bg-[#0A0A0A]">
                                            <div class="flex items-center gap-4">
                                                <div class="flex gap-2">
                                                    <div class="w-3 h-3 rounded-full bg-neutral-800 group-hover:bg-red-500/30 transition-colors duration-500"></div>
                                                    <div class="w-3 h-3 rounded-full bg-neutral-800 group-hover:bg-white/30 transition-colors duration-500" style="transition-delay: 50ms"></div>
                                                    <div class="w-3 h-3 rounded-full bg-neutral-800 group-hover:bg-white/30 transition-colors duration-500" style="transition-delay: 100ms"></div>
                                                </div>
                                                <span class="font-mono text-xs text-neutral-500 tracking-wider" id="statement-filename">GREENSCAPE_INCOME_FY2024.xlsx</span>
                                            </div>
                                            <div id="analysis-timer" class="font-mono text-xs text-neutral-600 tracking-wider tabular-nums">00:00</div>
                                        </div>

                                        <!-- Spreadsheet Container -->
                                        <div class="relative bg-[#030303] p-10 overflow-auto scrollbar-thin scrollbar-track-transparent scrollbar-thumb-white/10" style="max-height: 700px;" id="spreadsheet-container">
                                            <div id="income-statement" class="font-mono text-xs statement-content active"></div>
                                            <div id="balance-statement" class="font-mono text-xs statement-content hidden"></div>
                                            <div id="cashflow-statement" class="font-mono text-xs statement-content hidden"></div>
                                            
                                            <!-- Cell Highlight -->
                                            <div id="cell-highlight" class="absolute pointer-events-none border-2 border-white/100 transition-all duration-700 ease-out hidden shadow-lg shadow-white/10"></div>
                                            
                                            <!-- Analyst Cursor -->
                                            <div id="analyst-cursor" class="absolute pointer-events-none transition-all duration-1000 ease-out hidden">
                                                <div class="w-1 h-1 bg-white shadow-lg shadow-white/50"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Analysis Commentary -->
                                <div id="analysis-notes" class="space-y-6"></div>

                            </div>

                            <!-- Right: Key Metrics (2/5) -->
                            <div class="lg:col-span-2 modal-stagger" style="transition-delay: 0.2s">
                                
                                <div class="sticky top-8 space-y-16">
                                    <div class="space-y-10">
                                        <div class="pb-6 border-b border-white/10">
                                            <h2 class="font-display text-3xl font-medium tracking-tight mb-3">Key Metrics</h2>
                                            <p class="font-mono text-xs text-neutral-600 uppercase tracking-[0.3em]">Performance Indicators</p>
                                        </div>

                                        <!-- Metrics Grid -->
                                        <div class="space-y-12" id="metrics-container">
                                            <div class="border-l-2 border-white/20 pl-8 opacity-0 transition-all duration-1000" id="metric-1">
                                                <div class="text-xs text-neutral-600 mb-5 uppercase tracking-[0.4em] font-mono" id="metric-1-label">Gross Margin</div>
                                                <div class="text-6xl font-display font-medium text-white mb-8 tracking-tight transition-all duration-700" id="metric-1-value">0.0<span class="text-neutral-700">%</span></div>
                                                <div class="h-0.5 bg-white/10 w-full relative overflow-hidden rounded-full">
                                                    <div class="absolute inset-y-0 left-0 bg-gradient-to-r from-white to-neutral-400 rounded-full" style="width: 0%; transition: width 2000ms cubic-bezier(0.4, 0, 0.2, 1);" id="metric-1-bar"></div>
                                                </div>
                                                <div class="text-xs text-neutral-600 mt-5 font-sans" id="metric-1-benchmark">Industry benchmark: 55.0%</div>
                                            </div>

                                            <div class="border-l-2 border-white/20 pl-8 opacity-0 transition-all duration-1000" id="metric-2">
                                                <div class="text-xs text-neutral-600 mb-5 uppercase tracking-[0.4em] font-mono" id="metric-2-label">EBITDA Margin</div>
                                                <div class="text-6xl font-display font-medium text-white mb-8 tracking-tight transition-all duration-700" id="metric-2-value">0.0<span class="text-neutral-700">%</span></div>
                                                <div class="h-0.5 bg-white/10 w-full relative overflow-hidden rounded-full">
                                                    <div class="absolute inset-y-0 left-0 bg-gradient-to-r from-white to-neutral-400 rounded-full" style="width: 0%; transition: width 2000ms cubic-bezier(0.4, 0, 0.2, 1);" id="metric-2-bar"></div>
                                                </div>
                                                <div class="text-xs text-neutral-600 mt-5 font-sans" id="metric-2-benchmark">Industry benchmark: 28.0%</div>
                                            </div>

                                            <div class="border-l-2 border-white/20 pl-8 opacity-0 transition-all duration-1000" id="metric-3">
                                                <div class="text-xs text-neutral-600 mb-5 uppercase tracking-[0.4em] font-mono" id="metric-3-label">Net Margin</div>
                                                <div class="text-6xl font-display font-medium text-white mb-8 tracking-tight transition-all duration-700" id="metric-3-value">0.0<span class="text-neutral-700">%</span></div>
                                                <div class="h-0.5 bg-white/10 w-full relative overflow-hidden rounded-full">
                                                    <div class="absolute inset-y-0 left-0 bg-gradient-to-r from-white to-neutral-400 rounded-full" style="width: 0%; transition: width 2000ms cubic-bezier(0.4, 0, 0.2, 1);" id="metric-3-bar"></div>
                                                </div>
                                                <div class="text-xs text-neutral-600 mt-5 font-sans" id="metric-3-benchmark">Industry benchmark: 18.0%</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>

                        <!-- Why Work With Me -->
                        <div class="modal-stagger border-t border-white/10 pt-40 mb-40" style="transition-delay: 0.25s">
                            <div class="max-w-6xl">
                                <div class="mb-24">
                                    <div class="font-mono text-xs uppercase tracking-[0.5em] text-neutral-600 mb-10">Process</div>
                                    <h2 class="font-display text-6xl md:text-7xl font-medium mb-8 tracking-tight leading-[0.95]">
                                        How We Work Together
                                    </h2>
                                </div>

                                <div class="grid grid-cols-1 md:grid-cols-4 gap-16">
                                    <div class="group">
                                        <div class="text-8xl font-display font-medium text-white/5 mb-8 group-hover:text-white/10 transition-colors duration-700">01</div>
                                        <h3 class="font-display text-2xl mb-6 leading-tight">Understand<br/>& Frame</h3>
                                        <p class="font-sans text-neutral-500 leading-[1.9] text-sm">
                                            Deep dive into your business model, competitive landscape, and strategic objectives to frame the right questions.
                                        </p>
                                    </div>

                                    <div class="group">
                                        <div class="text-8xl font-display font-medium text-white/5 mb-8 group-hover:text-white/10 transition-colors duration-700">02</div>
                                        <h3 class="font-display text-2xl mb-6 leading-tight">Model<br/>& Analyze</h3>
                                        <p class="font-sans text-neutral-500 leading-[1.9] text-sm">
                                            Build sophisticated financial models with institutional-grade rigor. Scenario testing and sensitivity analysis included.
                                        </p>
                                    </div>

                                    <div class="group">
                                        <div class="text-8xl font-display font-medium text-white/5 mb-8 group-hover:text-white/10 transition-colors duration-700">03</div>
                                        <h3 class="font-display text-2xl mb-6 leading-tight">Synthesize<br/>& Deliver</h3>
                                        <p class="font-sans text-neutral-500 leading-[1.9] text-sm">
                                            Decision-ready outputs with clear recommendations. Interactive models your team can own and iterate on.
                                        </p>
                                    </div>

                                    <div class="group">
                                        <div class="text-8xl font-display font-medium text-white/5 mb-8 group-hover:text-white/10 transition-colors duration-700">04</div>
                                        <h3 class="font-display text-2xl mb-6 leading-tight">Support<br/>& Iterate</h3>
                                        <p class="font-sans text-neutral-500 leading-[1.9] text-sm">
                                            Post-delivery support to ensure full adoption. Model updates and ongoing strategic counsel as needed.
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Contact -->
                        <div class="modal-stagger border-t border-white/10 pt-40" style="transition-delay: 0.3s">
                            <div class="max-w-3xl mx-auto">
                                <div class="mb-16 text-center">
                                    <div class="font-mono text-xs uppercase tracking-[0.5em] text-neutral-600 mb-6">Get Started</div>
                                    <h2 class="font-display text-5xl font-medium mb-6 tracking-tight">Let's Discuss Your Project</h2>
                                    <p class="font-sans text-lg text-neutral-400 leading-relaxed">
                                        Share what you're working on. I'll respond within 48 hours with initial thoughts and potential next steps.
                                    </p>
                                </div>

                            <form action="https://formspree.io/f/xyzrppzo" method="POST" class="space-y-8">
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                                    <div>
                                        <input type="text" name="name" required 
                                            class="w-full bg-transparent border-b border-white/20 pb-4 text-white font-sans text-base placeholder:text-neutral-600 focus:border-white focus:outline-none transition-colors duration-300" 
                                            placeholder="Your Name *">
                                    </div>
                                    <div>
                                        <input type="email" name="email" required 
                                            class="w-full bg-transparent border-b border-white/20 pb-4 text-white font-sans text-base placeholder:text-neutral-600 focus:border-white focus:outline-none transition-colors duration-300" 
                                            placeholder="Email Address *">
                                    </div>
                                </div>
                                
                                <div>
                                    <input type="text" name="company" 
                                        class="w-full bg-transparent border-b border-white/20 pb-4 text-white font-sans text-base placeholder:text-neutral-600 focus:border-white focus:outline-none transition-colors duration-300" 
                                        placeholder="Company">
                                </div>

                                <div>
                                    <textarea name="message" required rows="4" 
                                        class="w-full bg-transparent border-b border-white/20 pb-4 text-white font-sans text-base placeholder:text-neutral-600 focus:border-white focus:outline-none transition-colors duration-300 resize-none" 
                                        placeholder="Tell me about your needs... *"></textarea>
                                </div>

                                <div class="pt-8">
                                    <button type="submit" 
                                        class="w-full bg-white text-black font-display text-base font-medium py-5 px-8 hover:bg-neutral-200 hover:shadow-2xl hover:shadow-white/20 transition-all duration-500 uppercase tracking-[0.2em]">
                                        Submit Inquiry
                                    </button>
                                    <div class="flex items-center justify-center gap-8 mt-8 text-xs text-neutral-600 font-mono">
                                        <div class="flex items-center gap-2">
                                            <i data-lucide="shield-check" class="w-3 h-3"></i>
                                            <span>Confidential</span>
                                        </div>
                                        <div class="flex items-center gap-2">
                                            <i data-lucide="clock" class="w-3 h-3"></i>
                                            <span>48hr Response</span>
                                        </div>
                                        <div class="flex items-center gap-2">
                                            <i data-lucide="check-circle" class="w-3 h-3"></i>
                                            <span>No Obligation</span>
                                        </div>
                                    </div>
                                </div>
                            </form>
                            </div>
                        </div>
                    </div>
                `;

                setTimeout(() => {
                    initLiveAnalysis();
                }, 300);

            } else if (serviceId === 'website') {
                modalBody.innerHTML = `
                    <div class="max-w-[1600px] mx-auto">
                        <!-- Hero Header -->
                        <div class="modal-stagger mb-32" style="transition-delay: 0.05s">
                            <div class="max-w-6xl">
                                <div class="flex items-center gap-4 mb-12">
                                    <div class="w-2 h-2 bg-white/40 rounded-full animate-pulse"></div>
                                    <div class="font-mono text-xs text-neutral-600 uppercase tracking-[0.5em]">Live Design System</div>
                                </div>
                                <h1 class="font-display text-8xl md:text-9xl font-medium mb-12 tracking-tight leading-[0.85]">
                                    <span class="typing-text" id="website-main-title">${data.title}</span>
                                </h1>
                                <p class="font-sans text-2xl text-neutral-400 leading-[1.6] max-w-4xl opacity-0 transition-opacity duration-300" id="website-subtitle-text" style="transition-delay: 1.8s;">
                                    ${data.subtitle}
                                </p>
                            </div>
                        </div>

                        <!-- Main Content Grid -->
                        <div class="grid grid-cols-1 lg:grid-cols-5 gap-16 mb-32">
                            <!-- Left: Interactive Design Showcase (3/5) -->
                            <div class="lg:col-span-3 modal-stagger space-y-16" style="transition-delay: 0.1s">
                                
                                <!-- Design Mode Tabs -->
                                <div class="border-b border-white/10 flex gap-8 mb-8" id="design-tabs">
                                    <button class="design-tab active pb-4 font-mono text-xs uppercase tracking-[0.3em] text-white border-b-2 border-white transition-all duration-300" data-mode="layout">Layout</button>
                                    <button class="design-tab pb-4 font-mono text-xs uppercase tracking-[0.3em] text-neutral-600 border-b-2 border-transparent hover:text-white hover:border-white/30 transition-all duration-300" data-mode="typography">Typography</button>
                                    <button class="design-tab pb-4 font-mono text-xs uppercase tracking-[0.3em] text-neutral-600 border-b-2 border-transparent hover:text-white hover:border-white/30 transition-all duration-300" data-mode="motion">Motion</button>
                                </div>

                                <!-- Design Content Container -->
                                <div class="design-modes relative">
                                    <!-- Layout Mode -->
                                    <div id="design-layout" class="design-content">
                                        <div class="space-y-16">
                                            <!-- Browser Window -->
                                            <div class="border border-white/10 overflow-hidden shadow-2xl shadow-black/50 opacity-0 design-element" style="animation: fadeInDesign 0.8s ease-out 0.2s forwards;">
                                                <!-- Browser Header -->
                                                <div class="bg-[#0A0A0A] border-b border-white/10 px-4 py-3 flex items-center gap-3">
                                                    <div class="flex gap-2">
                                                        <div class="w-3 h-3 rounded-full bg-red-500/30"></div>
                                                        <div class="w-3 h-3 rounded-full bg-white/30"></div>
                                                        <div class="w-3 h-3 rounded-full bg-white/30"></div>
                                                    </div>
                                                    <div class="flex-1 flex items-center gap-2 px-4 py-1.5 bg-white/10 rounded font-mono text-xs text-neutral-600">
                                                        <i data-lucide="lock" class="w-3 h-3"></i>
                                                        <span>yourwebsite.com</span>
                                                    </div>
                                                </div>

                                                <!-- Browser Content -->
                                                <div class="bg-[#030303] p-12 relative" style="min-height: 500px;" id="browser-viewport">
                                                    <!-- Grid Overlay with Pulse -->
                                                    <div class="absolute inset-0 grid grid-cols-12 gap-px pointer-events-none" id="grid-overlay" style="animation: gridPulse 4s ease-in-out infinite;">
                                                        <div class="border-l border-white/20"></div>
                                                        <div class="border-l border-white/20"></div>
                                                        <div class="border-l border-white/20"></div>
                                                        <div class="border-l border-white/20"></div>
                                                        <div class="border-l border-white/20"></div>
                                                        <div class="border-l border-white/20"></div>
                                                        <div class="border-l border-white/20"></div>
                                                        <div class="border-l border-white/20"></div>
                                                        <div class="border-l border-white/20"></div>
                                                        <div class="border-l border-white/20"></div>
                                                        <div class="border-l border-white/20"></div>
                                                        <div class="border-l border-white/20"></div>
                                                    </div>
                                                    
                                                    <!-- Building Cursor Indicator -->
                                                    <div class="absolute top-4 right-4 flex items-center gap-2 z-20">
                                                        <div class="w-1.5 h-1.5 bg-white rounded-full" style="animation: cursorBlink 1s infinite;"></div>
                                                        <span class="font-mono text-xs text-white/60">RENDERING</span>
                                                    </div>
                                                    
                                                    <!-- Mock Content -->
                                                    <div class="relative z-10 space-y-10" id="preview-content">
                                                        <!-- Hero Section -->
                                                        <div class="opacity-0 preview-element" style="animation: fadeInDesign 0.6s ease-out 0.3s forwards;">
                                                            <div class="h-14 bg-gradient-to-r from-white/30 via-white/20 to-white/5 rounded-lg flex items-center px-6 shadow-lg shadow-white/5" style="width: 45%;">
                                                                <div class="h-3 bg-white/100 rounded animate-pulse" style="width: 60%;"></div>
                                                            </div>
                                                        </div>
                                                        
                                                        <!-- Body Text -->
                                                        <div class="space-y-3 opacity-0 preview-element" style="animation: fadeInDesign 0.6s ease-out 0.5s forwards;">
                                                            <div class="h-4 bg-gradient-to-r from-white/15 to-white/5 rounded" style="width: 75%;"></div>
                                                            <div class="h-4 bg-gradient-to-r from-white/15 to-white/5 rounded" style="width: 90%;"></div>
                                                            <div class="h-4 bg-gradient-to-r from-white/15 to-white/5 rounded" style="width: 65%;"></div>
                                                        </div>

                                                        <!-- CTA Button -->
                                                        <div class="opacity-0 preview-element" style="animation: fadeInDesign 0.6s ease-out 0.7s forwards;">
                                                            <div class="inline-flex items-center gap-3 bg-white/95 hover:bg-white hover:scale-105 transition-all duration-500 px-8 py-4 rounded-lg shadow-xl shadow-white/30 cursor-pointer group">
                                                                <div class="h-3 bg-black/80 rounded" style="width: 100px;"></div>
                                                                <div class="w-4 h-4 border-2 border-black/80 rounded-full flex items-center justify-center">
                                                                    <div class="w-2 h-2 bg-black/80 rounded-full transform group-hover:translate-x-1 transition-transform duration-300"></div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        
                                                        <!-- Feature Cards -->
                                                        <div class="grid grid-cols-3 gap-6 mt-16 opacity-0 preview-element" style="animation: fadeInDesign 0.6s ease-out 0.9s forwards;">
                                                            <div class="border border-white/10 bg-white/10 backdrop-blur-sm p-6 rounded-lg hover:border-white/30 hover:bg-white/10 hover:scale-105 transition-all duration-500 cursor-pointer group shadow-lg shadow-black/20">
                                                                <div class="w-12 h-12 bg-white/20 rounded-lg mb-4 flex items-center justify-center group-hover:bg-white/40 group-hover:shadow-lg group-hover:shadow-white/30 transition-all duration-500">
                                                                    <div class="w-6 h-6 bg-white/70 rounded group-hover:rotate-12 transition-transform duration-500"></div>
                                                                </div>
                                                                <div class="h-3 bg-white/30 rounded mb-3 group-hover:bg-white/40 transition-colors" style="width: 70%;"></div>
                                                                <div class="space-y-2">
                                                                    <div class="h-2 bg-white/15 rounded group-hover:bg-white/20 transition-colors" style="width: 90%;"></div>
                                                                    <div class="h-2 bg-white/15 rounded group-hover:bg-white/20 transition-colors" style="width: 75%;"></div>
                                                                </div>
                                                            </div>
                                                            <div class="border border-white/10 bg-white/10 backdrop-blur-sm p-6 rounded-lg hover:border-white/30 hover:bg-white/10 hover:scale-105 transition-all duration-500 cursor-pointer group shadow-lg shadow-black/20">
                                                                <div class="w-12 h-12 bg-white/20 rounded-lg mb-4 flex items-center justify-center group-hover:bg-white/40 group-hover:shadow-lg group-hover:shadow-white/30 transition-all duration-500">
                                                                    <div class="w-6 h-6 bg-white/70 rounded group-hover:rotate-12 transition-transform duration-500"></div>
                                                                </div>
                                                                <div class="h-3 bg-white/30 rounded mb-3 group-hover:bg-white/40 transition-colors" style="width: 65%;"></div>
                                                                <div class="space-y-2">
                                                                    <div class="h-2 bg-white/15 rounded group-hover:bg-white/20 transition-colors" style="width: 85%;"></div>
                                                                    <div class="h-2 bg-white/15 rounded group-hover:bg-white/20 transition-colors" style="width: 80%;"></div>
                                                                </div>
                                                            </div>
                                                            <div class="border border-white/10 bg-white/10 backdrop-blur-sm p-6 rounded-lg hover:border-white/30 hover:bg-white/10 hover:scale-105 transition-all duration-500 cursor-pointer group shadow-lg shadow-black/20">
                                                                <div class="w-12 h-12 bg-white/20 rounded-lg mb-4 flex items-center justify-center group-hover:bg-white/40 group-hover:shadow-lg group-hover:shadow-white/30 transition-all duration-500">
                                                                    <div class="w-6 h-6 bg-white/70 rounded group-hover:rotate-12 transition-transform duration-500"></div>
                                                                </div>
                                                                <div class="h-3 bg-white/30 rounded mb-3 group-hover:bg-white/40 transition-colors" style="width: 75%;"></div>
                                                                <div class="space-y-2">
                                                                    <div class="h-2 bg-white/15 rounded group-hover:bg-white/20 transition-colors" style="width: 80%;"></div>
                                                                    <div class="h-2 bg-white/15 rounded group-hover:bg-white/20 transition-colors" style="width: 70%;"></div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <!-- Device Switcher -->
                                                <div class="bg-[#0A0A0A] border-t border-white/10 px-6 py-3 flex items-center justify-center gap-2">
                                                    <button class="device-switch px-4 py-2 font-mono text-xs hover:bg-white/10 transition-all duration-300 flex items-center gap-2" data-device="mobile">
                                                        <i data-lucide="smartphone" class="w-3 h-3"></i>
                                                        <span>Mobile</span>
                                                    </button>
                                                    <button class="device-switch px-4 py-2 font-mono text-xs hover:bg-white/10 transition-all duration-300 flex items-center gap-2" data-device="tablet">
                                                        <i data-lucide="tablet" class="w-3 h-3"></i>
                                                        <span>Tablet</span>
                                                    </button>
                                                    <button class="device-switch active px-4 py-2 font-mono text-xs bg-white/10 transition-all duration-300 flex items-center gap-2" data-device="desktop">
                                                        <i data-lucide="monitor" class="w-3 h-3"></i>
                                                        <span>Desktop</span>
                                                    </button>
                                                </div>
                                            </div>

                                            <!-- Responsive Breakpoints -->
                                            <div class="border border-white/10 p-8 opacity-0 design-element" style="animation: fadeInDesign 0.8s ease-out 0.4s forwards;">
                                                <div class="font-mono text-xs text-neutral-600 mb-6 uppercase tracking-widest">Responsive System</div>
                                                <div class="grid grid-cols-4 gap-4">
                                                    <div class="text-center p-4 border border-white/10 bg-white/10">
                                                        <i data-lucide="smartphone" class="w-6 h-6 mx-auto mb-2 text-neutral-500"></i>
                                                        <div class="font-mono text-xs text-white mb-1">Mobile</div>
                                                        <div class="font-mono text-[10px] text-neutral-600">< 768px</div>
                                                    </div>
                                                    <div class="text-center p-4 border border-white/10 bg-white/10">
                                                        <i data-lucide="tablet" class="w-6 h-6 mx-auto mb-2 text-neutral-500"></i>
                                                        <div class="font-mono text-xs text-white mb-1">Tablet</div>
                                                        <div class="font-mono text-[10px] text-neutral-600">768px - 1024px</div>
                                                    </div>
                                                    <div class="text-center p-4 border border-white/10 bg-white/10">
                                                        <i data-lucide="monitor" class="w-6 h-6 mx-auto mb-2 text-white"></i>
                                                        <div class="font-mono text-xs text-white mb-1">Desktop</div>
                                                        <div class="font-mono text-[10px] text-neutral-400">1024px - 1440px</div>
                                                    </div>
                                                    <div class="text-center p-4 border border-white/10 bg-white/10">
                                                        <i data-lucide="tv" class="w-6 h-6 mx-auto mb-2 text-neutral-500"></i>
                                                        <div class="font-mono text-xs text-white mb-1">Large</div>
                                                        <div class="font-mono text-[10px] text-neutral-600">&gt; 1440px</div>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- Component Library Preview -->
                                            <div class="border border-white/10 p-8 opacity-0 design-element" style="animation: fadeInDesign 0.8s ease-out 0.6s forwards;">
                                                <div class="font-mono text-xs text-neutral-600 mb-6 uppercase tracking-widest">Component Library</div>
                                                <div class="space-y-6">
                                                    <div class="flex flex-wrap gap-3">
                                                        <button class="px-8 py-4 bg-white text-black font-display text-sm uppercase tracking-wider hover:bg-neutral-200 hover:scale-105 transition-all duration-300 shadow-lg shadow-white/10">Primary CTA</button>
                                                        <button class="px-8 py-4 border border-white/20 text-white font-display text-sm uppercase tracking-wider hover:bg-white/10 hover:border-white/40 transition-all duration-300">Secondary</button>
                                                        <button class="px-8 py-4 text-white font-display text-sm uppercase tracking-wider hover:text-neutral-400 transition-all duration-300">Text Link</button>
                                                    </div>
                                                    
                                                    <div class="h-px bg-gradient-to-r from-transparent via-white/20 to-transparent"></div>
                                                    
                                                    <div class="grid grid-cols-2 gap-4">
                                                        <div class="border border-white/10 p-4 hover:border-white/30 hover:bg-white/10 transition-all duration-300 cursor-pointer group">
                                                            <div class="flex items-center gap-3">
                                                                <div class="w-10 h-10 bg-white/10 group-hover:bg-white/20 rounded-full flex items-center justify-center transition-all duration-300">
                                                                    <i data-lucide="check" class="w-5 h-5"></i>
                                                                </div>
                                                                <div>
                                                                    <div class="font-display text-sm">Feature Card</div>
                                                                    <div class="font-mono text-xs text-neutral-600">Interactive</div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="border border-white/10 p-4 hover:border-white/30 hover:bg-white/10 transition-all duration-300 cursor-pointer group">
                                                            <div class="flex items-center gap-3">
                                                                <div class="w-10 h-10 bg-white/10 group-hover:bg-white/20 rounded-full flex items-center justify-center transition-all duration-300">
                                                                    <i data-lucide="star" class="w-5 h-5"></i>
                                                                </div>
                                                                <div>
                                                                    <div class="font-display text-sm">Highlight Card</div>
                                                                    <div class="font-mono text-xs text-neutral-600">Hover Effect</div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Typography Mode -->
                                    <div id="design-typography" class="design-content hidden">
                                        <div class="space-y-16">
                                            <!-- Type Scale Demonstration -->
                                            <div class="border border-white/10 overflow-hidden shadow-2xl shadow-black/50 opacity-0 design-element" style="animation: fadeInDesign 0.8s ease-out 0.2s forwards;">
                                                <div class="bg-[#0A0A0A] border-b border-white/10 px-4 py-3">
                                                    <div class="font-mono text-xs text-neutral-600 uppercase tracking-widest">Type Hierarchy</div>
                                                </div>
                                                <div class="bg-[#030303] p-12 space-y-8">
                                                    <div class="group cursor-pointer">
                                                        <div class="font-display text-7xl font-bold tracking-tight text-white mb-2 group-hover:text-neutral-300 transition-colors duration-500">Display XL</div>
                                                        <div class="font-mono text-xs text-neutral-600">96px / -0.02em / Space Grotesk Bold</div>
                                                    </div>
                                                    <div class="h-px bg-gradient-to-r from-white/0 via-white/20 to-white/0"></div>
                                                    <div class="group cursor-pointer">
                                                        <div class="font-display text-5xl font-medium tracking-tight text-white mb-2 group-hover:text-neutral-300 transition-colors duration-500">Heading 1</div>
                                                        <div class="font-mono text-xs text-neutral-600">48px / -0.01em / Space Grotesk Medium</div>
                                                    </div>
                                                    <div class="h-px bg-gradient-to-r from-white/0 via-white/10 to-white/0"></div>
                                                    <div class="group cursor-pointer">
                                                        <div class="font-display text-3xl font-medium text-white mb-2 group-hover:text-neutral-300 transition-colors duration-500">Heading 2</div>
                                                        <div class="font-mono text-xs text-neutral-600">32px / -0.01em / Space Grotesk Medium</div>
                                                    </div>
                                                    <div class="h-px bg-gradient-to-r from-white/0 via-white/10 to-white/0"></div>
                                                    <div class="group cursor-pointer">
                                                        <div class="font-sans text-xl text-neutral-300 leading-relaxed mb-2 group-hover:text-white transition-colors duration-500">Body Large - Perfect for introductory paragraphs and lead text that needs emphasis while maintaining excellent readability.</div>
                                                        <div class="font-mono text-xs text-neutral-600">20px / 1.7 / Inter Regular</div>
                                                    </div>
                                                    <div class="group cursor-pointer">
                                                        <div class="font-sans text-base text-neutral-400 leading-relaxed mb-2 group-hover:text-neutral-300 transition-colors duration-500">Body Regular - The workhorse of your content. Optimized for long-form reading with comfortable spacing and rhythm that keeps readers engaged through extended passages.</div>
                                                        <div class="font-mono text-xs text-neutral-600">16px / 1.75 / Inter Regular</div>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- Font Pairing & Color Palette -->
                                            <div class="grid grid-cols-2 gap-6">
                                                <div class="border border-white/10 p-8 opacity-0 design-element" style="animation: fadeInDesign 0.8s ease-out 0.4s forwards;">
                                                    <div class="font-mono text-xs text-neutral-600 mb-6 uppercase tracking-widest">Font Pairing</div>
                                                    <div class="space-y-6">
                                                        <div class="text-center p-6 border border-white/10 bg-white/10 hover:border-white/30 hover:bg-white/10 transition-all duration-500 group cursor-pointer">
                                                            <div class="font-display text-5xl mb-3 group-hover:scale-110 transition-transform duration-500 group-hover:text-neutral-200">Aa</div>
                                                            <div class="text-sm text-white mb-1">Space Grotesk</div>
                                                            <div class="font-mono text-[10px] text-neutral-600">Display & Headlines</div>
                                                        </div>
                                                        <div class="text-center p-6 border border-white/10 bg-white/10 hover:border-white/30 hover:bg-white/10 transition-all duration-500 group cursor-pointer">
                                                            <div class="font-sans text-5xl mb-3 group-hover:scale-110 transition-transform duration-500 group-hover:text-neutral-200">Aa</div>
                                                            <div class="text-sm text-white mb-1">Inter</div>
                                                            <div class="font-mono text-[10px] text-neutral-600">Body & Interface</div>
                                                        </div>
                                                        <div class="text-center p-6 border border-white/10 bg-white/10 hover:border-white/30 hover:bg-white/10 transition-all duration-500 group cursor-pointer">
                                                            <div class="font-mono text-5xl mb-3 group-hover:scale-110 transition-transform duration-500 group-hover:text-neutral-200">Aa</div>
                                                            <div class="text-sm text-white mb-1">Monospace</div>
                                                            <div class="font-mono text-[10px] text-neutral-600">Code & Data</div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="border border-white/10 p-8 opacity-0 design-element" style="animation: fadeInDesign 0.8s ease-out 0.6s forwards;">
                                                    <div class="font-mono text-xs text-neutral-600 mb-6 uppercase tracking-widest">Color Palette</div>
                                                    <div class="space-y-3">
                                                        <div class="flex items-center gap-4 group cursor-pointer">
                                                            <div class="w-16 h-16 bg-[#030303] border-2 border-white/20 rounded-lg group-hover:scale-110 group-hover:shadow-lg transition-all duration-300"></div>
                                                            <div>
                                                                <div class="font-mono text-xs text-white">#030303</div>
                                                                <div class="font-mono text-[10px] text-neutral-600">Background</div>
                                                            </div>
                                                        </div>
                                                        <div class="flex items-center gap-4 group cursor-pointer">
                                                            <div class="w-16 h-16 bg-white border-2 border-white/20 rounded-lg group-hover:scale-110 group-hover:shadow-lg group-hover:shadow-white/30 transition-all duration-300"></div>
                                                            <div>
                                                                <div class="font-mono text-xs text-white">#FFFFFF</div>
                                                                <div class="font-mono text-[10px] text-neutral-600">Primary Text</div>
                                                            </div>
                                                        </div>
                                                        <div class="flex items-center gap-4 group cursor-pointer">
                                                            <div class="w-16 h-16 bg-white border-2 border-white/20 rounded-lg group-hover:scale-110 group-hover:shadow-lg group-hover:shadow-white/50 transition-all duration-300"></div>
                                                            <div>
                                                                <div class="font-mono text-xs text-white">#10B981</div>
                                                                <div class="font-mono text-[10px] text-neutral-600">Accent</div>
                                                            </div>
                                                        </div>
                                                        <div class="flex items-center gap-4 group cursor-pointer">
                                                            <div class="w-16 h-16 bg-neutral-500 border-2 border-white/20 rounded-lg group-hover:scale-110 group-hover:shadow-lg transition-all duration-300"></div>
                                                            <div>
                                                                <div class="font-mono text-xs text-white">#737373</div>
                                                                <div class="font-mono text-[10px] text-neutral-600">Secondary</div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- Live Text Example -->
                                            <div class="border border-white/10 p-12 bg-gradient-to-br from-white/5 to-transparent opacity-0 design-element" style="animation: fadeInDesign 0.8s ease-out 0.8s forwards;">
                                                <div class="max-w-3xl">
                                                    <div class="font-display text-4xl font-medium text-white mb-6 leading-tight">Typography creates hierarchy, guides attention, and establishes visual rhythm.</div>
                                                    <div class="font-sans text-lg text-neutral-400 leading-relaxed space-y-4">
                                                        <p>Every typeface choice communicates personality. Space Grotesk brings geometric precision and modern confidence to headlines, while Inter ensures clarity and warmth in body text.</p>
                                                        <p>The result is a harmonious system that scales beautifully across devices and maintains readability at every breakpoint.</p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Motion Mode -->
                                    <div id="design-motion" class="design-content hidden">
                                        <div class="space-y-16">
                                            <!-- Easing Functions -->
                                            <div class="border border-white/10 overflow-hidden shadow-2xl shadow-black/50 opacity-0 design-element" style="animation: fadeInDesign 0.8s ease-out 0.2s forwards;">
                                                <div class="bg-[#0A0A0A] border-b border-white/10 px-4 py-3 flex items-center justify-between">
                                                    <div class="font-mono text-xs text-neutral-600 uppercase tracking-widest">Easing Curves</div>
                                                    <button onclick="triggerMotionDemo()" class="px-3 py-1.5 border border-white/20 hover:bg-white/10 transition-all duration-300 font-mono text-xs uppercase tracking-wider flex items-center gap-2 group">
                                                        <i data-lucide="play" class="w-3 h-3 group-hover:scale-125 transition-transform"></i>
                                                        <span>Replay All</span>
                                                    </button>
                                                </div>
                                                <div class="bg-[#030303] p-8 space-y-6">
                                                    <div class="border border-white/10 p-6 hover:border-white/30 bg-white/10 hover:bg-white/10 transition-all duration-500 group cursor-pointer" onclick="triggerMotionDemo()">
                                                        <div class="flex justify-between items-center mb-4">
                                                            <div class="font-mono text-sm text-white">ease-out</div>
                                                            <div class="font-mono text-xs text-neutral-600">cubic-bezier(0, 0, 0.2, 1)</div>
                                                        </div>
                                                        <div class="relative h-14 bg-white/10 overflow-hidden rounded-lg border border-white/10">
                                                            <div class="absolute left-0 top-0 bottom-0 w-14 bg-gradient-to-r from-white to-neutral-400 motion-demo-ease-out shadow-lg shadow-white/50 rounded-lg flex items-center justify-center">
                                                                <div class="w-2 h-2 bg-white rounded-full"></div>
                                                            </div>
                                                        </div>
                                                        <div class="mt-3 text-xs text-neutral-500">Quick start, smooth finish - Perfect for exits and reveals</div>
                                                    </div>

                                                    <div class="border border-white/10 p-6 hover:border-white/30 bg-white/10 hover:bg-white/10 transition-all duration-500 group cursor-pointer" onclick="triggerMotionDemo()">
                                                        <div class="flex justify-between items-center mb-4">
                                                            <div class="font-mono text-sm text-white">spring</div>
                                                            <div class="font-mono text-xs text-neutral-600">cubic-bezier(0.16, 1, 0.3, 1)</div>
                                                        </div>
                                                        <div class="relative h-14 bg-white/10 overflow-hidden rounded-lg border border-white/10">
                                                            <div class="absolute left-0 top-0 bottom-0 w-14 bg-gradient-to-r from-neutral-300 to-neutral-500 motion-demo-spring shadow-lg shadow-white/50 rounded-lg flex items-center justify-center">
                                                                <div class="w-2 h-2 bg-white rounded-full"></div>
                                                            </div>
                                                        </div>
                                                        <div class="mt-3 text-xs text-neutral-500">Elastic energy - Adds personality to interactions</div>
                                                    </div>

                                                    <div class="border border-white/10 p-6 hover:border-white/30 bg-white/10 hover:bg-white/10 transition-all duration-500 group cursor-pointer" onclick="triggerMotionDemo()">
                                                        <div class="flex justify-between items-center mb-4">
                                                            <div class="font-mono text-sm text-white">ease-in-out</div>
                                                            <div class="font-mono text-xs text-neutral-600">cubic-bezier(0.4, 0, 0.2, 1)</div>
                                                        </div>
                                                        <div class="relative h-14 bg-white/10 overflow-hidden rounded-lg border border-white/10">
                                                            <div class="absolute left-0 top-0 bottom-0 w-14 bg-gradient-to-r from-neutral-400 to-neutral-600 motion-demo-ease-in-out shadow-lg shadow-white/50 rounded-lg flex items-center justify-center">
                                                                <div class="w-2 h-2 bg-white rounded-full"></div>
                                                            </div>
                                                        </div>
                                                        <div class="mt-3 text-xs text-neutral-500">Balanced motion - Smooth transitions between states</div>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- Duration Scale -->
                                            <div class="border border-white/10 p-8 opacity-0 design-element" style="animation: fadeInDesign 0.8s ease-out 0.4s forwards;">
                                                <div class="font-mono text-xs text-neutral-600 mb-6 uppercase tracking-widest">Duration Scale</div>
                                                <div class="grid grid-cols-4 gap-4">
                                                    <div class="text-center p-6 border border-white/10 bg-white/10 hover:border-white/20 hover:bg-white/10 transition-all duration-150 group cursor-pointer">
                                                        <div class="font-display text-3xl text-white mb-2 group-hover:scale-110 transition-transform duration-150">150ms</div>
                                                        <div class="font-mono text-[10px] text-neutral-600 uppercase">Instant</div>
                                                        <div class="mt-3 h-1 bg-white/10 rounded-full overflow-hidden">
                                                            <div class="h-full bg-white w-1/4"></div>
                                                        </div>
                                                    </div>
                                                    <div class="text-center p-6 border border-white/10 bg-white/10 hover:border-white/30 hover:bg-white/15 transition-all duration-300 group cursor-pointer">
                                                        <div class="font-display text-3xl text-white mb-2 group-hover:scale-110 transition-transform duration-300">300ms</div>
                                                        <div class="font-mono text-[10px] text-neutral-400 uppercase">Base</div>
                                                        <div class="mt-3 h-1 bg-white/10 rounded-full overflow-hidden">
                                                            <div class="h-full bg-white w-1/2"></div>
                                                        </div>
                                                    </div>
                                                    <div class="text-center p-6 border border-white/10 bg-white/10 hover:border-white/20 hover:bg-white/10 transition-all duration-500 group cursor-pointer">
                                                        <div class="font-display text-3xl text-white mb-2 group-hover:scale-110 transition-transform duration-500">500ms</div>
                                                        <div class="font-mono text-[10px] text-neutral-600 uppercase">Smooth</div>
                                                        <div class="mt-3 h-1 bg-white/10 rounded-full overflow-hidden">
                                                            <div class="h-full bg-white w-3/4"></div>
                                                        </div>
                                                    </div>
                                                    <div class="text-center p-6 border border-white/10 bg-white/10 hover:border-white/20 hover:bg-white/10 transition-all duration-700 group cursor-pointer">
                                                        <div class="font-display text-3xl text-white mb-2 group-hover:scale-110 transition-transform duration-700">700ms</div>
                                                        <div class="font-mono text-[10px] text-neutral-600 uppercase">Cinematic</div>
                                                        <div class="mt-3 h-1 bg-white/10 rounded-full overflow-hidden">
                                                            <div class="h-full bg-white w-full"></div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- Interactive Example -->
                                            <div class="border border-white/10 p-12 bg-gradient-to-br from-white/5 to-transparent opacity-0 design-element" style="animation: fadeInDesign 0.8s ease-out 0.6s forwards;">
                                                <div class="font-mono text-xs text-neutral-600 mb-8 uppercase tracking-widest">Interactive Example</div>
                                                <div class="grid grid-cols-3 gap-6">
                                                    <div class="aspect-square border-2 border-white/30 bg-white/10 rounded-2xl hover:border-white hover:bg-white/20 hover:scale-110 hover:rotate-3 transition-all duration-500 cursor-pointer flex items-center justify-center group">
                                                        <div class="text-center">
                                                            <div class="w-16 h-16 bg-white/30 rounded-full mx-auto mb-3 group-hover:bg-white/60 transition-all duration-500"></div>
                                                            <div class="font-mono text-xs text-white">Hover me</div>
                                                        </div>
                                                    </div>
                                                    <div class="aspect-square border-2 border-white/30 bg-white/10 rounded-2xl hover:border-white hover:bg-white/20 hover:scale-110 hover:-rotate-3 transition-all duration-500 cursor-pointer flex items-center justify-center group">
                                                        <div class="text-center">
                                                            <div class="w-16 h-16 bg-white/30 rounded-full mx-auto mb-3 group-hover:bg-white/60 transition-all duration-500"></div>
                                                            <div class="font-mono text-xs text-white">And me</div>
                                                        </div>
                                                    </div>
                                                    <div class="aspect-square border-2 border-white/30 bg-white/10 rounded-2xl hover:border-white hover:bg-white/20 hover:scale-110 hover:rotate-6 transition-all duration-500 cursor-pointer flex items-center justify-center group">
                                                        <div class="text-center">
                                                            <div class="w-16 h-16 bg-white/30 rounded-full mx-auto mb-3 group-hover:bg-white/60 transition-all duration-500"></div>
                                                            <div class="font-mono text-xs text-white">Try me</div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="mt-8 text-center">
                                                    <div class="font-sans text-sm text-neutral-500">Motion breathes life into interfaces - Use it purposefully to guide, delight, and inform.</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>

                            <!-- Right: Build Metrics & Deliverables (2/5) -->
                            <div class="lg:col-span-2 modal-stagger" style="transition-delay: 0.15s">
                                
                                <div class="sticky top-8 space-y-16">
                                    <!-- Build Metrics -->
                                    <div class="space-y-10">
                                        <div class="pb-6 border-b border-white/10">
                                            <h2 class="font-display text-3xl font-medium tracking-tight mb-3">Build Metrics</h2>
                                            <p class="font-mono text-xs text-neutral-600 uppercase tracking-[0.3em]">Performance Target</p>
                                        </div>

                                        <div class="space-y-12" id="build-metrics-container">
                                            <div class="border-l-2 border-white/20 pl-8 opacity-0 transition-all duration-1000" id="build-metric-1">
                                                <div class="text-xs text-neutral-600 mb-5 uppercase tracking-[0.4em] font-mono">Lines of Code</div>
                                                <div class="text-6xl font-display font-medium text-white mb-8 tracking-tight">
                                                    <span id="build-1-value">0</span>
                                                </div>
                                                <div class="h-0.5 bg-white/10 w-full relative overflow-hidden rounded-full">
                                                    <div class="absolute inset-y-0 left-0 bg-gradient-to-r from-white to-neutral-400 rounded-full" style="width: 0%; transition: width 2000ms cubic-bezier(0.4, 0, 0.2, 1);" id="build-1-bar"></div>
                                                </div>
                                                <div class="text-xs text-neutral-600 mt-5 font-sans">Clean, maintainable code</div>
                                            </div>

                                            <div class="border-l-2 border-white/20 pl-8 opacity-0 transition-all duration-1000" id="build-metric-2">
                                                <div class="text-xs text-neutral-600 mb-5 uppercase tracking-[0.4em] font-mono">Components</div>
                                                <div class="text-6xl font-display font-medium text-white mb-8 tracking-tight">
                                                    <span id="build-2-value">0</span>
                                                </div>
                                                <div class="h-0.5 bg-white/10 w-full relative overflow-hidden rounded-full">
                                                    <div class="absolute inset-y-0 left-0 bg-gradient-to-r from-white to-neutral-400 rounded-full" style="width: 0%; transition: width 2000ms cubic-bezier(0.4, 0, 0.2, 1);" id="build-2-bar"></div>
                                                </div>
                                                <div class="text-xs text-neutral-600 mt-5 font-sans">Reusable system</div>
                                            </div>

                                            <div class="border-l-2 border-white/20 pl-8 opacity-0 transition-all duration-1000" id="build-metric-3">
                                                <div class="text-xs text-neutral-600 mb-5 uppercase tracking-[0.4em] font-mono">Build Time</div>
                                                <div class="text-6xl font-display font-medium text-white mb-8 tracking-tight">
                                                    <span id="build-3-value">0.0</span><span class="text-neutral-700 text-4xl">s</span>
                                                </div>
                                                <div class="h-0.5 bg-white/10 w-full relative overflow-hidden rounded-full">
                                                    <div class="absolute inset-y-0 left-0 bg-gradient-to-r from-white to-neutral-400 rounded-full" style="width: 0%; transition: width 2000ms cubic-bezier(0.4, 0, 0.2, 1);" id="build-3-bar"></div>
                                                </div>
                                                <div class="text-xs text-neutral-600 mt-5 font-sans">Lightning fast builds</div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Deliverables -->
                                    <div class="border border-white/10 p-8">
                                        <div class="font-mono text-xs text-neutral-600 mb-6 uppercase tracking-widest">Deliverables</div>
                                        <div class="space-y-4">
                                            <div class="flex items-center gap-3 text-sm text-neutral-400">
                                                <div class="w-1.5 h-1.5 bg-white rounded-full"></div>
                                                <span>Figma Design Files</span>
                                            </div>
                                            <div class="flex items-center gap-3 text-sm text-neutral-400">
                                                <div class="w-1.5 h-1.5 bg-white rounded-full"></div>
                                                <span>Production Code</span>
                                            </div>
                                            <div class="flex items-center gap-3 text-sm text-neutral-400">
                                                <div class="w-1.5 h-1.5 bg-white rounded-full"></div>
                                                <span>Design System</span>
                                            </div>
                                            <div class="flex items-center gap-3 text-sm text-neutral-400">
                                                <div class="w-1.5 h-1.5 bg-white rounded-full"></div>
                                                <span>Performance Optimization</span>
                                            </div>
                                            <div class="flex items-center gap-3 text-sm text-neutral-400">
                                                <div class="w-1.5 h-1.5 bg-white rounded-full"></div>
                                                <span>SEO & Accessibility</span>
                                            </div>
                                            <div class="flex items-center gap-3 text-sm text-neutral-400">
                                                <div class="w-1.5 h-1.5 bg-white rounded-full"></div>
                                                <span>Documentation</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>

                        <!-- Process Overview -->
                        <div class="modal-stagger border-t border-white/10 pt-40 mb-40" style="transition-delay: 0.2s">
                            <div class="max-w-6xl">
                                <div class="mb-24">
                                    <div class="font-mono text-xs uppercase tracking-[0.5em] text-neutral-600 mb-10">Process</div>
                                    <h2 class="font-display text-6xl md:text-7xl font-medium mb-8 tracking-tight leading-[0.95]">
                                        How We Build Together
                                    </h2>
                                </div>

                                <div class="grid grid-cols-1 md:grid-cols-4 gap-16">
                                    <div class="group">
                                        <div class="text-8xl font-display font-medium text-white/5 mb-8 group-hover:text-white/10 transition-colors duration-700">01</div>
                                        <h3 class="font-display text-2xl mb-6 leading-tight">Discovery &<br/>Strategy</h3>
                                        <p class="font-sans text-neutral-500 leading-[1.9] text-sm">
                                            Deep dive into your brand, audience, and goals. Competitive analysis and user research to inform design decisions.
                                        </p>
                                    </div>

                                    <div class="group">
                                        <div class="text-8xl font-display font-medium text-white/5 mb-8 group-hover:text-white/10 transition-colors duration-700">02</div>
                                        <h3 class="font-display text-2xl mb-6 leading-tight">Design &<br/>Prototype</h3>
                                        <p class="font-sans text-neutral-500 leading-[1.9] text-sm">
                                            High-fidelity designs in Figma with interactive prototypes. Design system creation for consistency and scalability.
                                        </p>
                                    </div>

                                    <div class="group">
                                        <div class="text-8xl font-display font-medium text-white/5 mb-8 group-hover:text-white/10 transition-colors duration-700">03</div>
                                        <h3 class="font-display text-2xl mb-6 leading-tight">Development &<br/>Testing</h3>
                                        <p class="font-sans text-neutral-500 leading-[1.9] text-sm">
                                            Production-grade code with performance optimization. Cross-browser testing and accessibility compliance.
                                        </p>
                                    </div>

                                    <div class="group">
                                        <div class="text-8xl font-display font-medium text-white/5 mb-8 group-hover:text-white/10 transition-colors duration-700">04</div>
                                        <h3 class="font-display text-2xl mb-6 leading-tight">Launch &<br/>Support</h3>
                                        <p class="font-sans text-neutral-500 leading-[1.9] text-sm">
                                            Deployment with monitoring setup. Post-launch support and iterative improvements based on real data.
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Contact Form -->
                        <div class="modal-stagger border-t border-white/10 pt-40" style="transition-delay: 0.25s">
                            <div class="max-w-3xl mx-auto">
                                <div class="mb-16 text-center">
                                    <div class="font-mono text-xs uppercase tracking-[0.5em] text-neutral-600 mb-6">Let's Build</div>
                                    <h2 class="font-display text-5xl font-medium mb-6 tracking-tight">Start Your Project</h2>
                                    <p class="font-sans text-lg text-neutral-400 leading-relaxed">
                                        ${data.description}
                                    </p>
                                </div>

                                <form action="https://formspree.io/f/${data.formspreeId}" method="POST" class="space-y-8">
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                                        <div>
                                            <input type="text" name="name" required 
                                                class="w-full bg-transparent border-b border-white/20 pb-4 text-white font-sans text-base placeholder:text-neutral-600 focus:border-white focus:outline-none transition-colors duration-300" 
                                                placeholder="Your Name *">
                                        </div>
                                        <div>
                                            <input type="email" name="email" required 
                                                class="w-full bg-transparent border-b border-white/20 pb-4 text-white font-sans text-base placeholder:text-neutral-600 focus:border-white focus:outline-none transition-colors duration-300" 
                                                placeholder="Email Address *">
                                        </div>
                                    </div>
                                    
                                    <div>
                                        <input type="text" name="company" 
                                            class="w-full bg-transparent border-b border-white/20 pb-4 text-white font-sans text-base placeholder:text-neutral-600 focus:border-white focus:outline-none transition-colors duration-300" 
                                            placeholder="Company / Brand">
                                    </div>

                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                                        <div>
                                            <select name="budget" 
                                                class="w-full bg-transparent border-b border-white/20 pb-4 text-white font-sans text-base focus:border-white focus:outline-none transition-colors duration-300 appearance-none cursor-pointer">
                                                <option value="" class="bg-[#030303]">Project Budget</option>
                                                <option value="<5k" class="bg-[#030303]">$5,000 - $15,000</option>
                                                <option value="15k-30k" class="bg-[#030303]">$15,000 - $30,000</option>
                                                <option value="30k-50k" class="bg-[#030303]">$30,000 - $50,000</option>
                                                <option value="50k+" class="bg-[#030303]">$50,000+</option>
                                                <option value="retainer" class="bg-[#030303]">Monthly Retainer</option>
                                            </select>
                                        </div>
                                        <div>
                                            <select name="timeline" 
                                                class="w-full bg-transparent border-b border-white/20 pb-4 text-white font-sans text-base focus:border-white focus:outline-none transition-colors duration-300 appearance-none cursor-pointer">
                                                <option value="" class="bg-[#030303]">Timeline</option>
                                                <option value="urgent" class="bg-[#030303]">ASAP (< 2 weeks)</option>
                                                <option value="1month" class="bg-[#030303]">Within 1 month</option>
                                                <option value="2-3months" class="bg-[#030303]">2-3 months</option>
                                                <option value="flexible" class="bg-[#030303]">Flexible</option>
                                            </select>
                                        </div>
                                    </div>

                                    <div>
                                        <textarea name="message" required rows="4" 
                                            class="w-full bg-transparent border-b border-white/20 pb-4 text-white font-sans text-base placeholder:text-neutral-600 focus:border-white focus:outline-none transition-colors duration-300 resize-none" 
                                            placeholder="Tell me about your vision, target audience, key features, and any design references you love... *"></textarea>
                                    </div>

                                    <div class="pt-8">
                                        <button type="submit" 
                                            class="w-full bg-white text-black font-display text-base font-medium py-5 px-8 hover:bg-neutral-200 hover:shadow-2xl hover:shadow-white/20 transition-all duration-500 uppercase tracking-[0.2em]">
                                            Submit Project Inquiry
                                        </button>
                                        <div class="flex items-center justify-center gap-8 mt-8 text-xs text-neutral-600 font-mono">
                                            <div class="flex items-center gap-2">
                                                <i data-lucide="shield-check" class="w-3 h-3"></i>
                                                <span>Confidential</span>
                                            </div>
                                            <div class="flex items-center gap-2">
                                                <i data-lucide="clock" class="w-3 h-3"></i>
                                                <span>24-48hr Response</span>
                                            </div>
                                            <div class="flex items-center gap-2">
                                                <i data-lucide="check-circle" class="w-3 h-3"></i>
                                                <span>No Obligation</span>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                `;

                // Start design system animation
                setTimeout(() => {
                    initDesignSystem();
                }, 500);
            }

            modal.classList.add('active');
            document.body.classList.add('modal-open');
            lockBodyScroll();
            lucide.createIcons();
        }

        // Fluid Live Analysis Animation System
        function initLiveAnalysis() {
            // Start timer immediately
            startAnalysisTimer();
            
            // Sequence 1: Title typing (0-2s)
            setTimeout(() => {
                const titleEl = document.getElementById('main-title');
                const subtitleEl = document.getElementById('subtitle-text');
                if (titleEl) {
                    setTimeout(() => {
                        titleEl.classList.add('complete');
                        if (subtitleEl) {
                            subtitleEl.style.opacity = '1';
                        }
                    }, 2000);
                }
            }, 100);
            
            // Sequence 2: Populate spreadsheet (at 1s, visible during typing)
            setTimeout(() => {
                populateIncomeStatement();
            }, 1000);
            
            // Sequence 3: Fade in metrics sidebar (at 2.5s, after title completes)
            setTimeout(() => {
                const metric1 = document.getElementById('metric-1');
                const metric2 = document.getElementById('metric-2');
                const metric3 = document.getElementById('metric-3');
                
                if (metric1) metric1.style.opacity = '1';
                setTimeout(() => { if (metric2) metric2.style.opacity = '1'; }, 400);
                setTimeout(() => { if (metric3) metric3.style.opacity = '1'; }, 800);
            }, 2500);
            
            // Sequence 4: Animate metric values (at 3s)
            setTimeout(() => {
                animateLiveMetrics('income');
            }, 3000);
            
            // Sequence 5: Start cell scanning (at 4s, after metrics start animating)
            setTimeout(() => {
                startCellScanning();
            }, 4000);
        }

        // Store timer interval globally to clear on modal close
        let analysisTimerInterval = null;
        
        function startAnalysisTimer() {
            const timerEl = document.getElementById('analysis-timer');
            if (!timerEl) return;
            
            // Clear existing timer if any
            if (analysisTimerInterval) {
                clearInterval(analysisTimerInterval);
            }
            
            let seconds = 0;
            analysisTimerInterval = setInterval(() => {
                seconds++;
                const mins = Math.floor(seconds / 60);
                const secs = seconds % 60;
                timerEl.textContent = `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
            }, 1000);
        }

        function populateIncomeStatement() {
            const container = document.getElementById('income-statement');
            if (!container) return;
            
            // Header row (always visible)
            const headerRow = `
                <div class="grid grid-cols-12 gap-px border-b border-white/20 sticky top-0 z-30" style="background-color: #030303;">
                    <div class="col-span-1 p-3 text-neutral-600 text-center text-xs font-mono" style="background-color: #030303;">#</div>
                    <div class="col-span-7 p-3 text-neutral-400 text-xs font-mono uppercase tracking-wider" style="background-color: #030303;">Line Item</div>
                    <div class="col-span-2 p-3 text-neutral-400 text-xs font-mono uppercase tracking-wider text-right" style="background-color: #030303;">FY 2024</div>
                    <div class="col-span-2 p-3 text-neutral-400 text-xs font-mono uppercase tracking-wider text-right" style="background-color: #030303;">% Rev</div>
                </div>
            `;
            
            // Data rows for landscaping company
            const dataRows = [
                { num: '01', label: 'Total Revenue', value: '$169,000', pct: '100.0%', bold: true, cell: 1, sublevel: false },
                { num: '02', label: 'Direct Labor & Materials', value: '($64,200)', pct: '38.0%', bold: false, cell: 2, sublevel: true },
                { num: '03', label: 'Gross Profit', value: '$104,800', pct: '62.0%', bold: true, cell: 3, sublevel: false, border: true },
                { num: '04', label: 'Sales & Marketing', value: '($16,900)', pct: '10.0%', bold: false, cell: 4, sublevel: true },
                { num: '05', label: 'Equipment & Fleet', value: '($13,500)', pct: '8.0%', bold: false, cell: 5, sublevel: true },
                { num: '06', label: 'General & Administrative', value: '($10,100)', pct: '6.0%', bold: false, cell: 6, sublevel: true },
                { num: '07', label: 'EBITDA', value: '$64,300', pct: '38.0%', bold: true, cell: 7, sublevel: false, border: true },
                { num: '08', label: 'Depreciation & Amortization', value: '($7,600)', pct: '4.5%', bold: false, cell: 8, sublevel: true },
                { num: '09', label: 'Operating Income', value: '$56,700', pct: '33.5%', bold: true, cell: 9, sublevel: false, border: true },
                { num: '10', label: 'Interest Income', value: '$500', pct: '0.3%', bold: false, cell: 10, sublevel: true },
                { num: '11', label: 'Interest Expense', value: '($3,400)', pct: '2.0%', bold: false, cell: 11, sublevel: true },
                { num: '12', label: 'Pre-Tax Income', value: '$53,800', pct: '31.8%', bold: true, cell: 12, sublevel: false, border: true },
                { num: '13', label: 'Income Tax (21%)', value: '($11,300)', pct: '6.7%', bold: false, cell: 13, sublevel: true },
                { num: '14', label: 'Net Income', value: '$42,500', pct: '25.1%', bold: true, cell: 14, sublevel: false, border: true, final: true }
            ];
            
            container.innerHTML = headerRow;
            
            // Animate rows appearing one by one
            dataRows.forEach((row, index) => {
                setTimeout(() => {
                    const rowBg = row.border ? 'bg-white/10 hover:bg-white/15' : 'bg-white/10 hover:bg-white/10';
                    const borderClass = row.border ? 'border-t border-white/20' : '';
                    const finalBorder = row.final ? 'border-t-2 border-white/40' : '';
                    const textColor = row.bold ? 'text-white' : 'text-neutral-400';
                    const labelWeight = row.bold ? 'font-bold' : '';
                    const valueWeight = row.bold ? 'font-bold' : '';
                    const numWeight = row.bold ? 'font-bold' : '';
                    const padding = row.final ? 'p-4' : 'p-3';
                    const fontSize = row.final ? 'text-base' : 'text-sm';
                    const indent = row.sublevel ? 'pl-6' : '';
                    
                    const rowHTML = `
                        <div class="grid grid-cols-12 gap-px ${rowBg} transition-all duration-300 ease-out ${borderClass} ${finalBorder} opacity-0 translate-y-2" data-cell="${row.cell}" style="animation: fadeInRow 0.3s cubic-bezier(0.16, 1, 0.3, 1) ${index * 0.02}s forwards;">
                            <div class="col-span-1 ${padding} text-neutral-700 text-center text-xs font-mono ${numWeight}">${row.num}</div>
                            <div class="col-span-7 ${padding} ${textColor} ${fontSize} ${labelWeight} ${indent}">${row.label}</div>
                            <div class="col-span-2 ${padding} ${textColor} ${fontSize} ${valueWeight} text-right font-mono">${row.value}</div>
                            <div class="col-span-2 ${padding} ${row.bold ? 'text-white' : 'text-neutral-600'} ${fontSize} text-right font-mono">${row.pct}</div>
                        </div>
                    `;
                    
                    container.insertAdjacentHTML('beforeend', rowHTML);
                }, index * 20);
            });
        }

        function populateBalanceSheet() {
            const container = document.getElementById('balance-statement');
            if (!container) return;
            
            const headerRow = `
                <div class="grid grid-cols-12 gap-px border-b border-white/20 sticky top-0 z-30" style="background-color: #030303;">
                    <div class="col-span-1 p-3 text-neutral-600 text-center text-xs font-mono" style="background-color: #030303;">#</div>
                    <div class="col-span-7 p-3 text-neutral-400 text-xs font-mono uppercase tracking-wider" style="background-color: #030303;">Account</div>
                    <div class="col-span-2 p-3 text-neutral-400 text-xs font-mono uppercase tracking-wider text-right" style="background-color: #030303;">Amount</div>
                    <div class="col-span-2 p-3 text-neutral-400 text-xs font-mono uppercase tracking-wider text-right" style="background-color: #030303;">% Total</div>
                </div>
            `;
            
            const dataRows = [
                { num: '01', label: 'ASSETS', value: '', pct: '', bold: true, cell: 1, sublevel: false, header: true },
                { num: '02', label: 'Cash & Equivalents', value: '$37,000', pct: '23.7%', bold: false, cell: 2, sublevel: true },
                { num: '03', label: 'Accounts Receivable', value: '$19,000', pct: '12.2%', bold: false, cell: 3, sublevel: true },
                { num: '04', label: 'Inventory (Materials)', value: '$6,400', pct: '4.1%', bold: false, cell: 4, sublevel: true },
                { num: '05', label: 'Total Current Assets', value: '$62,400', pct: '40.0%', bold: true, cell: 5, sublevel: false, border: true },
                { num: '06', label: 'Equipment & Vehicles', value: '$116,000', pct: '74.4%', bold: false, cell: 6, sublevel: true },
                { num: '07', label: 'Accumulated Depreciation', value: '($38,400)', pct: '(24.6%)', bold: false, cell: 7, sublevel: true },
                { num: '08', label: 'Net PP&E', value: '$77,600', pct: '49.7%', bold: true, cell: 8, sublevel: false, border: true },
                { num: '09', label: 'Other Assets', value: '$16,000', pct: '10.3%', bold: false, cell: 9, sublevel: true },
                { num: '10', label: 'Total Assets', value: '$156,000', pct: '100.0%', bold: true, cell: 10, sublevel: false, border: true, final: true, equation: 'assets' },
                { num: '11', label: 'LIABILITIES & EQUITY', value: '', pct: '', bold: true, cell: 11, sublevel: false, header: true },
                { num: '12', label: 'Accounts Payable', value: '$8,400', pct: '5.4%', bold: false, cell: 12, sublevel: true },
                { num: '13', label: 'Accrued Expenses', value: '$5,600', pct: '3.6%', bold: false, cell: 13, sublevel: true },
                { num: '14', label: 'Current Portion of Debt', value: '$10,000', pct: '6.4%', bold: false, cell: 14, sublevel: true },
                { num: '15', label: 'Total Current Liabilities', value: '$24,000', pct: '15.4%', bold: true, cell: 15, sublevel: false, border: true },
                { num: '16', label: 'Long-Term Debt', value: '$46,000', pct: '29.5%', bold: false, cell: 16, sublevel: true },
                { num: '17', label: 'Total Liabilities', value: '$70,000', pct: '44.9%', bold: true, cell: 17, sublevel: false, border: true },
                { num: '18', label: 'Shareholder Equity', value: '$86,000', pct: '55.1%', bold: true, cell: 18, sublevel: false },
                { num: '19', label: 'Total Liabilities & Equity', value: '$156,000', pct: '100.0%', bold: true, cell: 19, sublevel: false, border: true, final: true, equation: 'liabilities_equity' }
            ];
            
            container.innerHTML = headerRow;
            
            dataRows.forEach((row, index) => {
                setTimeout(() => {
                    const rowBg = row.border ? 'bg-white/10 hover:bg-white/15' : row.header ? 'bg-white/10' : 'bg-white/10 hover:bg-white/10';
                    const borderClass = row.border ? 'border-t border-white/20' : '';
                    const finalBorder = row.final ? 'border-t-2 border-white/40' : '';
                    const textColor = row.bold || row.header ? 'text-white' : 'text-neutral-400';
                    const labelWeight = row.bold || row.header ? 'font-bold' : '';
                    const valueWeight = row.bold ? 'font-bold' : '';
                    const numWeight = row.bold || row.header ? 'font-bold' : '';
                    const padding = row.final ? 'p-4' : 'p-3';
                    const fontSize = row.final || row.header ? 'text-base' : 'text-sm';
                    const indent = row.sublevel ? 'pl-6' : '';
                    
                    const rowHTML = `
                        <div class="grid grid-cols-12 gap-px ${rowBg} transition-all duration-300 ease-out ${borderClass} ${finalBorder} opacity-0 translate-y-2" data-cell="${row.cell}" style="animation: fadeInRow 0.3s cubic-bezier(0.16, 1, 0.3, 1) ${index * 0.02}s forwards;">
                            <div class="col-span-1 ${padding} text-neutral-700 text-center text-xs font-mono ${numWeight}">${row.num}</div>
                            <div class="col-span-7 ${padding} ${textColor} ${fontSize} ${labelWeight} ${indent}">${row.label}</div>
                            <div class="col-span-2 ${padding} ${textColor} ${fontSize} ${valueWeight} text-right font-mono">${row.value}</div>
                            <div class="col-span-2 ${padding} ${row.bold ? 'text-white' : 'text-neutral-600'} ${fontSize} text-right font-mono">${row.pct}</div>
                        </div>
                    `;
                    
                    container.insertAdjacentHTML('beforeend', rowHTML);
                }, index * 20);
            });
        }

        function populateCashFlow() {
            const container = document.getElementById('cashflow-statement');
            if (!container) return;
            
            const headerRow = `
                <div class="grid grid-cols-12 gap-px border-b border-white/20 sticky top-0 z-30" style="background-color: #030303;">
                    <div class="col-span-1 p-3 text-neutral-600 text-center text-xs font-mono" style="background-color: #030303;">#</div>
                    <div class="col-span-7 p-3 text-neutral-400 text-xs font-mono uppercase tracking-wider" style="background-color: #030303;">Cash Flow Activity</div>
                    <div class="col-span-2 p-3 text-neutral-400 text-xs font-mono uppercase tracking-wider text-right" style="background-color: #030303;">FY 2024</div>
                    <div class="col-span-2 p-3 text-neutral-400 text-xs font-mono uppercase tracking-wider text-right" style="background-color: #030303;">% Rev</div>
                </div>
            `;
            
            const dataRows = [
                { num: '01', label: 'OPERATING ACTIVITIES', value: '', pct: '', bold: true, cell: 1, sublevel: false, header: true },
                { num: '02', label: 'Net Income', value: '$42,500', pct: '25.1%', bold: false, cell: 2, sublevel: true },
                { num: '03', label: 'Depreciation & Amortization', value: '$7,600', pct: '4.5%', bold: false, cell: 3, sublevel: true },
                { num: '04', label: 'Changes in Working Capital', value: '($5,700)', pct: '(3.4%)', bold: false, cell: 4, sublevel: true },
                { num: '05', label: 'Net Cash from Operations', value: '$44,400', pct: '26.3%', bold: true, cell: 5, sublevel: false, border: true },
                { num: '06', label: 'INVESTING ACTIVITIES', value: '', pct: '', bold: true, cell: 6, sublevel: false, header: true },
                { num: '07', label: 'Equipment Purchases', value: '($18,400)', pct: '(10.9%)', bold: false, cell: 7, sublevel: true },
                { num: '08', label: 'Vehicle Acquisitions', value: '($7,600)', pct: '(4.5%)', bold: false, cell: 8, sublevel: true },
                { num: '09', label: 'Net Cash from Investing', value: '($26,000)', pct: '(15.4%)', bold: true, cell: 9, sublevel: false, border: true },
                { num: '10', label: 'FINANCING ACTIVITIES', value: '', pct: '', bold: true, cell: 10, sublevel: false, header: true },
                { num: '11', label: 'Debt Proceeds', value: '$10,000', pct: '5.9%', bold: false, cell: 11, sublevel: true },
                { num: '12', label: 'Debt Repayments', value: '($12,400)', pct: '(7.3%)', bold: false, cell: 12, sublevel: true },
                { num: '13', label: 'Owner Distributions', value: '($9,000)', pct: '(5.3%)', bold: false, cell: 13, sublevel: true },
                { num: '14', label: 'Net Cash from Financing', value: '($11,400)', pct: '(6.7%)', bold: true, cell: 14, sublevel: false, border: true },
                { num: '15', label: 'Net Change in Cash', value: '$7,000', pct: '4.1%', bold: true, cell: 15, sublevel: false, border: true, final: true }
            ];
            
            container.innerHTML = headerRow;
            
            dataRows.forEach((row, index) => {
                setTimeout(() => {
                    const rowBg = row.border ? 'bg-white/10 hover:bg-white/15' : row.header ? 'bg-white/10' : 'bg-white/10 hover:bg-white/10';
                    const borderClass = row.border ? 'border-t border-white/20' : '';
                    const finalBorder = row.final ? 'border-t-2 border-white/40' : '';
                    const textColor = row.bold || row.header ? 'text-white' : 'text-neutral-400';
                    const labelWeight = row.bold || row.header ? 'font-bold' : '';
                    const valueWeight = row.bold ? 'font-bold' : '';
                    const numWeight = row.bold || row.header ? 'font-bold' : '';
                    const padding = row.final ? 'p-4' : 'p-3';
                    const fontSize = row.final || row.header ? 'text-base' : 'text-sm';
                    const indent = row.sublevel ? 'pl-6' : '';
                    
                    const rowHTML = `
                        <div class="grid grid-cols-12 gap-px ${rowBg} transition-all duration-300 ease-out ${borderClass} ${finalBorder} opacity-0 translate-y-2" data-cell="${row.cell}" style="animation: fadeInRow 0.3s cubic-bezier(0.16, 1, 0.3, 1) ${index * 0.02}s forwards;">
                            <div class="col-span-1 ${padding} text-neutral-700 text-center text-xs font-mono ${numWeight}">${row.num}</div>
                            <div class="col-span-7 ${padding} ${textColor} ${fontSize} ${labelWeight} ${indent}">${row.label}</div>
                            <div class="col-span-2 ${padding} ${textColor} ${fontSize} ${valueWeight} text-right font-mono">${row.value}</div>
                            <div class="col-span-2 ${padding} ${row.bold ? 'text-white' : 'text-neutral-600'} ${fontSize} text-right font-mono">${row.pct}</div>
                        </div>
                    `;
                    
                    container.insertAdjacentHTML('beforeend', rowHTML);
                }, index * 20);
            });
        }

        let currentStatementType = 'income';
        let isTransitioning = false;

        function switchStatement(type) {
            if (isTransitioning || type === currentStatementType) return;
            isTransitioning = true;
            
            // Update tabs immediately - clear all states first
            document.querySelectorAll('.statement-tab').forEach(tab => {
                tab.classList.remove('active', 'text-neutral-500');
            });
            
            // Set inactive tabs
            document.querySelectorAll('.statement-tab').forEach(tab => {
                if (tab.id !== `tab-${type}`) {
                    tab.classList.add('text-neutral-500');
                }
            });
            
            // Set active tab
            const activeTab = document.getElementById(`tab-${type}`);
            if (activeTab) {
                activeTab.classList.add('active');
            }
            
            // Update filename
            const filenameEl = document.getElementById('statement-filename');
            const filenames = {
                income: 'GREENSCAPE_INCOME_FY2024.xlsx',
                balance: 'GREENSCAPE_BALANCE_FY2024.xlsx',
                cashflow: 'GREENSCAPE_CASHFLOW_FY2024.xlsx'
            };
            if (filenameEl) filenameEl.textContent = filenames[type];
            
            // Fade out current statement
            const currentStatement = document.querySelector('.statement-content.active');
            if (currentStatement) {
                currentStatement.classList.remove('active');
                currentStatement.classList.add('hidden');
            }
            
            // Fade in new statement and update metrics
            setTimeout(() => {
                const newStatement = document.getElementById(`${type}-statement`);
                if (newStatement) {
                    // Populate if empty
                    if (newStatement.children.length === 0) {
                        if (type === 'balance') populateBalanceSheet();
                        if (type === 'cashflow') populateCashFlow();
                    }
                    
                    newStatement.classList.remove('hidden');
                    newStatement.classList.add('active');
                }
                
                // Update metrics for new statement type
                animateLiveMetrics(type);
                
                currentStatementType = type;
                
                setTimeout(() => {
                    isTransitioning = false;
                }, 600);
            }, 300);
        }

        function animateLiveMetrics(statementType = 'income') {
            const metricsConfig = {
                income: [
                    { id: 'metric-1', label: 'Gross Margin', value: 62.0, benchmark: '55.0%', delay: 600 },
                    { id: 'metric-2', label: 'EBITDA Margin', value: 38.0, benchmark: '28.0%', delay: 1400 },
                    { id: 'metric-3', label: 'Net Margin', value: 25.1, benchmark: '18.0%', delay: 2200 }
                ],
                balance: [
                    { id: 'metric-1', label: 'Current Ratio', value: 2.6, benchmark: '1.5', delay: 600, suffix: 'x' },
                    { id: 'metric-2', label: 'Debt to Equity', value: 0.81, benchmark: '1.0', delay: 1400, suffix: 'x', invert: true },
                    { id: 'metric-3', label: 'Asset Turnover', value: 1.08, benchmark: '0.85', delay: 2200, suffix: 'x' }
                ],
                cashflow: [
                    { id: 'metric-1', label: 'Operating Cash %', value: 26.3, benchmark: '20.0%', delay: 600 },
                    { id: 'metric-2', label: 'Free Cash Flow %', value: 10.9, benchmark: '8.0%', delay: 1400 },
                    { id: 'metric-3', label: 'Cash Conversion', value: 104.5, benchmark: '95.0%', delay: 2200 }
                ]
            };
            
            const metrics = metricsConfig[statementType];
            
            // Clear all existing intervals first to prevent glitches
            Object.keys(metricIntervals).forEach(key => {
                clearInterval(metricIntervals[key]);
                delete metricIntervals[key];
            });
            
            // Reset all bars immediately without transition
            metrics.forEach(metric => {
                const bar = document.getElementById(`${metric.id}-bar`);
                if (bar) {
                    // Disable transitions
                    bar.style.transition = 'none';
                    bar.style.width = '0%';
                    // Force browser reflow to apply changes
                    void bar.offsetHeight;
                    // Re-enable smooth transition
                    bar.style.transition = 'width 2000ms cubic-bezier(0.4, 0, 0.2, 1)';
                }
            });
            
            metrics.forEach((metric, index) => {
                // Update label and benchmark
                const labelEl = document.getElementById(`${metric.id}-label`);
                const benchmarkEl = document.getElementById(`${metric.id}-benchmark`);
                const valueEl = document.getElementById(`${metric.id}-value`);
                
                if (labelEl) labelEl.textContent = metric.label;
                if (benchmarkEl) {
                    benchmarkEl.textContent = `Industry benchmark: ${metric.benchmark}`;
                }
                
                // Reset value immediately
                const suffix = metric.suffix || '%';
                if (valueEl) {
                    valueEl.innerHTML = `0.0<span class="text-neutral-700">${suffix}</span>`;
                }
                
                // Animate value
                setTimeout(() => {
                    animateMetricValue(
                        `${metric.id}-value`,
                        metric.value,
                        `${metric.id}-bar`,
                        suffix,
                        metric.invert || false
                    );
                }, metric.delay);
            });
        }

        // Store active intervals to clear them
        const metricIntervals = {};

        function animateMetricValue(id, target, barId, suffix = '%', invert = false) {
            const el = document.getElementById(id);
            const bar = document.getElementById(barId);
            if (!el) return;
            
            let current = 0;
            const duration = 2200;
            const steps = 60;
            const interval = duration / steps;
            
            let step = 0;
            metricIntervals[id] = setInterval(() => {
                step++;
                // Ease out cubic for smooth deceleration
                const progress = 1 - Math.pow(1 - (step / steps), 3);
                current = target * progress;
                
                if (step >= steps) {
                    current = target;
                    clearInterval(metricIntervals[id]);
                    delete metricIntervals[id];
                }
                
                const displayValue = suffix === '%' ? current.toFixed(1) : current.toFixed(2);
                el.innerHTML = displayValue + `<span class="text-neutral-700">${suffix}</span>`;
            }, interval);
            
            // Animate bar using CSS transition (already reset in animateLiveMetrics)
            if (bar) {
                // Small delay to ensure transition is ready
                requestAnimationFrame(() => {
                    let barWidth;
                    if (suffix === '%') {
                        barWidth = target * 1.6;
                    } else if (suffix === 'x') {
                        barWidth = invert ? (1 / target) * 100 : target * 40;
                    }
                    bar.style.width = Math.min(barWidth, 100) + '%';
                });
            }
        }

        function startCellScanning() {
            const cells = [3, 5, 7, 9, 12, 14];
            const cursor = document.getElementById('analyst-cursor');
            const highlight = document.getElementById('cell-highlight');
            const notesContainer = document.getElementById('analysis-notes');
            const spreadsheetContainer = document.getElementById('spreadsheet-container');
            
            if (!cursor || !highlight || !spreadsheetContainer) return;
            
            let index = 0;
            
            const analysisNotes = [
                { cell: 3, title: 'Gross Margin Analysis', content: 'Exceptional gross margin of 62.0% significantly exceeds industry median (50-55%), indicating premium service positioning and operational efficiency. Gross profit of $104.8M provides substantial operating leverage for growth initiatives while maintaining market-leading profitability across service lines.' },
                { cell: 5, title: 'Equipment Investment Strategy', content: 'Equipment and fleet expenses at 8.0% of revenue ($13.5M annually) demonstrate balanced capital allocation between modern machinery and profitability. Strategic equipment investments support service quality and crew productivity while controlling long-term maintenance costs. Investment ratio aligns with best-in-class landscape service providers.' },
                { cell: 7, title: 'Operational Excellence', content: 'EBITDA of $64.3M (38.0% margin) reflects exceptional operational leverage and business model efficiency. Performance substantially exceeds industry benchmark (28.0%), indicating superior route optimization, crew management, and customer acquisition cost efficiency. This margin supports reinvestment capacity and strong shareholder returns.' },
                { cell: 9, title: 'Operating Profitability', content: 'Operating income of $56.7M (33.5% margin) post-depreciation demonstrates sustainable economic profitability. Margin stability suggests effective pricing strategies, customer mix optimization, and limited competitive pressure. Strong operating performance supports strategic growth initiatives and maintains financial resilience through seasonal fluctuations.' },
                { cell: 12, title: 'Capital Structure Health', content: 'Pre-tax income of $53.8M (31.8% margin) with conservative leverage demonstrates robust financial health. Low interest expense (2.0% of revenue) indicates minimal debt burden and strong cash generation. Financial flexibility supports equipment upgrades, geographic expansion, or bolt-on acquisition opportunities without material refinancing risk.' },
                { cell: 14, title: 'Bottom-Line Performance', content: 'Net income of $42.5M (25.1% margin) places GreenScape Landscaping in the top decile of comparable firms. Exceptional profitability combined with recurring revenue base (maintenance contracts) creates highly attractive unit economics. Strong cash conversion supports multiple value-creation pathways: organic growth, add-on services, or enhanced distributions to ownership.' }
            ];
            
            function scanNextCell() {
                if (index >= cells.length) {
                    cursor.classList.add('hidden');
                    highlight.classList.add('hidden');
                    return;
                }
                
                const cellNum = cells[index];
                const row = document.querySelector(`[data-cell="${cellNum}"]`);
                if (!row) {
                    index++;
                    scanNextCell();
                    return;
                }
                
                const rect = row.getBoundingClientRect();
                const container = document.getElementById('spreadsheet-container');
                const containerRect = container.getBoundingClientRect();
                
                // Move cursor first
                cursor.classList.remove('hidden');
                cursor.style.left = (rect.right - containerRect.left - 40) + 'px';
                cursor.style.top = (rect.top - containerRect.top + rect.height / 2) + 'px';
                
                // Then highlight after cursor arrives
                setTimeout(() => {
                    highlight.classList.remove('hidden');
                    highlight.style.left = (rect.left - containerRect.left) + 'px';
                    highlight.style.top = (rect.top - containerRect.top) + 'px';
                    highlight.style.width = rect.width + 'px';
                    highlight.style.height = rect.height + 'px';
                    
                    // Add analysis note after highlight appears
                    setTimeout(() => {
                        if (notesContainer) {
                            const note = analysisNotes[index];
                            const noteDiv = document.createElement('div');
                            noteDiv.className = 'border-l-2 border-white/20 pl-8 py-6 opacity-0 transition-all duration-1000';
                            noteDiv.innerHTML = `
                                <div class="font-mono text-xs text-neutral-600 mb-4 uppercase tracking-[0.4em]">${note.title}</div>
                                <p class="font-sans text-base text-neutral-400 leading-[1.9]">${note.content}</p>
                            `;
                            notesContainer.appendChild(noteDiv);
                            setTimeout(() => noteDiv.classList.remove('opacity-0'), 100);
                        }
                    }, 300);
                }, 500);
                
                // Move to next cell
                setTimeout(() => {
                    highlight.classList.add('hidden');
                    index++;
                    scanNextCell();
                }, 4000);
            }
            
            scanNextCell();
        }

        function populateInsightsFeed() {
            const feed = document.getElementById('insights-feed');
            if (!feed) return;
            
            const insights = [
                { time: '00:02', text: 'Gross margin expansion detected: +310 bps YoY', icon: '' },
                { time: '00:04', text: 'R&D efficiency ratio: 1.4x revenue per dollar invested', icon: '' },
                { time: '00:07', text: 'Operating leverage improving: +5% EBITDA vs +3% opex', icon: '' },
                { time: '00:09', text: 'Interest coverage comfortable at 5.9x EBIT', icon: '' },
                { time: '00:12', text: 'Tax rate optimized within regulatory guidelines', icon: '' },
                { time: '00:14', text: 'Net margin in top quartile vs industry peers', icon: '' }
            ];
            
            insights.forEach((insight, index) => {
                setTimeout(() => {
                    const item = document.createElement('div');
                    item.className = 'flex items-start gap-3 p-3 bg-neutral-900/50 border border-white/10 rounded text-sm opacity-0 translate-y-2 transition-all duration-300';
                    item.innerHTML = `
                        <span class="text-lg">${insight.icon}</span>
                        <div class="flex-1">
                            <div class="text-neutral-600 text-xs font-mono mb-1">${insight.time}</div>
                            <div class="text-neutral-300">${insight.text}</div>
                        </div>
                    `;
                    feed.appendChild(item);
                    setTimeout(() => {
                        item.classList.remove('opacity-0', 'translate-y-2');
                    }, 50);
                }, index * 2000);
            });
        }

        // Financial Statement Animation
        function animateFinancialStatement() {
            const virtualCursor = document.getElementById('virtual-cursor');
            const cellSelection = document.getElementById('cell-selection');
            const incomeStatement = document.getElementById('income-statement');
            
            // Cell selection sequence with analyst notes
            const cellSequence = [
                { 
                    cell: 3, 
                    note: 'Gross margin of 61.5% indicates strong pricing power and operational efficiency. Industry average: 55-60%. This premium suggests competitive moat through brand equity or technological advantage.',
                    delay: 1200 
                },
                { 
                    cell: 5, 
                    note: 'R&D investment at 14.7% of revenue demonstrates commitment to innovation while maintaining profitability. Benchmark range: 12-18% for sustainable growth companies. Allocation supports product pipeline development.',
                    delay: 3000 
                },
                { 
                    cell: 6, 
                    note: 'EBITDA margin of 21.2% reflects robust operational leverage. Peer median: 18-22%. Strong EBITDA generation provides capital for strategic investments and shareholder returns.',
                    delay: 4800 
                },
                { 
                    cell: 8, 
                    note: 'Operating margin (EBIT) at 17.9% shows efficient cost management post-depreciation. Typical range for mature tech firms: 15-20%. Margin stability indicates pricing discipline and scalable business model.',
                    delay: 6600 
                },
                { 
                    cell: 13, 
                    note: 'Pre-tax margin of 15.8% with favorable debt structure (interest coverage ratio: 5.9x). Conservative leverage supports financial flexibility for M&A or organic expansion.',
                    delay: 8400 
                },
                { 
                    cell: 15, 
                    note: 'Net margin of 12.5% translates to strong return on equity. With effective tax rate at 21%, the company demonstrates efficient tax planning within regulatory frameworks. Earnings quality is supported by cash flow conversion.',
                    delay: 10200 
                }
            ];

            let currentCell = 0;
            const highlightContainer = document.getElementById('analyst-highlights');
            
            function moveCursorToCell(cellNumber) {
                const targetRow = document.querySelector(`[data-cell="${cellNumber}"]`);
                if (!targetRow) return;
                
                const rect = targetRow.getBoundingClientRect();
                const statementRect = incomeStatement.getBoundingClientRect();
                
                // Show virtual cursor
                virtualCursor.classList.remove('hidden');
                virtualCursor.style.left = `${rect.left + rect.width * 0.7}px`;
                virtualCursor.style.top = `${rect.top + rect.height / 2}px`;
                
                // Animate cursor movement (simulated)
                setTimeout(() => {
                    // Show selection overlay
                    cellSelection.classList.remove('hidden');
                    cellSelection.style.left = `${rect.left - statementRect.left}px`;
                    cellSelection.style.top = `${rect.top - statementRect.top + incomeStatement.scrollTop}px`;
                    cellSelection.style.width = `${rect.width}px`;
                    cellSelection.style.height = `${rect.height}px`;
                    
                    // Highlight the row
                    targetRow.style.backgroundColor = 'rgba(255, 255, 255, 0.15)';
                }, 400);
            }
            
            function showNextHighlight() {
                if (currentCell < cellSequence.length) {
                    const sequence = cellSequence[currentCell];
                    
                    // Move cursor and select cell
                    moveCursorToCell(sequence.cell);
                    
                    // Add analyst note after selection
                    setTimeout(() => {
                        const highlightDiv = document.createElement('div');
                        highlightDiv.className = `p-4 bg-neutral-900 border-l-4 border-white mb-4 opacity-0 transition-opacity duration-500`;
                        highlightDiv.innerHTML = `
                            <div class="flex items-start gap-3">
                                <div class="flex-shrink-0 w-6 h-6 rounded-full bg-white text-black flex items-center justify-center text-xs font-bold mt-1">
                                    ${currentCell + 1}
                                </div>
                                <div class="flex-1">
                                    <div class="text-neutral-400 text-xs mb-1 uppercase tracking-wider">Cell ${sequence.cell} Analysis</div>
                                    <div class="text-white text-sm leading-relaxed">${sequence.note}</div>
                                </div>
                            </div>
                        `;
                        
                        highlightContainer.appendChild(highlightDiv);
                        setTimeout(() => highlightDiv.classList.remove('opacity-0'), 100);
                    }, 600);
                    
                    currentCell++;
                    if (currentCell < cellSequence.length) {
                        const nextDelay = cellSequence[currentCell].delay - cellSequence[currentCell - 1].delay;
                        setTimeout(showNextHighlight, nextDelay);
                    }
                }
            }
            
            // Start animation
            setTimeout(showNextHighlight, cellSequence[0].delay);

            // Animate metrics with proper net margin
            setTimeout(() => {
                animateMetric('gross-margin', 61.5);
                animateMetric('ebitda-margin', 21.2);
                animateMetric('op-margin', 17.9);
                animateMetric('net-margin', 12.5);
                
                // Animate ratio bars
                setTimeout(() => {
                    const rdBar = document.getElementById('rd-bar');
                    const smBar = document.getElementById('sm-bar');
                    const taxBar = document.getElementById('tax-bar');
                    
                    if (rdBar) {
                        rdBar.style.transition = 'width 1.5s cubic-bezier(0.4, 0, 0.2, 1)';
                        rdBar.style.width = '73.5%';
                    }
                    if (smBar) {
                        smBar.style.transition = 'width 1.5s cubic-bezier(0.4, 0, 0.2, 1)';
                        smBar.style.width = '51.2%';
                    }
                    if (taxBar) {
                        taxBar.style.transition = 'width 1.5s cubic-bezier(0.4, 0, 0.2, 1)';
                        taxBar.style.width = '84%';
                    }
                }, 500);
            }, 600);

            // Start highlighting with initial delay
            setTimeout(showNextHighlight, 1200);
        }

        function animateMetric(id, targetValue) {
            const el = document.getElementById(id);
            if (!el) return;

            let current = 0;
            const increment = targetValue / 50;
            const interval = setInterval(() => {
                current += increment;
                if (current >= targetValue) {
                    current = targetValue;
                    clearInterval(interval);
                }
                el.textContent = current.toFixed(1) + '%';
            }, 30);
        }

        // Website Creation Animation
        function animateWebsiteCreation() {
            const codeSteps = [
                { code: '<span class="text-purple-400">const</span> <span class="text-blue-400">Hero</span> = () => {', delay: 0 },
                { code: '  <span class="text-purple-400">return</span> (', delay: 400 },
                { code: '    &lt;<span class="text-green-400">section</span>&gt;', delay: 800 },
                { code: '      &lt;<span class="text-green-400">h1</span>&gt;', delay: 1200 },
                { code: '        <span class="text-yellow-400">"Innovation Starts Here"</span>', delay: 1600 },
                { code: '      &lt;/<span class="text-green-400">h1</span>&gt;', delay: 2000 },
                { code: '      &lt;<span class="text-green-400">button</span>&gt;', delay: 2400 },
                { code: '        <span class="text-yellow-400">"Get Started"</span>', delay: 2800 },
                { code: '      &lt;/<span class="text-green-400">button</span>&gt;', delay: 3200 },
                { code: '    &lt;/<span class="text-green-400">section</span>&gt;', delay: 3600 },
                { code: '  )', delay: 4000 },
                { code: '}', delay: 4400 }
            ];

            const visualSteps = [
                { html: '<div class="text-4xl font-bold text-gray-900 opacity-0 transition-opacity duration-500">Innovation Starts Here</div>', delay: 1600 },
                { html: '<button class="mt-4 bg-black text-white px-6 py-3 rounded opacity-0 transition-opacity duration-500 hover:bg-gray-800">Get Started</button>', delay: 2800 },
                { html: '<div class="mt-6 w-full h-32 bg-gradient-to-r from-white to-neutral-500 rounded-lg opacity-0 transition-opacity duration-500"></div>', delay: 4800 }
            ];

            const codeContainer = document.getElementById('code-lines');
            const previewContainer = document.getElementById('preview-container');

            if (!codeContainer || !previewContainer) return;

            // Animate code
            codeSteps.forEach((step, index) => {
                setTimeout(() => {
                    const line = document.createElement('div');
                    line.innerHTML = `<span class="text-neutral-600 mr-2">${index + 1}</span>${step.code}`;
                    line.className = 'opacity-0 transition-opacity duration-300';
                    codeContainer.appendChild(line);
                    setTimeout(() => line.classList.remove('opacity-0'), 50);
                }, step.delay);
            });

            // Animate visual output
            visualSteps.forEach((step, index) => {
                setTimeout(() => {
                    const el = document.createElement('div');
                    el.innerHTML = step.html;
                    const child = el.firstElementChild;
                    previewContainer.appendChild(child);
                    setTimeout(() => child.classList.remove('opacity-0'), 50);
                }, step.delay);
            });
        }

        // --- WEBSITE DESIGN MODAL FUNCTIONS ---

        // --- WEBSITE CODE ANIMATION ---
        // --- WEBSITE DESIGN SYSTEM ANIMATION ---
        function initDesignSystem() {
            // 1. Title typing animation
            const titleEl = document.getElementById('website-main-title');
            if (titleEl) {
                const text = titleEl.textContent;
                titleEl.textContent = '';
                let i = 0;
                const typeInterval = setInterval(() => {
                    if (i < text.length) {
                        titleEl.textContent += text.charAt(i);
                        i++;
                    } else {
                        clearInterval(typeInterval);
                        titleEl.classList.add('complete');
                        
                        // 2. Fade in subtitle after typing completes
                        setTimeout(() => {
                            const subtitleEl = document.getElementById('website-subtitle-text');
                            if (subtitleEl) {
                                subtitleEl.style.opacity = '1';
                            }
                        }, 300);
                    }
                }, 60);
            }

            // 3. Animate build metrics
            setTimeout(() => {
                animateBuildMetrics();
            }, 2000);

            // 4. Initialize design mode tabs
            setTimeout(() => {
                initDesignTabs();
            }, 500);
        }

        function animateBuildMetrics() {
            const metrics = [
                { id: 'build-metric-1', valueId: 'build-1-value', barId: 'build-1-bar', value: 2847, max: 3000, unit: '' },
                { id: 'build-metric-2', valueId: 'build-2-value', barId: 'build-2-bar', value: 42, max: 50, unit: '' },
                { id: 'build-metric-3', valueId: 'build-3-value', barId: 'build-3-bar', value: 1.8, max: 3.0, unit: 's' }
            ];

            metrics.forEach((metric, index) => {
                setTimeout(() => {
                    const metricEl = document.getElementById(metric.id);
                    const valueEl = document.getElementById(metric.valueId);
                    const barEl = document.getElementById(metric.barId);

                    if (!metricEl || !valueEl || !barEl) {
                        console.error('Missing element:', metric.id, metric.valueId, metric.barId);
                        return;
                    }

                    // Fade in the metric
                    metricEl.style.opacity = '1';

                    // Calculate bar width percentage
                    const widthPercent = (metric.value / metric.max) * 100;

                    // Animate bar width
                    requestAnimationFrame(() => {
                        barEl.style.width = widthPercent + '%';
                    });

                    // Animate value from 0 to target
                    let currentValue = 0;
                    const targetValue = metric.value;
                    const steps = 60;
                    const increment = targetValue / steps;
                    const duration = 2200;
                    const intervalTime = duration / steps;

                    const valueInterval = setInterval(() => {
                        currentValue += increment;
                        if (currentValue >= targetValue) {
                            currentValue = targetValue;
                            clearInterval(valueInterval);
                        }
                        
                        // Format value based on unit
                        if (metric.unit === 's') {
                            valueEl.textContent = currentValue.toFixed(1);
                        } else {
                            // Add comma formatting for large numbers
                            valueEl.textContent = Math.round(currentValue).toLocaleString();
                        }
                    }, intervalTime);

                }, index * 400);
            });
        }

        function initDesignTabs() {
            const tabs = document.querySelectorAll('.design-tab');
            const contents = document.querySelectorAll('.design-content');
            
            console.log('Initializing design tabs:', tabs.length, 'tabs found');
            console.log('Content sections:', contents.length, 'found');

            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    const mode = tab.dataset.mode;
                    
                    // Update active tab
                    tabs.forEach(t => {
                        t.classList.remove('active', 'text-white', 'border-white');
                        t.classList.add('text-neutral-600', 'border-transparent');
                    });
                    tab.classList.add('active', 'text-white', 'border-white');
                    tab.classList.remove('text-neutral-600', 'border-transparent');
                    
                    // Show corresponding content
                    contents.forEach(content => {
                        if (content.id === `design-${mode}`) {
                            content.classList.remove('hidden');
                            // Trigger animation
                            content.classList.remove('show-animate');
                            void content.offsetWidth; // Force reflow
                            content.classList.add('show-animate');
                        } else {
                            content.classList.add('hidden');
                            content.classList.remove('show-animate');
                        }
                    });
                    
                    // Re-trigger animations
                    triggerDesignAnimations(mode);
                });
            });

            // Initialize device switches
            const deviceSwitches = document.querySelectorAll('.device-switch');
            deviceSwitches.forEach(btn => {
                btn.addEventListener('click', () => {
                    const device = btn.dataset.device;
                    switchDevice(device);
                });
            });
        }

        function triggerDesignAnimations(mode) {
            // Get only the design elements in the active content
            const activeContent = document.getElementById(`design-${mode}`);
            if (!activeContent) return;
            
            const elements = activeContent.querySelectorAll('.design-element');
            
            // Reset each element's animation
            elements.forEach((el, index) => {
                // Store the original inline style
                const originalStyle = el.getAttribute('style') || '';
                
                // Extract animation value from original style if it exists
                const animMatch = originalStyle.match(/animation:\s*([^;]+)/);
                const originalAnimation = animMatch ? animMatch[1] : 'fadeInDesign 0.8s ease-out 0.2s forwards';
                
                // Reset to invisible
                el.style.opacity = '0';
                el.style.animation = 'none';
                
                // Force reflow
                void el.offsetHeight;
                
                // Restore animation after a brief delay
                setTimeout(() => {
                    el.style.animation = originalAnimation;
                }, 50);
            });
        }

        function switchDevice(device) {
            // Update active device button
            const deviceBtns = document.querySelectorAll('.device-switch');
            deviceBtns.forEach(btn => {
                btn.classList.remove('active', 'bg-white/10');
            });
            
            const activeBtn = document.querySelector(`.device-switch[data-device="${device}"]`);
            if (activeBtn) {
                activeBtn.classList.add('active', 'bg-white/10');
            }

            // Update browser viewport size with smooth transition
            const viewport = document.getElementById('browser-viewport');
            if (!viewport) return;
            
            const container = viewport.parentElement;
            container.style.transition = 'all 500ms cubic-bezier(0.4, 0, 0.2, 1)';
            
            if (device === 'mobile') {
                container.style.maxWidth = '400px';
                container.style.margin = '0 auto';
            } else if (device === 'tablet') {
                container.style.maxWidth = '800px';
                container.style.margin = '0 auto';
            } else {
                container.style.maxWidth = '100%';
                container.style.margin = '0';
            }
        }

        function triggerMotionDemo() {
            // Re-trigger motion demo animations
            const motionDemos = document.querySelectorAll('[class*="motion-demo-"]');
            motionDemos.forEach(demo => {
                // Remove and re-add animation class to restart
                const animClass = Array.from(demo.classList).find(c => c.startsWith('motion-demo-'));
                if (animClass) {
                    demo.classList.remove(animClass);
                    setTimeout(() => {
                        demo.classList.add(animClass);
                    }, 50);
                }
            });
        }

        // --- END WEBSITE DESIGN SYSTEM ANIMATION ---

        let currentDesignMode = 'layout';
        let isDesignTransitioning = false;

        function switchDesignMode(mode) {
            if (isDesignTransitioning || mode === currentDesignMode) return;
            
            isDesignTransitioning = true;
            currentDesignMode = mode;

            // 1. Remove all active classes from tabs
            const allTabs = document.querySelectorAll('.design-tab');
            allTabs.forEach(tab => {
                tab.classList.remove('active');
                tab.classList.add('text-neutral-500');
            });

            // 2. Set active tab
            const activeTab = document.querySelector(`.design-tab[onclick*="${mode}"]`);
            if (activeTab) {
                activeTab.classList.add('active');
                activeTab.classList.remove('text-neutral-500');
            }

            // 3. Hide all content sections
            const allContent = document.querySelectorAll('.design-content');
            allContent.forEach(content => {
                content.classList.remove('active');
                content.classList.add('hidden');
            });

            // 4. Show selected content
            const activeContent = document.getElementById(`design-${mode}`);
            if (activeContent) {
                setTimeout(() => {
                    activeContent.classList.remove('hidden');
                    activeContent.classList.add('active');
                }, 50);
            }

            // 5. Unlock transition after duration
            setTimeout(() => {
                isDesignTransitioning = false;
            }, 600);
        }

        const perfMetricIntervals = {};

        function animatePerfMetrics() {
            const metrics = [
                { 
                    id: 'perf-metric-1', 
                    value: 1.2, 
                    target: 2.5, 
                    unit: 's',
                    label: 'LCP',
                    inverse: false 
                },
                { 
                    id: 'perf-metric-2', 
                    value: 45, 
                    target: 100, 
                    unit: 'ms',
                    label: 'FID',
                    inverse: false 
                },
                { 
                    id: 'perf-metric-3', 
                    value: 0.05, 
                    target: 0.1, 
                    unit: '',
                    label: 'CLS',
                    inverse: false 
                }
            ];

            // Clear any existing intervals
            Object.values(perfMetricIntervals).forEach(interval => clearInterval(interval));
            
            metrics.forEach((metric, index) => {
                setTimeout(() => {
                    const container = document.getElementById(metric.id);
                    if (!container) return;

                    // Fade in container
                    container.style.opacity = '1';

                    const valueEl = document.getElementById(`perf-${index + 1}-value`);
                    const barEl = document.getElementById(`perf-${index + 1}-bar`);

                    if (!valueEl || !barEl) return;

                    // Calculate bar width percentage (value/target * 100, capped at 100)
                    const widthPercent = Math.min((metric.value / metric.target) * 100, 100);

                    // Reset bar without transition
                    barEl.style.transition = 'none';
                    barEl.style.width = '0%';
                    barEl.offsetHeight; // Force reflow

                    // Re-enable transition
                    barEl.style.transition = 'width 2000ms cubic-bezier(0.4, 0, 0.2, 1)';

                    // Animate value from 0 to target
                    let currentValue = 0;
                    const targetValue = metric.value;
                    const steps = 60;
                    const increment = targetValue / steps;
                    const duration = 2200;
                    const intervalTime = duration / steps;

                    perfMetricIntervals[metric.id] = setInterval(() => {
                        currentValue += increment;
                        if (currentValue >= targetValue) {
                            currentValue = targetValue;
                            clearInterval(perfMetricIntervals[metric.id]);
                        }
                        
                        // Format value based on unit
                        if (metric.unit === 's') {
                            valueEl.textContent = currentValue.toFixed(1) + 's';
                        } else if (metric.unit === 'ms') {
                            valueEl.textContent = Math.round(currentValue) + 'ms';
                        } else {
                            valueEl.textContent = currentValue.toFixed(2);
                        }
                    }, intervalTime);

                    // Animate bar width
                    requestAnimationFrame(() => {
                        barEl.style.width = widthPercent + '%';
                    });

                }, index * 400);
            });
        }

        function switchDevice(device) {
            // Update active device button
            const deviceBtns = document.querySelectorAll('.device-btn');
            deviceBtns.forEach(btn => {
                btn.classList.remove('bg-white/10');
                btn.querySelector('i').classList.remove('text-white');
                btn.querySelector('i').classList.add('text-neutral-600');
            });
            
            const activeBtn = document.querySelector(`.device-btn[data-device="${device}"]`);
            if (activeBtn) {
                activeBtn.classList.add('bg-white/10');
                activeBtn.querySelector('i').classList.remove('text-neutral-600');
                activeBtn.querySelector('i').classList.add('text-white');
            }

            // Update preview container size with smooth transition
            const previewContainer = document.getElementById('design-preview-container');
            if (!previewContainer) return;
            
            previewContainer.style.transition = 'all 500ms cubic-bezier(0.4, 0, 0.2, 1)';
            
            if (device === 'mobile') {
                previewContainer.style.maxWidth = '375px';
                previewContainer.style.margin = '0 auto';
            } else if (device === 'tablet') {
                previewContainer.style.maxWidth = '768px';
                previewContainer.style.margin = '0 auto';
            } else {
                previewContainer.style.maxWidth = '100%';
                previewContainer.style.margin = '0';
            }
        }

        function triggerMotionDemo() {
            // Re-trigger motion demo animations
            const motionDemos = document.querySelectorAll('[class*="motion-demo-"]');
            motionDemos.forEach(demo => {
                // Remove and re-add animation class to restart
                const animClass = Array.from(demo.classList).find(c => c.startsWith('motion-demo-'));
                if (animClass) {
                    demo.classList.remove(animClass);
                    setTimeout(() => {
                        demo.classList.add(animClass);
                    }, 50);
                }
            });
        }

        // --- END WEBSITE DESIGN MODAL FUNCTIONS ---

        // Attach listeners to service cards
        document.querySelectorAll('.service-card').forEach(card => {
            card.addEventListener('click', () => {
                const serviceId = card.dataset.service;
                openServiceModal(serviceId);
            });
        });

        closeModal.addEventListener('click', closeModalFunc);
        
        // Helper functions for body scroll lock
        function lockBodyScroll() {
            const scrollbarWidth = window.innerWidth - document.documentElement.clientWidth;
            document.body.style.overflow = 'hidden';
            document.body.style.paddingRight = scrollbarWidth + 'px';
        }
        
        function unlockBodyScroll() {
            document.body.style.overflow = '';
            document.body.style.paddingRight = '';
        }
        
        // Prevent body scroll when modal is open
        function lockBodyScroll() {
            const scrollbarWidth = window.innerWidth - document.documentElement.clientWidth;
            document.body.style.overflow = 'hidden';
            document.body.style.paddingRight = scrollbarWidth + 'px';
        }
        
        function unlockBodyScroll() {
            document.body.style.overflow = '';
            document.body.style.paddingRight = '';
        }
        
        // Close on backdrop click
        modal.addEventListener('click', (e) => {
            if (e.target === modal) closeModalFunc();
        });

        // Esc key to close
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && modal.classList.contains('active')) {
                closeModalFunc();
            }
        });


        // --- CHATBOT SYSTEM ---
        const GEMINI_API_KEY = 'AIzaSyB8qNBZZhZBLZw1P-yzQpEz0_W1xMyXr9M';
        const GEMINI_API_URL = 'https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-exp:generateContent';
        
        const chatbotToggle = document.getElementById('chatbot-toggle');
        const chatbotWindow = document.getElementById('chatbot-window');
        const chatbotClose = document.getElementById('chatbot-close');
        const chatMessages = document.getElementById('chat-messages');
        const chatInput = document.getElementById('chat-input');
        const chatSend = document.getElementById('chat-send');
        const chatBadge = document.querySelector('.chat-badge');
        
        let chatHistory = [];
        let isProcessing = false;
        
        // System context for AI
        const SYSTEM_CONTEXT = `You are a helpful digital assistant for Sulayman Bowles' portfolio website. Your role is to guide visitors and answer their questions.

CONTEXT ABOUT SULAYMAN BOWLES:
 Based in Austin, TX | UT Austin '28
 Specializes in: Financial Consulting, Website Design, Data Science
 Core philosophy: "Finance. Code. Entropy. A system of evidence."
 Contact: sulayman.bowles@gmail.com

PRIMARY SERVICES:
**Financial Consulting**
- DCF modeling & valuation analysis
- Investment thesis development
- Strategic planning & scenario testing
- Risk assessment frameworks
- M&A due diligence

**Website Design & Development**
- Custom web design & development
- Interactive experiences & generative art
- E-commerce platforms
- Brand identity & portfolios
- Web3/blockchain interfaces

NOTABLE PROJECTS:
 Bittensor  VC-backed AI startup: co-founder role, $80K revenue, $10K DormDAO grant
 Chain Payroll  Smart contract payroll streaming platform (1st place, hackathon grand prize)
 Point72 Thesis  Professional equity research with DCF modeling & valuation analysis
 TaskFormer  Strategic consulting focused on decision architecture & systems optimization

YOUR BEHAVIOR:
- Be warm, professional, and concise (under 80 words)
- Help visitors navigate the portfolio and understand services
- For project inquiries, encourage direct contact via email
- Provide specific answers about work, capabilities, and process
- Use markdown: **bold** for emphasis, *italic* for examples
- Match the sophisticated, minimalist tone of the site

You're an assistant, not Sulayman himself. Guide, inform, and facilitate.`;

        // Load chat history from sessionStorage
        function loadChatHistory() {
            const saved = sessionStorage.getItem('chatHistory');
            if (saved) {
                chatHistory = JSON.parse(saved);
                chatHistory.forEach(msg => renderMessage(msg.role, msg.content, msg.timestamp, false));
                scrollToBottom();
            } else {
                // Welcome message
                const welcomeMsg = {
                    role: 'ai',
                    content: 'Hello! I can help you explore Sulayman\'s work in **financial consulting** and **website design**. What would you like to know?',
                    timestamp: Date.now()
                };
                chatHistory.push(welcomeMsg);
                renderMessage('ai', welcomeMsg.content, welcomeMsg.timestamp, true);
                saveChatHistory();
            }
        }
        
        // Save chat history
        function saveChatHistory() {
            sessionStorage.setItem('chatHistory', JSON.stringify(chatHistory));
        }
        
        // Render message
        function renderMessage(role, content, timestamp, animate = true) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `chat-message ${role}`;
            if (!animate) messageDiv.style.animation = 'none';
            
            const avatar = document.createElement('div');
            avatar.className = 'chat-avatar';
            avatar.innerHTML = role === 'user' 
                ? '<i data-lucide="user" class="w-4 h-4 text-black"></i>'
                : '<i data-lucide="sparkles" class="w-4 h-4 text-neutral-400"></i>';
            
            const bubbleContainer = document.createElement('div');
            
            const bubble = document.createElement('div');
            bubble.className = 'chat-bubble';
            bubble.innerHTML = formatMessage(content);
            
            const time = document.createElement('div');
            time.className = 'chat-timestamp';
            time.textContent = formatTime(timestamp);
            
            bubbleContainer.appendChild(bubble);
            bubbleContainer.appendChild(time);
            
            messageDiv.appendChild(avatar);
            messageDiv.appendChild(bubbleContainer);
            
            chatMessages.appendChild(messageDiv);
            lucide.createIcons();
            
            if (animate) {
                setTimeout(scrollToBottom, 100);
            }
        }
        
        // Format message with basic markdown
        function formatMessage(text) {
            return text
                .replace(/\*\*(.+?)\*\*/g, '<strong>$1</strong>')
                .replace(/\*(.+?)\*/g, '<em>$1</em>')
                .replace(/`(.+?)`/g, '<code style="background: rgba(255,255,255,0.1); padding: 2px 4px; border-radius: 3px;">$1</code>')
                .replace(/\n/g, '<br>');
        }
        
        // Format timestamp
        function formatTime(timestamp) {
            const date = new Date(timestamp);
            return date.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' });
        }
        
        // Scroll to bottom
        function scrollToBottom() {
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }
        
        // Show typing indicator
        function showTypingIndicator() {
            const indicator = document.createElement('div');
            indicator.className = 'chat-message ai typing-indicator-msg';
            indicator.innerHTML = `
                <div class="chat-avatar">
                    <i data-lucide="sparkles" class="w-4 h-4 text-neutral-400"></i>
                </div>
                <div class="typing-indicator">
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                </div>
            `;
            chatMessages.appendChild(indicator);
            lucide.createIcons();
            scrollToBottom();
            return indicator;
        }
        
        // Send message to Gemini API
        async function sendToGemini(userMessage) {
            try {
                // Build conversation history in proper format
                const recentHistory = chatHistory.slice(-3).filter(msg => msg.role).map(msg => ({
                    role: msg.role === 'user' ? 'user' : 'model',
                    parts: [{ text: msg.content }]
                }));

                const body = {
                    contents: [
                        ...recentHistory,
                        {
                            role: 'user',
                            parts: [{ text: userMessage }]
                        }
                    ],
                    systemInstruction: {
                        parts: [{ text: SYSTEM_CONTEXT }]
                    },
                    generationConfig: {
                        temperature: 0.8,
                        maxOutputTokens: 150,
                        topP: 0.95
                    }
                };
                
                const response = await fetch(`${GEMINI_API_URL}?key=${GEMINI_API_KEY}`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(body)
                });
                
                if (!response.ok) {
                    const errorData = await response.json().catch(() => ({}));
                    console.error('API Error Response:', response.status, errorData);
                    
                    if (response.status === 400) {
                        throw new Error(errorData.error?.message || 'Invalid request - please try a different question');
                    } else if (response.status === 403) {
                        throw new Error(errorData.error?.message || 'API key issue - please contact support');
                    } else if (response.status === 429) {
                        throw new Error('Too many requests - please wait a moment');
                    }
                    throw new Error(errorData.error?.message || `API error: ${response.status}`);
                }
                
                const data = await response.json();
                console.log('API Response:', data);
                
                const text = 
                    data.candidates?.[0]?.content?.parts?.[0]?.text ||
                    data.candidates?.[0]?.content?.parts?.map(p => p.text).join(' ') ||
                    '';
                
                if (!text) {
                    throw new Error('Empty response from model');
                }
                
                return text;
            } catch (error) {
                console.error('Gemini API Error:', error);
                
                if (error.message.includes('Failed to fetch')) {
                    return 'Unable to reach the AI service from this browser. Check your connection or try again in a bit.';
                } else if (error.message.toLowerCase().includes('api key')) {
                    return 'There seems to be an API key configuration problem. Please contact **sulayman.bowles@gmail.com**.';
                } else if (error.message.toLowerCase().includes('rate') || error.message.includes('Too many requests')) {
                    return 'I am getting a lot of traffic. Please wait a short while and try again.';
                }
                
                return `I hit an issue: ${error.message}. You can also email **sulayman.bowles@gmail.com**.`;
            }
        }
        
        // Handle send message
        async function handleSendMessage() {
            const message = chatInput.value.trim();
            if (!message || isProcessing) return;
            
            isProcessing = true;
            chatSend.disabled = true;
            chatInput.disabled = true;
            
            // Add user message
            const userMsg = {
                role: 'user',
                content: message,
                timestamp: Date.now()
            };
            chatHistory.push(userMsg);
            renderMessage('user', message, userMsg.timestamp, true);
            saveChatHistory();
            
            chatInput.value = '';
            
            // Show typing indicator
            const typingIndicator = showTypingIndicator();
            
            // Get AI response
            const aiResponse = await sendToGemini(message);
            
            // Remove typing indicator
            typingIndicator.remove();
            
            // Add AI message
            const aiMsg = {
                role: 'ai',
                content: aiResponse,
                timestamp: Date.now()
            };
            chatHistory.push(aiMsg);
            renderMessage('ai', aiResponse, aiMsg.timestamp, true);
            saveChatHistory();
            
            isProcessing = false;
            chatSend.disabled = false;
            chatInput.disabled = false;
            chatInput.focus();
        }
        
        // Toggle chatbot
        chatbotToggle.addEventListener('click', () => {
            const isActive = chatbotWindow.classList.toggle('active');
            chatbotToggle.classList.toggle('active', isActive);
            chatbotToggle.setAttribute('aria-expanded', isActive);
            
            if (isActive) {
                chatInput.focus();
                chatBadge.style.display = 'none';
                if (chatHistory.length === 0) {
                    loadChatHistory();
                }
            }
        });
        
        // Close chatbot
        chatbotClose.addEventListener('click', () => {
            chatbotWindow.classList.remove('active');
            chatbotToggle.classList.remove('active');
            chatbotToggle.setAttribute('aria-expanded', 'false');
        });
        
        // Send message
        chatSend.addEventListener('click', handleSendMessage);
        
        // Enter to send
        chatInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                handleSendMessage();
            }
        });
        
        // ESC to close
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && chatbotWindow.classList.contains('active')) {
                chatbotClose.click();
            }
        });
        
        // Initialize on load
        setTimeout(() => {
            loadChatHistory();
        }, 2000);


        // --- 5. LOAD SEQUENCE ---
        window.addEventListener('load', () => {
            const loader = document.getElementById('loader');
            const scrambleEls = document.querySelectorAll('.scramble-text');
            
            scrambleEls.forEach(el => {
                const fx = new TextScramble(el);
                fx.setText(el.dataset.final);
            });

            setTimeout(() => {
                loader.classList.add('loader-hidden');
                initScrollReveal();
                initGenerativeCovers(); // Start Generative Art
                initLiveTicker();       // Start Live Data
                
                setTimeout(() => {
                    document.querySelectorAll('.scramble-hover').forEach(el => {
                        const fx = new TextScramble(el);
                        fx.setText(el.dataset.final);
                        el.addEventListener('mouseenter', () => fx.setText(el.dataset.final));
                    });
                }, 400);

            }, 800);
        });

        // --- 10. GENERATIVE COVERS ---
        // Debounce utility for resize handlers
        function debounce(fn, delay) {
            let timeoutId;
            return function(...args) {
                clearTimeout(timeoutId);
                timeoutId = setTimeout(() => fn.apply(this, args), delay);
            };
        }
        
        function initGenerativeCovers() {
            // 1. Bittensor (Network Graph)
            const canvas1 = document.getElementById('canvas-bittensor');
            if (canvas1) {
                const ctx = canvas1.getContext('2d');
                let width, height;
                let nodes = [];
                let isHovered = false;
                let isVisible = false;
                let animationId = null;
                
                const parent = canvas1.parentElement;
                parent.addEventListener('mouseenter', () => isHovered = true);
                parent.addEventListener('mouseleave', () => isHovered = false);
                
                // Visibility detection
                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        isVisible = entry.isIntersecting;
                        if (isVisible && !animationId) {
                            animate();
                        }
                    });
                }, { threshold: 0.1 });
                observer.observe(canvas1);

                const createNode = () => ({
                    x: Math.random() * width,
                    y: Math.random() * height,
                    vx: (Math.random() - 0.5) * 0.5,
                    vy: (Math.random() - 0.5) * 0.5,
                    life: Math.random() * 100 + 100, // Longer life
                    age: 0,
                    opacity: 0
                });

                const resize = () => {
                    width = canvas1.width = canvas1.parentElement.offsetWidth;
                    height = canvas1.height = canvas1.parentElement.offsetHeight;
                    nodes = [];
                    for(let i=0; i<50; i++) { // More nodes
                        nodes.push(createNode());
                        nodes[i].opacity = 1; // Start visible
                        nodes[i].age = 50;
                    }
                };
                resize();
                window.addEventListener('resize', debounce(resize, 150));

                const animate = () => {
                    ctx.clearRect(0, 0, width, height);
                    
                    // Churn: Spawn new nodes
                    if (nodes.length < 50 && Math.random() < 0.1) {
                        nodes.push(createNode());
                    }

                    nodes.forEach((node, index) => {
                        // Lifecycle
                        node.age++;
                        if (node.age < 20) node.opacity = node.age / 20;
                        else if (node.age > node.life - 20) node.opacity = (node.life - node.age) / 20;
                        else node.opacity = 1;
                        
                        if (node.age >= node.life) {
                            nodes.splice(index, 1);
                            return;
                        }

                        // Movement
                        let shakeX = 0, shakeY = 0;
                        if (isHovered) {
                            shakeX = (Math.random() - 0.5) * 2;
                            shakeY = (Math.random() - 0.5) * 2;
                        }
                        
                        node.x += node.vx;
                        node.y += node.vy;
                        
                        // Bounce off walls
                        if(node.x < 0 || node.x > width) node.vx *= -1;
                        if(node.y < 0 || node.y > height) node.vy *= -1;
                        
                        const drawX = node.x + shakeX;
                        const drawY = node.y + shakeY;

                        // Draw Node
                        ctx.fillStyle = isHovered ? '#ff3333' : '#666'; // Lighter grey
                        ctx.globalAlpha = node.opacity;
                        ctx.beginPath();
                        ctx.arc(drawX, drawY, isHovered ? 2.5 : 2, 0, Math.PI * 2);
                        ctx.fill();

                        // Connections
                        nodes.forEach((other, otherIndex) => {
                            if (index >= otherIndex) return; // Avoid double drawing

                            const dx = node.x - other.x;
                            const dy = node.y - other.y;
                            const dist = Math.sqrt(dx*dx + dy*dy);
                            
                            const maxDist = isHovered ? 80 : 120; // Shorter connections on hover (breaking)
                            
                            if(dist < maxDist) {
                                ctx.beginPath();
                                ctx.moveTo(drawX, drawY);
                                
                                let otherShakeX = 0, otherShakeY = 0;
                                if (isHovered) {
                                    otherShakeX = (Math.random() - 0.5) * 2;
                                    otherShakeY = (Math.random() - 0.5) * 2;
                                }
                                ctx.lineTo(other.x + otherShakeX, other.y + otherShakeY);
                                
                                ctx.strokeStyle = isHovered ? '#ff3333' : '#444';
                                ctx.globalAlpha = (1 - dist/maxDist) * Math.min(node.opacity, other.opacity) * 0.8;
                                
                                // Glitch effect: randomly don't draw some frames on hover
                                if (!isHovered || Math.random() > 0.1) {
                                    ctx.stroke();
                                }
                            }
                        });
                    });
                    ctx.globalAlpha = 1;
                    if (isVisible) {
                        animationId = requestAnimationFrame(animate);
                    } else {
                        animationId = null;
                    }
                };
                // Don't start immediately, let Intersection Observer trigger it
            }

            // 2. Payroll (Data Stream)
            const canvas2 = document.getElementById('canvas-payroll');
            if (canvas2) {
                const ctx = canvas2.getContext('2d');
                let width, height;
                let drops = [];
                let isVisible = false;
                let animationId = null;
                
                const resize = () => {
                    width = canvas2.width = canvas2.parentElement.offsetWidth;
                    height = canvas2.height = canvas2.parentElement.offsetHeight;
                    drops = [];
                    for(let i=0; i<width/20; i++) {
                        drops.push({
                            x: i * 20,
                            y: Math.random() * height,
                            speed: 1 + Math.random() * 2,
                            chars: "010101"
                        });
                    }
                };
                resize();
                window.addEventListener('resize', debounce(resize, 150));
                
                // Visibility detection
                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        isVisible = entry.isIntersecting;
                        if (isVisible && !animationId) {
                            animate();
                        }
                    });
                }, { threshold: 0.1 });
                observer.observe(canvas2);

                const animate = () => {
                    ctx.fillStyle = 'rgba(10, 10, 10, 0.1)'; // Trail effect
                    ctx.fillRect(0, 0, width, height);
                    ctx.fillStyle = '#333';
                    ctx.font = '10px monospace';

                    drops.forEach(drop => {
                        ctx.fillText(drop.chars[Math.floor(Math.random()*drop.chars.length)], drop.x, drop.y);
                        drop.y += drop.speed;
                        if(drop.y > height) drop.y = 0;
                    });
                    if (isVisible) {
                        animationId = requestAnimationFrame(animate);
                    } else {
                        animationId = null;
                    }
                };
            }

            // 3. Point72 (Candlesticks)
            const canvas3 = document.getElementById('canvas-point72');
            if (canvas3) {
                const ctx = canvas3.getContext('2d');
                let width, height;
                let candles = [];
                let isHovered = false;
                let isVisible = false;
                let animationId = null;

                const parent = canvas3.parentElement;
                parent.addEventListener('mouseenter', () => isHovered = true);
                parent.addEventListener('mouseleave', () => isHovered = false);
                
                // Visibility detection
                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        isVisible = entry.isIntersecting;
                        if (isVisible && !animationId) {
                            animate();
                        }
                    });
                }, { threshold: 0.1 });
                observer.observe(canvas3);
                
                const resize = () => {
                    width = canvas3.width = canvas3.parentElement.offsetWidth;
                    height = canvas3.height = canvas3.parentElement.offsetHeight;
                    initCandles();
                };
                
                function initCandles() {
                    candles = [];
                    let price = 100;
                    const candleWidth = 10;
                    for(let x = 0; x < width; x += candleWidth + 2) {
                        const change = (Math.random() - 0.5) * 10;
                        const open = price;
                        const close = price + change;
                        const high = Math.max(open, close) + Math.random() * 5;
                        const low = Math.min(open, close) - Math.random() * 5;
                        candles.push({ x, open, close, high, low });
                        price = close;
                    }
                }
                
                resize();
                window.addEventListener('resize', debounce(resize, 150));

                const animate = () => {
                    if (!isVisible) {
                        animationId = null;
                        return;
                    }
                    // Volatility Multiplier
                    const volMult = isHovered ? 4 : 1;

                    // Shift candles left
                    candles.shift();
                    const last = candles[candles.length-1];
                    const change = (Math.random() - 0.5) * 10 * volMult;
                    const open = last.close;
                    const close = open + change;
                    const high = Math.max(open, close) + Math.random() * 5 * volMult;
                    const low = Math.min(open, close) - Math.random() * 5 * volMult;
                    candles.push({ 
                        x: last.x + 12, // 10 width + 2 gap
                        open, close, high, low 
                    });

                    // Redraw
                    ctx.clearRect(0, 0, width, height);
                    
                    ctx.save();
                    if (isHovered) {
                        // Shake Effect
                        const shake = 2;
                        ctx.translate((Math.random() - 0.5) * shake, (Math.random() - 0.5) * shake);
                    }

                    // Center vertically based on last price
                    const offsetY = height/2 - last.close;

                    candles.forEach((c, i) => {
                        // Recalculate X to keep them moving
                        const drawX = width - ((candles.length - i) * 12);
                        
                        ctx.strokeStyle = c.close > c.open ? '#444' : '#222';
                        ctx.fillStyle = c.close > c.open ? '#444' : '#222';
                        
                        // Wick
                        ctx.beginPath();
                        ctx.moveTo(drawX + 5, c.high + offsetY);
                        ctx.lineTo(drawX + 5, c.low + offsetY);
                        ctx.stroke();
                        
                        // Body
                        ctx.fillRect(drawX, Math.min(c.open, c.close) + offsetY, 10, Math.abs(c.close - c.open));
                    });
                    
                    ctx.restore();
                    
                    // Continue animation loop
                    setTimeout(() => {
                        if (isVisible) {
                            animationId = requestAnimationFrame(animate);
                        } else {
                            animationId = null;
                        }
                    }, 100);
                };
            }
            // 4. TaskFormer (Strategic Flow Visualization)
            const canvas4 = document.getElementById('canvas-taskformer');
            if (canvas4) {
                const ctx = canvas4.getContext('2d');
                let width, height;
                let nodes = [];
                let paths = [];
                let isVisible = false;
                let animationId = null;
                let isHovered = false;
                
                const parent = canvas4.parentElement;
                parent.addEventListener('mouseenter', () => isHovered = true);
                parent.addEventListener('mouseleave', () => isHovered = false);
                
                // Create a flowing node in the system
                const createNode = () => ({
                    x: -20,
                    y: Math.random() * height,
                    vx: 0.3 + Math.random() * 0.4,
                    vy: (Math.random() - 0.5) * 0.2,
                    size: 1.5 + Math.random() * 1,
                    opacity: 0,
                    life: 200 + Math.random() * 100,
                    age: 0,
                    path: Math.floor(Math.random() * 3) // Which path tier it follows
                });
                
                // Create horizontal flow paths
                const createPaths = () => {
                    paths = [];
                    const numPaths = 3;
                    for (let i = 0; i < numPaths; i++) {
                        paths.push({
                            y: height * (0.25 + i * 0.25),
                            baseY: height * (0.25 + i * 0.25),
                            phase: Math.random() * Math.PI * 2,
                            amplitude: 15 + Math.random() * 10,
                            frequency: 0.002 + Math.random() * 0.001
                        });
                    }
                };
                
                const resize = () => {
                    width = canvas4.width = canvas4.parentElement.offsetWidth;
                    height = canvas4.height = canvas4.parentElement.offsetHeight;
                    createPaths();
                    nodes = [];
                    // Pre-populate with some nodes
                    for (let i = 0; i < 20; i++) {
                        const node = createNode();
                        node.x = Math.random() * width;
                        node.opacity = 1;
                        node.age = Math.random() * 50;
                        nodes.push(node);
                    }
                };
                resize();
                window.addEventListener('resize', debounce(resize, 150));
                
                // Visibility detection
                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        isVisible = entry.isIntersecting;
                        if (isVisible && !animationId) {
                            animate();
                        }
                    });
                }, { threshold: 0.1 });
                observer.observe(canvas4);

                const animate = () => {
                    // Clear with slight trail for motion blur effect
                    ctx.fillStyle = 'rgba(10, 10, 10, 0.15)';
                    ctx.fillRect(0, 0, width, height);
                    
                    // Spawn new nodes periodically
                    if (nodes.length < 30 && Math.random() < 0.15) {
                        nodes.push(createNode());
                    }
                    
                    // Update path phases for wave motion
                    paths.forEach(path => {
                        path.phase += 0.01;
                    });
                    
                    // Draw subtle connection lines between nearby nodes
                    ctx.globalAlpha = 1;
                    nodes.forEach((node, i) => {
                        nodes.forEach((other, j) => {
                            if (i >= j) return;
                            
                            const dx = node.x - other.x;
                            const dy = node.y - other.y;
                            const dist = Math.sqrt(dx * dx + dy * dy);
                            
                            const maxDist = isHovered ? 100 : 150;
                            
                            if (dist < maxDist && node.opacity > 0.3 && other.opacity > 0.3) {
                                ctx.beginPath();
                                ctx.moveTo(node.x, node.y);
                                ctx.lineTo(other.x, other.y);
                                
                                const opacity = (1 - dist / maxDist) * 0.15 * Math.min(node.opacity, other.opacity);
                                ctx.strokeStyle = isHovered ? `rgba(255, 51, 51, ${opacity})` : `rgba(68, 68, 68, ${opacity})`;
                                ctx.lineWidth = 1;
                                ctx.stroke();
                            }
                        });
                    });
                    
                    // Draw flowing path lines
                    ctx.globalAlpha = 1;
                    paths.forEach((path, idx) => {
                        ctx.beginPath();
                        for (let x = 0; x < width; x += 2) {
                            const y = path.baseY + Math.sin(x * path.frequency + path.phase) * path.amplitude;
                            if (x === 0) ctx.moveTo(x, y);
                            else ctx.lineTo(x, y);
                        }
                        ctx.strokeStyle = isHovered ? 'rgba(68, 68, 68, 0.3)' : 'rgba(68, 68, 68, 0.15)';
                        ctx.lineWidth = 1;
                        ctx.stroke();
                    });
                    
                    // Update and draw nodes
                    nodes.forEach((node, index) => {
                        node.age++;
                        
                        // Fade in/out lifecycle
                        if (node.age < 30) {
                            node.opacity = node.age / 30;
                        } else if (node.age > node.life - 30) {
                            node.opacity = (node.life - node.age) / 30;
                        } else {
                            node.opacity = 1;
                        }
                        
                        // Remove dead nodes
                        if (node.age >= node.life) {
                            nodes.splice(index, 1);
                            return;
                        }
                        
                        // Follow wave path
                        const path = paths[node.path % paths.length];
                        const targetY = path.baseY + Math.sin(node.x * path.frequency + path.phase) * path.amplitude;
                        node.vy += (targetY - node.y) * 0.02; // Attraction to path
                        node.vy *= 0.95; // Damping
                        
                        // Add shake on hover
                        let shakeX = 0, shakeY = 0;
                        if (isHovered) {
                            shakeX = (Math.random() - 0.5) * 3;
                            shakeY = (Math.random() - 0.5) * 3;
                        }
                        
                        // Movement
                        node.x += node.vx;
                        node.y += node.vy;
                        
                        const drawX = node.x + shakeX;
                        const drawY = node.y + shakeY;
                        
                        // Draw node
                        ctx.globalAlpha = node.opacity;
                        ctx.fillStyle = isHovered ? '#ff3333' : '#666';
                        ctx.beginPath();
                        ctx.arc(drawX, drawY, node.size, 0, Math.PI * 2);
                        ctx.fill();
                        
                        // Draw small directional tail
                        ctx.globalAlpha = node.opacity * 0.4;
                        ctx.beginPath();
                        ctx.moveTo(drawX, drawY);
                        ctx.lineTo(drawX - node.vx * 8, drawY - node.vy * 8);
                        ctx.strokeStyle = isHovered ? '#ff3333' : '#444';
                        ctx.lineWidth = 1;
                        ctx.stroke();
                    });
                    
                    ctx.globalAlpha = 1;

                    if (isVisible) {
                        animationId = requestAnimationFrame(animate);
                    } else {
                        animationId = null;
                    }
                };
            }

            // 5. Financial Service (Optimization Streams)
            // Concept: "Signal from Noise". Scattered, volatile paths (Risk/Inefficiency) 
            // converge into a focused, optimized stream (Strategy/Growth).
            const canvas5 = document.getElementById('canvas-financial');
            if (canvas5) {
                const ctx = canvas5.getContext('2d');
                let width, height;
                let isVisible = false;
                let animationId = null;
                
                let particles = [];
                const particleCount = 80;
                let targetY = 0;
                let mouse = { x: null, y: null };

                // Interaction
                canvas5.parentElement.addEventListener('mousemove', (e) => {
                    const rect = canvas5.getBoundingClientRect();
                    mouse.x = e.clientX - rect.left;
                    mouse.y = e.clientY - rect.top;
                });
                canvas5.parentElement.addEventListener('mouseleave', () => {
                    mouse.x = null;
                    mouse.y = null;
                });

                class StreamParticle {
                    constructor() {
                        this.reset(true);
                        // Randomize initial x to fill screen immediately
                        this.x = Math.random() * width;
                    }

                    reset(startAtLeft = true) {
                        this.x = startAtLeft ? 0 : Math.random() * width;
                        // Start at random Y with high variance
                        this.y = Math.random() * height;
                        
                        this.speed = Math.random() * 1.5 + 0.5;
                        this.size = Math.random() * 1.2 + 0.5;
                        
                        // Noise properties
                        this.wobbleSpeed = Math.random() * 0.05;
                        this.wobbleAmp = Math.random() * 2;
                        this.wobbleOffset = Math.random() * 100;
                    }

                    update() {
                        this.x += this.speed;
                        
                        // Determine target Y (Mouse or Center)
                        const destY = (mouse.y !== null) ? mouse.y : height / 2;
                        
                        // Convergence Logic
                        // Progress 0 (Left) -> 1 (Right)
                        const progress = this.x / width;
                        
                        // Attraction strength increases as we move right
                        // Non-linear: starts weak, gets strong
                        const attraction = Math.pow(progress, 1.5) * 0.08;
                        
                        const dy = destY - this.y;
                        this.y += dy * attraction;
                        
                        // Add noise (decreases as we align)
                        const noise = Math.sin(this.x * this.wobbleSpeed + this.wobbleOffset) * this.wobbleAmp;
                        this.y += noise * (1 - progress); // Less noise at the end

                        // Reset if off screen
                        if (this.x > width) {
                            this.reset(true);
                        }
                    }

                    draw() {
                        // Draw head
                        ctx.fillStyle = 'rgba(255, 255, 255, 0.9)';
                        ctx.beginPath();
                        ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                        ctx.fill();
                    }
                }

                const resize = () => {
                    width = canvas5.width = canvas5.parentElement.offsetWidth;
                    height = canvas5.height = canvas5.parentElement.offsetHeight;
                    targetY = height / 2;
                    
                    particles = [];
                    for(let i=0; i<particleCount; i++) {
                        particles.push(new StreamParticle());
                    }
                };
                resize();
                window.addEventListener('resize', debounce(resize, 150));
                
                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        isVisible = entry.isIntersecting;
                        if (isVisible && !animationId) {
                            animate();
                        }
                    });
                }, { threshold: 0.1 });
                observer.observe(canvas5);

                const animate = () => {
                    if (!isVisible) {
                        animationId = null;
                        return;
                    }

                    // Trail effect: Low opacity fillRect
                    // This creates the "long exposure" look of financial charts
                    ctx.fillStyle = 'rgba(10, 10, 10, 0.08)'; 
                    ctx.fillRect(0, 0, width, height);

                    particles.forEach(p => {
                        p.update();
                        p.draw();
                    });

                    // Optional: Draw a subtle "Target Line" if mouse is active
                    if (mouse.y !== null) {
                        ctx.beginPath();
                        ctx.strokeStyle = 'rgba(255, 255, 255, 0.1)';
                        ctx.lineWidth = 1;
                        ctx.moveTo(0, mouse.y);
                        ctx.lineTo(width, mouse.y);
                        ctx.stroke();
                    }

                    animationId = requestAnimationFrame(animate);
                };
            }

            // 6. Website Service (Lorenz Attractor - Chaos Theory)
            const canvas6 = document.getElementById('canvas-website');
            if (canvas6) {
                const ctx = canvas6.getContext('2d');
                let width, height;
                let isVisible = false;
                let animationId = null;
                
                // Lorenz System Parameters
                let x = 0.1, y = 0, z = 0;
                const sigma = 10;
                const rho = 28;
                const beta = 8/3;
                const dt = 0.01;
                let points = [];
                const maxPoints = 800; // Trail length

                const resize = () => {
                    width = canvas6.width = canvas6.parentElement.offsetWidth;
                    height = canvas6.height = canvas6.parentElement.offsetHeight;
                    points = []; // Reset on resize
                };
                resize();
                window.addEventListener('resize', debounce(resize, 150));
                
                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        isVisible = entry.isIntersecting;
                        if (isVisible && !animationId) {
                            animate();
                        }
                    });
                }, { threshold: 0.1 });
                observer.observe(canvas6);

                const animate = () => {
                    if (!isVisible) {
                        animationId = null;
                        return;
                    }

                    // Fade effect for trail
                    ctx.fillStyle = 'rgba(10, 10, 10, 0.1)'; // Very subtle fade
                    ctx.fillRect(0, 0, width, height);

                    // Calculate next point
                    const dx = (sigma * (y - x)) * dt;
                    const dy = (x * (rho - z) - y) * dt;
                    const dz = (x * y - beta * z) * dt;
                    x += dx;
                    y += dy;
                    z += dz;

                    points.push({x, y, z});
                    if (points.length > maxPoints) points.shift();

                    // Draw
                    ctx.beginPath();
                    ctx.strokeStyle = 'rgba(255, 255, 255, 0.5)';
                    ctx.lineWidth = 0.8;

                    // Projection scale
                    const scale = Math.min(width, height) / 60;
                    const centerX = width / 2;
                    const centerY = height / 2 + 10; // Offset slightly down

                    for (let i = 0; i < points.length - 1; i++) {
                        const p1 = points[i];
                        const p2 = points[i+1];
                        
                        // Simple 3D projection (isometric-ish)
                        // Rotate slightly to see structure better
                        const rotX1 = p1.x * Math.cos(0.5) - p1.y * Math.sin(0.5);
                        const rotY1 = p1.x * Math.sin(0.5) + p1.y * Math.cos(0.5);
                        
                        const rotX2 = p2.x * Math.cos(0.5) - p2.y * Math.sin(0.5);
                        const rotY2 = p2.x * Math.sin(0.5) + p2.y * Math.cos(0.5);

                        ctx.moveTo(centerX + rotX1 * scale, centerY - (p1.z - 25) * scale);
                        ctx.lineTo(centerX + rotX2 * scale, centerY - (p2.z - 25) * scale);
                    }
                    ctx.stroke();

                    animationId = requestAnimationFrame(animate);
                };
            }
        }

        // --- 11. LIVE TICKER ---
        async function initLiveTicker() {
            const ticker = document.getElementById('live-ticker');
            
            // Mock data initially to prevent empty space
            ticker.innerHTML = `
                <span>AUSTIN: <span class="live-val">72F</span></span>
                <span>ETH GAS: <span class="live-val">12 GWEI</span></span>
            `;

            try {
                // 1. Weather (Open-Meteo)
                const weatherRes = await fetch('https://api.open-meteo.com/v1/forecast?latitude=30.2672&longitude=-97.7431&current=temperature_2m&temperature_unit=fahrenheit');
                const weatherData = await weatherRes.json();
                const temp = Math.round(weatherData.current.temperature_2m);

                // 2. ETH Gas (Etherscan proxy or similar - using CoinGecko for Price as Gas needs API key usually)
                // Let's use CoinGecko for ETH Price instead as it's more stable free
                const cryptoRes = await fetch('https://api.coingecko.com/api/v3/simple/price?ids=ethereum&vs_currencies=usd');
                const cryptoData = await cryptoRes.json();
                const ethPrice = Math.round(cryptoData.ethereum.usd);

                ticker.innerHTML = `
                    <span>AUSTIN: <span class="live-val">${temp}F</span></span>
                    <span>ETH: <span class="live-val">$${ethPrice}</span></span>
                `;
            } catch (e) {
                console.log('Live data fetch failed, using fallback');
            }
        }

        // --- 6. CURSOR & MAGNETIC ---
        const cursorDot = document.querySelector('.cursor-dot');
        const cursorOutline = document.querySelector('.cursor-outline');
        const magneticWraps = document.querySelectorAll('.magnetic-wrap');
        const viewProjectTargets = document.querySelectorAll('.view-project-target');
        const hoverTargets = document.querySelectorAll('.hover-target');

        let mouse = { x: window.innerWidth/2, y: window.innerHeight/2 };
        let cursor = { x: window.innerWidth/2, y: window.innerHeight/2 };

        window.addEventListener('mousemove', (e) => {
            mouse.x = e.clientX;
            mouse.y = e.clientY;
            // Use transform for better performance (hardware accelerated)
            cursorDot.style.transform = `translate(${mouse.x - 3}px, ${mouse.y - 3}px)`;
        }, { passive: true });

        function animateCursor() {
            // Increased speed from 0.15 to 0.35 for lower latency cursor following
            const speed = 0.35; 
            cursor.x += (mouse.x - cursor.x) * speed;
            cursor.y += (mouse.y - cursor.y) * speed;
            // Use transform for better performance (hardware accelerated)
            cursorOutline.style.transform = `translate(${cursor.x - 16}px, ${cursor.y - 16}px)`;
            requestAnimationFrame(animateCursor);
        }
        animateCursor();

        // Track if cursor is in a magnetic field for scaling
        let isMagnetic = false;
        
        magneticWraps.forEach(wrap => {
            const content = wrap.querySelector('.magnetic-content');
            wrap.addEventListener('mousemove', (e) => {
                const rect = wrap.getBoundingClientRect();
                const x = e.clientX - rect.left - rect.width / 2;
                const y = e.clientY - rect.top - rect.height / 2;
                content.style.transform = `translate(${x * 0.4}px, ${y * 0.4}px)`;
                isMagnetic = true;
                cursorOutline.style.width = '58px';
                cursorOutline.style.height = '58px';
                cursorOutline.style.borderColor = "rgba(255, 255, 255, 0.8)";
            }, { passive: true });
            wrap.addEventListener('mouseleave', () => {
                content.style.transform = `translate(0px, 0px)`;
                isMagnetic = false;
                cursorOutline.style.width = '32px';
                cursorOutline.style.height = '32px';
                cursorOutline.style.borderColor = "rgba(255, 255, 255, 0.2)";
            });
        });

        hoverTargets.forEach(el => {
            el.addEventListener('mouseenter', () => document.body.classList.add('hovering'));
            el.addEventListener('mouseleave', () => document.body.classList.remove('hovering'));
        });

        viewProjectTargets.forEach(el => {
            el.addEventListener('mouseenter', () => document.body.classList.add('viewing-project'));
            el.addEventListener('mouseleave', () => document.body.classList.remove('viewing-project'));
        });

        // --- 7. SCROLL REVEAL ---
        function initScrollReveal() {
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('active');
                        // Stop observing after animation triggers for performance
                        observer.unobserve(entry.target);
                    }
                });
            }, { threshold: 0.1, rootMargin: "0px 0px -80px 0px" });

            document.querySelectorAll('.reveal-text').forEach(el => {
                // Immediately activate elements already in viewport
                const rect = el.getBoundingClientRect();
                if (rect.top < window.innerHeight && rect.bottom > 0) {
                    el.classList.add('active');
                } else {
                    observer.observe(el);
                }
            });
        }

        // --- 8. MOBILE MENU ---
        const menuBtn = document.getElementById('menu-btn');
        const closeBtnMenu = document.getElementById('close-menu-btn');
        const mobileMenu = document.getElementById('mobile-menu');
        
        function toggleMenu() {
            mobileMenu.classList.toggle('translate-x-full');
            const isOpen = !mobileMenu.classList.contains('translate-x-full');
            document.body.style.overflow = isOpen ? 'hidden' : 'auto';
            menuBtn.setAttribute('aria-expanded', isOpen.toString());
        }
        menuBtn.addEventListener('click', toggleMenu);
        closeBtnMenu.addEventListener('click', toggleMenu);
        document.querySelectorAll('.mobile-link').forEach(l => l.addEventListener('click', toggleMenu));

        // --- 9. THREE.JS GLOBE ---
        function initGlobe() {
            const container = document.getElementById('canvas-container');
            let isVisible = false;
            let animationId = null;
            
            // Visibility detection for globe
            const globeObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    isVisible = entry.isIntersecting;
                    if (isVisible && !animationId) {
                        animate();
                    }
                });
            }, { threshold: 0.1 });
            globeObserver.observe(container);
            
            const scene = new THREE.Scene();
            const camera = new THREE.PerspectiveCamera(75, container.clientWidth / container.clientHeight, 0.1, 1000);
            camera.position.z = 6;
            // Optimization: Disable antialias for performance
            const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: false });
            renderer.setSize(container.clientWidth, container.clientHeight);
            renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2)); 
            container.appendChild(renderer.domElement);

            const group = new THREE.Group();
            scene.add(group);

            const geometry = new THREE.IcosahedronGeometry(2.6, 1);
            const material = new THREE.MeshBasicMaterial({ 
                color: 0xCCCCCC, 
                wireframe: true, 
                transparent: true, 
                opacity: 0.35 
            });
            const sphere = new THREE.Mesh(geometry, material);
            group.add(sphere);

            const innerGeometry = new THREE.IcosahedronGeometry(2.55, 1);
            const innerMaterial = new THREE.MeshBasicMaterial({ color: 0x030303 }); 
            const innerSphere = new THREE.Mesh(innerGeometry, innerMaterial);
            group.add(innerSphere);

            const particlesGeometry = new THREE.BufferGeometry();
            const particlesCount = 600;
            const posArray = new Float32Array(particlesCount * 3);
            for(let i = 0; i < particlesCount * 3; i++) {
                posArray[i] = (Math.random() - 0.5) * 12; 
            }
            particlesGeometry.setAttribute('position', new THREE.BufferAttribute(posArray, 3));
            const particlesMaterial = new THREE.PointsMaterial({
                size: 0.02,
                color: 0xffffff,
                transparent: true,
                opacity: 0.6
            });
            const particlesMesh = new THREE.Points(particlesGeometry, particlesMaterial);
            group.add(particlesMesh);

            let mouseX = 0;
            let mouseY = 0;
            const windowHalfX = window.innerWidth / 2;
            const windowHalfY = window.innerHeight / 2;

            document.addEventListener('mousemove', (event) => {
                mouseX = (event.clientX - windowHalfX) * 0.0003;
                mouseY = (event.clientY - windowHalfY) * 0.0003;
            }, { passive: true });

            // Mobile Gyroscope
            function handleOrientation(event) {
                if (event.beta !== null && event.gamma !== null) {
                    // beta is front-back tilt [-180, 180], gamma is left-right tilt [-90, 90]
                    // Convert degrees to radians and amplify for "physical" feel
                    // 0.04 is approx 2.3 degrees per 1 degree of tilt
                    mouseX = event.gamma * 0.04; 
                    mouseY = event.beta * 0.04;
                }
            }

            window.addEventListener('deviceorientation', handleOrientation);

            // Request permission for iOS 13+ devices
            if (typeof DeviceOrientationEvent !== 'undefined' && typeof DeviceOrientationEvent.requestPermission === 'function') {
                document.body.addEventListener('click', async () => {
                    try {
                        const response = await DeviceOrientationEvent.requestPermission();
                        if (response === 'granted') {
                            window.addEventListener('deviceorientation', handleOrientation);
                        }
                    } catch (e) {
                        console.error("Gyroscope permission denied", e);
                    }
                }, { once: true });
            }

            function animate() {
                if (!isVisible) {
                    animationId = null;
                    return;
                }
                animationId = requestAnimationFrame(animate);
                sphere.rotation.y += 0.001;
                particlesMesh.rotation.y += 0.0003;
                group.rotation.x += 0.05 * (mouseY - group.rotation.x);
                group.rotation.y += 0.05 * (mouseX - group.rotation.y);
                renderer.render(scene, camera);
            }

            window.addEventListener('resize', debounce(() => {
                camera.aspect = container.clientWidth / container.clientHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(container.clientWidth, container.clientHeight);
            }, 150));
        }
        initGlobe();
        // --- 6. OSCILLOSCOPE VISUALIZATION (LIQUID AUDIO) ---
        const oscCanvas = document.getElementById('oscilloscope');
        if (oscCanvas) {
            const ctx = oscCanvas.getContext('2d');
            let width, height;
            let time = 0;
            let isOscVisible = false;
            let oscAnimationId = null;
            
            // Mouse interaction
            let mouseX = 0;
            let mouseY = 0;
            let mouseSpeed = 0;
            let lastMouseX = 0;
            let lastMouseY = 0;

            function resizeOsc() {
                width = oscCanvas.width = oscCanvas.offsetWidth;
                height = oscCanvas.height = oscCanvas.offsetHeight;
            }
            // Optimization: Debounce resize
            window.addEventListener('resize', debounce(resizeOsc, 150));
            resizeOsc();

            // Optimization: Intersection Observer
            const oscObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    isOscVisible = entry.isIntersecting;
                    if (isOscVisible && !oscAnimationId) {
                        animateOsc();
                    }
                });
            }, { threshold: 0.1 });
            oscObserver.observe(oscCanvas);

            window.addEventListener('mousemove', (e) => {
                if (!isOscVisible) return; // Optimization: Don't track mouse if not visible
                const rect = oscCanvas.getBoundingClientRect();
                mouseX = e.clientX - rect.left;
                mouseY = e.clientY - rect.top;
                
                // Calculate speed
                const dx = e.clientX - lastMouseX;
                const dy = e.clientY - lastMouseY;
                mouseSpeed = Math.sqrt(dx*dx + dy*dy);
                
                lastMouseX = e.clientX;
                lastMouseY = e.clientY;
            }, { passive: true });

            function animateOsc() {
                if (!isOscVisible) {
                    oscAnimationId = null;
                    return;
                }
                
                ctx.clearRect(0, 0, width, height);
                
                // Decay mouse speed
                mouseSpeed *= 0.95;
                
                // Draw multiple waves
                const waves = [
                    { amplitude: 30, frequency: 0.002, speed: 0.02, color: 'rgba(255, 255, 255, 0.1)' },
                    { amplitude: 50, frequency: 0.003, speed: 0.015, color: 'rgba(255, 255, 255, 0.2)' },
                    { amplitude: 20, frequency: 0.005, speed: 0.03, color: 'rgba(255, 255, 255, 0.15)' }
                ];

                waves.forEach((wave, index) => {
                    ctx.beginPath();
                    ctx.strokeStyle = wave.color;
                    ctx.lineWidth = 1.5;

                    for (let x = 0; x < width; x++) {
                        // Base wave
                        let y = (height / 2) + 
                               (wave.amplitude * Math.sin(x * wave.frequency + time * (index + 1) * 0.5));
                        
                        // Mouse interaction (Spike)
                        const dist = Math.abs(x - mouseX);
                        const influence = Math.max(0, 1 - dist / 200); // 200px radius
                        
                        if (influence > 0) {
                            // Add noise/spike based on mouse speed
                            y += Math.sin(x * 0.1 + time * 5) * mouseSpeed * influence * 0.5;
                        }

                        if (x === 0) ctx.moveTo(x, y);
                        else ctx.lineTo(x, y);
                    }
                    ctx.stroke();
                });
                
                time += 0.02;
                oscAnimationId = requestAnimationFrame(animateOsc);
            }
            // Initial start handled by observer
        }
        
        // Ensure icons are created if script loaded late
        if (typeof lucide !== 'undefined') {
            lucide.createIcons();
        }
    </script>
</body>
</html>
